{"version":3,"file":"canvas_clear.html.js","names":["runRefTest","t","draw","canvasId","format","canvas","document","getElementById","ctx","getContext","configure","device","colorAttachment","getCurrentTexture","colorAttachmentView","createView","encoder","createCommandEncoder","label","pass","beginRenderPass","colorAttachments","view","clearValue","r","g","b","a","loadOp","storeOp","end","queue","submit","finish"],"sources":["../../../../src/webgpu/web_platform/reftests/canvas_clear.html.ts"],"sourcesContent":["import { runRefTest } from './gpu_ref_test.js';\n\nrunRefTest(t => {\n  function draw(canvasId: string, format: GPUTextureFormat) {\n    const canvas = document.getElementById(canvasId) as HTMLCanvasElement;\n\n    const ctx = canvas.getContext('webgpu') as unknown as GPUCanvasContext;\n    ctx.configure({\n      device: t.device,\n      format,\n    });\n\n    const colorAttachment = ctx.getCurrentTexture();\n    const colorAttachmentView = colorAttachment.createView();\n\n    const encoder = t.device.createCommandEncoder({ label: 'runRefTest' });\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n        {\n          view: colorAttachmentView,\n          clearValue: { r: 0.4, g: 1.0, b: 0.0, a: 1.0 },\n          loadOp: 'clear',\n          storeOp: 'store',\n        },\n      ],\n    });\n    pass.end();\n    t.device.queue.submit([encoder.finish()]);\n  }\n\n  draw('cvs0', 'bgra8unorm');\n  draw('cvs1', 'rgba8unorm');\n  draw('cvs2', 'rgba16float');\n});\n"],"mappings":";;GAAA,SAASA,UAAU,QAAQ,mBAAmB,CAE9CA,UAAU,CAAC,CAAAC,CAAC,KAAI;EACd,SAASC,IAAIA,CAACC,QAAgB,EAAEC,MAAwB,EAAE;IACxD,MAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAACJ,QAAQ,CAAsB;;IAErE,MAAMK,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,QAAQ,CAAgC;IACtED,GAAG,CAACE,SAAS,CAAC;MACZC,MAAM,EAAEV,CAAC,CAACU,MAAM;MAChBP;IACF,CAAC,CAAC;;IAEF,MAAMQ,eAAe,GAAGJ,GAAG,CAACK,iBAAiB,CAAC,CAAC;IAC/C,MAAMC,mBAAmB,GAAGF,eAAe,CAACG,UAAU,CAAC,CAAC;;IAExD,MAAMC,OAAO,GAAGf,CAAC,CAACU,MAAM,CAACM,oBAAoB,CAAC,EAAEC,KAAK,EAAE,YAAY,CAAC,CAAC,CAAC;IACtE,MAAMC,IAAI,GAAGH,OAAO,CAACI,eAAe,CAAC;MACnCC,gBAAgB,EAAE;MAChB;QACEC,IAAI,EAAER,mBAAmB;QACzBS,UAAU,EAAE,EAAEC,CAAC,EAAE,GAAG,EAAEC,CAAC,EAAE,GAAG,EAAEC,CAAC,EAAE,GAAG,EAAEC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC9CC,MAAM,EAAE,OAAO;QACfC,OAAO,EAAE;MACX,CAAC;;IAEL,CAAC,CAAC;IACFV,IAAI,CAACW,GAAG,CAAC,CAAC;IACV7B,CAAC,CAACU,MAAM,CAACoB,KAAK,CAACC,MAAM,CAAC,CAAChB,OAAO,CAACiB,MAAM,CAAC,CAAC,CAAC,CAAC;EAC3C;;EAEA/B,IAAI,CAAC,MAAM,EAAE,YAAY,CAAC;EAC1BA,IAAI,CAAC,MAAM,EAAE,YAAY,CAAC;EAC1BA,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC;AAC7B,CAAC,CAAC"}