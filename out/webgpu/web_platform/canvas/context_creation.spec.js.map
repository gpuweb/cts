{"version":3,"file":"context_creation.spec.js","names":["description","Fixture","makeTestGroup","g","test","desc","params","u","combine","beginSubcases","undefined","fn","t","canvas","offscreen","OffscreenCanvas","skip","document","createElement","attributes","width","height","ctx","getContext","expect","GPUCanvasContext"],"sources":["../../../../src/webgpu/web_platform/canvas/context_creation.spec.ts"],"sourcesContent":["export const description = `\nTests for canvas context creation.\n\nNote there are no context creation attributes for WebGPU (as of this writing).\nOptions are configured in configure() instead.\n`;\n\nimport { Fixture } from '../../../common/framework/fixture.js';\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\n\nexport const g = makeTestGroup(Fixture);\n\ng.test('return_type')\n  .desc(\n    `Test the return type of getContext for WebGPU.\n\n    TODO: Test OffscreenCanvas made from transferControlToOffscreen.`\n  )\n  .params(u =>\n    u //\n      .combine('offscreen', [false, true])\n      .beginSubcases()\n      .combine('attributes', [undefined, {}])\n  )\n  .fn(t => {\n    let canvas: HTMLCanvasElement | OffscreenCanvas;\n    if (t.params.offscreen) {\n      if (typeof OffscreenCanvas === 'undefined') {\n        // Skip if the current context doesn't have OffscreenCanvas (e.g. Node).\n        t.skip('OffscreenCanvas is not available in this context');\n      }\n\n      canvas = new OffscreenCanvas(10, 10);\n    } else {\n      if (typeof document === 'undefined') {\n        // Skip if there is no document (Workers, Node)\n        t.skip('DOM is not available to create canvas element');\n      }\n\n      canvas = document.createElement('canvas', t.params.attributes);\n      canvas.width = 10;\n      canvas.height = 10;\n    }\n\n    const ctx = canvas.getContext('webgpu');\n    t.expect(ctx instanceof GPUCanvasContext);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA,CAAC,CAED,SAASC,OAAO,QAAQ,sCAAsC;AAC9D,SAASC,aAAa,QAAQ,yCAAyC;;AAEvE,OAAO,MAAMC,CAAC,GAAGD,aAAa,CAACD,OAAO,CAAC;;AAEvCE,CAAC,CAACC,IAAI,CAAC,aAAa,CAAC;AAClBC,IAAI;EACF;AACL;AACA;AACE,CAAC;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACnCC,aAAa,CAAC,CAAC;AACfD,OAAO,CAAC,YAAY,EAAE,CAACE,SAAS,EAAE,CAAC,CAAC,CAAC;AAC1C,CAAC;AACAC,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,IAAIC,MAA2C;EAC/C,IAAID,CAAC,CAACN,MAAM,CAACQ,SAAS,EAAE;IACtB,IAAI,OAAOC,eAAe,KAAK,WAAW,EAAE;MAC1C;MACAH,CAAC,CAACI,IAAI,CAAC,kDAAkD,CAAC;IAC5D;;IAEAH,MAAM,GAAG,IAAIE,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC;EACtC,CAAC,MAAM;IACL,IAAI,OAAOE,QAAQ,KAAK,WAAW,EAAE;MACnC;MACAL,CAAC,CAACI,IAAI,CAAC,+CAA+C,CAAC;IACzD;;IAEAH,MAAM,GAAGI,QAAQ,CAACC,aAAa,CAAC,QAAQ,EAAEN,CAAC,CAACN,MAAM,CAACa,UAAU,CAAC;IAC9DN,MAAM,CAACO,KAAK,GAAG,EAAE;IACjBP,MAAM,CAACQ,MAAM,GAAG,EAAE;EACpB;;EAEA,MAAMC,GAAG,GAAGT,MAAM,CAACU,UAAU,CAAC,QAAQ,CAAC;EACvCX,CAAC,CAACY,MAAM,CAACF,GAAG,YAAYG,gBAAgB,CAAC;AAC3C,CAAC,CAAC"}