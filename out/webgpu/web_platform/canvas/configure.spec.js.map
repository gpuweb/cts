{"version":3,"file":"configure.spec.js","names":["description","makeTestGroup","assert","isValidTextureUsageCombination","kCanvasTextureFormats","kSomeBogusTextureUsage","kTextureUsages","kValidCombinationsOfOneOrTwoTextureUsages","usageIsTypeErrorForConfigure","GPUConst","kAllTextureFormats","kFeaturesForFormats","filterFormatsByFeature","textureFormatsAreViewCompatible","AllFeaturesMaxLimitsGPUTest","kAllCanvasTypes","createCanvas","g","test","desc","params","u","combine","fn","t","canvasType","canvas","ctx","getContext","GPUCanvasContext","configure","device","format","configuration","getConfiguration","expect","usage","GPUTextureUsage","RENDER_ATTACHMENT","viewFormats","length","colorSpace","toneMapping","mode","alphaMode","currentTexture","getCurrentTexture","dimension","width","height","depthOrArrayLayers","mipLevelCount","sampleCount","shouldThrow","unconfigure","newConfiguration","skipIfTextureFormatNotSupported","validFormat","canvasFormat","beginSubcases","filter","TextureUsage","TRANSIENT_ATTACHMENT","skipIfTransientAttachmentNotSupported","GPUTexture","encoder","createCommandEncoder","pass","beginRenderPass","colorAttachments","view","createView","clearValue","loadOp","storeOp","end","queue","submit","finish","TEXTURE_BINDING","bgl","createBindGroupLayout","entries","binding","visibility","GPUShaderStage","FRAGMENT","texture","createBindGroup","layout","resource","canUseStorageTextureInFragmentShader","isCompatibility","limits","maxStorageTexturesInFragmentStage","STORAGE_BINDING","storageTexture","access","COPY_DST","rgbaData","Uint8Array","writeTexture","COPY_SRC","size","dstTexture","createTextureTracked","copyTextureToTexture","invalidUsage","expectValidationError","undefined","zeroDimension","expand","viewFormatFeature","viewFormat","compatible","features"],"sources":["../../../../src/webgpu/web_platform/canvas/configure.spec.ts"],"sourcesContent":["export const description = `\nTests for GPUCanvasContext.configure.\n\nTODO:\n- Test colorSpace\n- Test toneMapping\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert } from '../../../common/util/util.js';\nimport {\n  isValidTextureUsageCombination,\n  kCanvasTextureFormats,\n  kSomeBogusTextureUsage,\n  kTextureUsages,\n  kValidCombinationsOfOneOrTwoTextureUsages,\n  usageIsTypeErrorForConfigure,\n} from '../../capability_info.js';\nimport { GPUConst } from '../../constants.js';\nimport {\n  kAllTextureFormats,\n  kFeaturesForFormats,\n  filterFormatsByFeature,\n  textureFormatsAreViewCompatible,\n} from '../../format_info.js';\nimport { AllFeaturesMaxLimitsGPUTest } from '../../gpu_test.js';\nimport { kAllCanvasTypes, createCanvas } from '../../util/create_elements.js';\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsGPUTest);\n\ng.test('defaults')\n  .desc(\n    `\n    Ensure that the defaults for GPUCanvasConfiguration are correct.\n    `\n  )\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n  )\n  .fn(t => {\n    const { canvasType } = t.params;\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    ctx.configure({\n      device: t.device,\n      format: 'rgba8unorm',\n    });\n\n    const configuration = ctx.getConfiguration();\n    assert(configuration !== null);\n    t.expect(configuration.device === t.device);\n    t.expect(configuration.format === 'rgba8unorm');\n    t.expect(configuration.usage === GPUTextureUsage.RENDER_ATTACHMENT);\n    t.expect(configuration.viewFormats.length === 0);\n    t.expect(configuration.colorSpace === 'srgb');\n    t.expect(configuration.toneMapping?.mode === 'standard');\n    t.expect(configuration.alphaMode === 'opaque');\n\n    const currentTexture = ctx.getCurrentTexture();\n    t.expect(currentTexture.format === 'rgba8unorm');\n    t.expect(currentTexture.usage === GPUTextureUsage.RENDER_ATTACHMENT);\n    t.expect(currentTexture.dimension === '2d');\n    t.expect(currentTexture.width === canvas.width);\n    t.expect(currentTexture.height === canvas.height);\n    t.expect(currentTexture.depthOrArrayLayers === 1);\n    t.expect(currentTexture.mipLevelCount === 1);\n    t.expect(currentTexture.sampleCount === 1);\n  });\n\ng.test('device')\n  .desc(\n    `\n    Ensure that configure reacts appropriately to various device states.\n    `\n  )\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n  )\n  .fn(t => {\n    const { canvasType } = t.params;\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    // getConfiguration returns null before configure.\n    t.expect(ctx.getConfiguration() === null);\n\n    // Calling configure without a device should throw a TypeError.\n    t.shouldThrow('TypeError', () => {\n      ctx.configure({\n        format: 'rgba8unorm',\n      } as GPUCanvasConfiguration);\n    });\n\n    // Device is not configured, so getCurrentTexture will throw an InvalidStateError.\n    t.shouldThrow('InvalidStateError', () => {\n      ctx.getCurrentTexture();\n    });\n\n    // Should throw on the second call to getCurrentTexture also.\n    t.shouldThrow('InvalidStateError', () => {\n      ctx.getCurrentTexture();\n    });\n\n    // Calling configure with a device should succeed.\n    ctx.configure({\n      device: t.device,\n      format: 'rgba8unorm',\n      alphaMode: 'opaque',\n    });\n\n    // getConfiguration will succeed after configure.\n    const configuration = ctx.getConfiguration();\n    assert(configuration !== null);\n    t.expect(configuration.device === t.device);\n    t.expect(configuration.format === 'rgba8unorm');\n    t.expect(configuration.usage === GPUTextureUsage.RENDER_ATTACHMENT);\n    t.expect(configuration.viewFormats.length === 0);\n    t.expect(configuration.colorSpace === 'srgb');\n    t.expect(configuration.toneMapping?.mode === 'standard');\n    t.expect(configuration.alphaMode === 'opaque');\n\n    // getCurrentTexture will succeed with a valid device.\n    ctx.getCurrentTexture();\n\n    // Unconfiguring should cause the device to be cleared.\n    ctx.unconfigure();\n    t.shouldThrow('InvalidStateError', () => {\n      ctx.getCurrentTexture();\n    });\n\n    // getConfiguration returns null after unconfigure.\n    t.expect(ctx.getConfiguration() === null);\n\n    // Should be able to successfully configure again after unconfiguring.\n    ctx.configure({\n      device: t.device,\n      format: 'rgba8unorm',\n      alphaMode: 'premultiplied',\n    });\n    ctx.getCurrentTexture();\n\n    // getConfiguration will succeed after configure.\n    const newConfiguration = ctx.getConfiguration();\n    assert(newConfiguration !== null);\n    t.expect(newConfiguration.device === t.device);\n    t.expect(newConfiguration.format === 'rgba8unorm');\n    t.expect(newConfiguration.usage === GPUTextureUsage.RENDER_ATTACHMENT);\n    t.expect(newConfiguration.viewFormats.length === 0);\n    t.expect(newConfiguration.colorSpace === 'srgb');\n    t.expect(newConfiguration.toneMapping?.mode === 'standard');\n    t.expect(newConfiguration.alphaMode === 'premultiplied');\n  });\n\ng.test('format')\n  .desc(\n    `\n    Ensure that only valid texture formats are allowed when calling configure.\n    `\n  )\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('format', kAllTextureFormats)\n  )\n  .fn(t => {\n    const { canvasType, format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    // Would prefer to use kCanvasTextureFormats.includes(format), but that's giving TS errors.\n    let validFormat = false;\n    for (const canvasFormat of kCanvasTextureFormats) {\n      if (format === canvasFormat) {\n        validFormat = true;\n        break;\n      }\n    }\n\n    if (validFormat) {\n      ctx.configure({\n        device: t.device,\n        format,\n      });\n      const configuration = ctx.getConfiguration();\n      t.expect(configuration!.format === format);\n    } else {\n      t.shouldThrow('TypeError', () => {\n        ctx.configure({\n          device: t.device,\n          format,\n        });\n      });\n    }\n  });\n\ng.test('usage')\n  .desc(\n    `\n    Ensure that getCurrentTexture returns a texture with the configured usages.\n    `\n  )\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n      .beginSubcases()\n      .combine(\n        'usage',\n        kValidCombinationsOfOneOrTwoTextureUsages\n          // TypeError cases are tested in the next test.\n          .filter(usage => !usageIsTypeErrorForConfigure(usage))\n      )\n  )\n  .fn(t => {\n    const { canvasType, usage } = t.params;\n\n    // MAINTENANCE_TODO(#4509): Remove this when TRANSIENT_ATTACHMENT is added to the WebGPU spec.\n    if ((usage & GPUConst.TextureUsage.TRANSIENT_ATTACHMENT) !== 0) {\n      t.skipIfTransientAttachmentNotSupported();\n    }\n\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    ctx.configure({\n      device: t.device,\n      format: 'rgba8unorm',\n      usage,\n    });\n\n    const configuration = ctx.getConfiguration();\n    t.expect(configuration!.usage === usage);\n\n    const currentTexture = ctx.getCurrentTexture();\n    t.expect(currentTexture instanceof GPUTexture);\n    t.expect(currentTexture.usage === usage);\n\n    // Try to use the texture with the given usage\n\n    if (usage & GPUConst.TextureUsage.RENDER_ATTACHMENT) {\n      const encoder = t.device.createCommandEncoder();\n      const pass = encoder.beginRenderPass({\n        colorAttachments: [\n          {\n            view: currentTexture.createView(),\n            clearValue: [1.0, 0.0, 0.0, 1.0],\n            loadOp: 'clear',\n            storeOp: 'store',\n          },\n        ],\n      });\n      pass.end();\n      t.device.queue.submit([encoder.finish()]);\n    }\n\n    if (usage & GPUConst.TextureUsage.TEXTURE_BINDING) {\n      const bgl = t.device.createBindGroupLayout({\n        entries: [\n          {\n            binding: 0,\n            visibility: GPUShaderStage.FRAGMENT,\n            texture: {},\n          },\n        ],\n      });\n\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: currentTexture.createView(),\n          },\n        ],\n      });\n    }\n\n    const canUseStorageTextureInFragmentShader =\n      !t.isCompatibility || t.device.limits.maxStorageTexturesInFragmentStage! > 0;\n\n    if (\n      (usage & GPUConst.TextureUsage.STORAGE_BINDING) !== 0 &&\n      canUseStorageTextureInFragmentShader\n    ) {\n      const bgl = t.device.createBindGroupLayout({\n        entries: [\n          {\n            binding: 0,\n            visibility: GPUShaderStage.FRAGMENT,\n            storageTexture: { access: 'write-only', format: currentTexture.format },\n          },\n        ],\n      });\n\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: currentTexture.createView(),\n          },\n        ],\n      });\n    }\n\n    if (usage & GPUConst.TextureUsage.COPY_DST) {\n      const rgbaData = new Uint8Array([255, 0, 0, 255]);\n\n      t.device.queue.writeTexture({ texture: currentTexture }, rgbaData, {}, [1, 1, 1]);\n    }\n\n    if (usage & GPUConst.TextureUsage.COPY_SRC) {\n      const size = [currentTexture.width, currentTexture.height, 1];\n      const dstTexture = t.createTextureTracked({\n        format: currentTexture.format,\n        usage: GPUTextureUsage.COPY_DST,\n        size,\n      });\n\n      const encoder = t.device.createCommandEncoder();\n      encoder.copyTextureToTexture({ texture: currentTexture }, { texture: dstTexture }, size);\n      t.device.queue.submit([encoder.finish()]);\n    }\n  });\n\ng.test('invalid_usage')\n  .desc(`Test what happens when an invalid usage is passed to configure().`)\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n      // Test all formats because sometimes they're handled differently (require internal blits).\n      .combine('format', kCanvasTextureFormats)\n      .combine('usage', [\n        0,\n        GPUConst.TextureUsage.COPY_DST,\n        // Special case for bgra8unorm vs other formats\n        GPUConst.TextureUsage.STORAGE_BINDING,\n        // Special case(s) for canvases vs regular textures\n        ...kTextureUsages.filter(usageIsTypeErrorForConfigure),\n        GPUConst.TextureUsage.TRANSIENT_ATTACHMENT | GPUConst.TextureUsage.RENDER_ATTACHMENT,\n        // Various usages containing a bogus usage\n        kSomeBogusTextureUsage,\n        GPUConst.TextureUsage.COPY_DST | kSomeBogusTextureUsage,\n        GPUConst.TextureUsage.STORAGE_BINDING | kSomeBogusTextureUsage,\n        GPUConst.TextureUsage.TRANSIENT_ATTACHMENT | kSomeBogusTextureUsage,\n      ])\n  )\n  .fn(t => {\n    const { canvasType, format, usage } = t.params;\n\n    // MAINTENANCE_TODO(#4509): Remove this when TRANSIENT_ATTACHMENT is added to the WebGPU spec.\n    if ((usage & GPUConst.TextureUsage.TRANSIENT_ATTACHMENT) !== 0) {\n      t.skipIfTransientAttachmentNotSupported();\n    }\n\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    if (usageIsTypeErrorForConfigure(usage)) {\n      t.shouldThrow('TypeError', () => {\n        ctx.configure({ device: t.device, format, usage });\n      });\n\n      const configuration = ctx.getConfiguration();\n      assert(configuration === null);\n\n      t.shouldThrow('InvalidStateError', () => {\n        ctx.getCurrentTexture();\n      });\n    } else {\n      // Otherwise just the normal createTexture() usage validation applies.\n      const invalidUsage = !isValidTextureUsageCombination(usage);\n      t.expectValidationError(() => {\n        ctx.configure({ device: t.device, format, usage });\n      }, invalidUsage);\n\n      // The canvas still gets configured, and getCurrentTexture() can still be called.\n      const configuration = ctx.getConfiguration();\n      assert(configuration !== null);\n      t.expect(configuration.usage === usage);\n\n      let currentTexture: GPUTexture | undefined;\n      t.expectValidationError(() => {\n        currentTexture = ctx.getCurrentTexture();\n      }, invalidUsage);\n      assert(currentTexture !== undefined && currentTexture instanceof GPUTexture);\n      t.expect(currentTexture.usage === usage);\n    }\n  });\n\ng.test('alpha_mode')\n  .desc(\n    `\n    Ensure that all valid alphaMode values are allowed when calling configure.\n    `\n  )\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n      .beginSubcases()\n      .combine('alphaMode', ['opaque', 'premultiplied'] as const)\n  )\n  .fn(t => {\n    const { canvasType, alphaMode } = t.params;\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    ctx.configure({\n      device: t.device,\n      format: 'rgba8unorm',\n      alphaMode,\n    });\n\n    const configuration = ctx.getConfiguration();\n    t.expect(configuration!.alphaMode === alphaMode);\n\n    const currentTexture = ctx.getCurrentTexture();\n    t.expect(currentTexture instanceof GPUTexture);\n  });\n\ng.test('size_zero_before_configure')\n  .desc(`Ensure a validation error is raised in configure() if the size of the canvas is zero.`)\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('zeroDimension', ['width', 'height'] as const)\n  )\n  .fn(t => {\n    const { canvasType, zeroDimension } = t.params;\n    const canvas = createCanvas(t, canvasType, 1, 1);\n    canvas[zeroDimension] = 0;\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    // Validation error, the canvas size is 0 which doesn't make a valid GPUTextureDescriptor.\n    t.expectValidationError(() => {\n      ctx.configure({\n        device: t.device,\n        format: 'bgra8unorm',\n        usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      });\n    });\n\n    canvas[zeroDimension] = 1;\n\n    // The size being incorrect doesn't make for an invalid configuration. Now that it is fixed\n    // getting textures from the canvas should work.\n    const currentTexture = ctx.getCurrentTexture();\n\n    // Try rendering to it even!\n    const encoder = t.device.createCommandEncoder();\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n        {\n          view: currentTexture.createView(),\n          clearValue: [1.0, 0.0, 0.0, 1.0],\n          loadOp: 'clear',\n          storeOp: 'store',\n        },\n      ],\n    });\n    pass.end();\n    t.device.queue.submit([encoder.finish()]);\n  });\n\ng.test('size_zero_after_configure')\n  .desc(\n    `Ensure a validation error is raised after configure() if the size of the canvas becomes zero.`\n  )\n  .params(u =>\n    u //\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('zeroDimension', ['width', 'height'] as const)\n  )\n  .fn(t => {\n    const { canvasType, zeroDimension } = t.params;\n    const canvas = createCanvas(t, canvasType, 1, 1);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    ctx.configure({\n      device: t.device,\n      format: 'bgra8unorm',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n    });\n\n    canvas[zeroDimension] = 0;\n\n    // The size is incorrect, we should be getting an error texture and a validation error.\n    let currentTexture: GPUTexture;\n    t.expectValidationError(() => {\n      currentTexture = ctx.getCurrentTexture();\n    });\n\n    t.expect(currentTexture![zeroDimension] === 0);\n\n    // Using the texture should produce a validation error.\n    t.expectValidationError(() => {\n      currentTexture.createView();\n    });\n  });\n\ng.test('viewFormats')\n  .desc(\n    `Test the validation that viewFormats are compatible with the format (for all canvas format / view formats)`\n  )\n  .params(u =>\n    u\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('format', kCanvasTextureFormats)\n      .combine('viewFormatFeature', kFeaturesForFormats)\n      .beginSubcases()\n      .expand('viewFormat', ({ viewFormatFeature }) =>\n        filterFormatsByFeature(viewFormatFeature, kAllTextureFormats)\n      )\n  )\n  .fn(t => {\n    const { canvasType, format, viewFormat } = t.params;\n\n    t.skipIfTextureFormatNotSupported(viewFormat);\n\n    const canvas = createCanvas(t, canvasType, 1, 1);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    const compatible = textureFormatsAreViewCompatible(t.device.features, format, viewFormat);\n\n    // Test configure() produces an error if the formats aren't compatible.\n    t.expectValidationError(() => {\n      ctx.configure({\n        device: t.device,\n        format,\n        viewFormats: [viewFormat],\n      });\n    }, !compatible);\n\n    const viewFormats = ctx.getConfiguration()!.viewFormats;\n    t.expect(viewFormats[0] === viewFormat);\n\n    // Likewise for getCurrentTexture().\n    let currentTexture: GPUTexture;\n    t.expectValidationError(() => {\n      currentTexture = ctx.getCurrentTexture();\n    }, !compatible);\n\n    // The returned texture is an error texture.\n    t.expectValidationError(() => {\n      currentTexture.createView();\n    }, !compatible);\n  });\n"],"mappings":"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"}