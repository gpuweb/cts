{"version":3,"file":"swizzle_assignment.spec.js","names":["description","makeTestGroup","keysOf","Float16Array","AllFeaturesMaxLimitsGPUTest","g","runSwizzleAssignmentTest","t","elemType","expectedValues","wgsl","skipIfLanguageFeatureNotSupported","skipIfDeviceDoesNotHaveFeature","pipeline","device","createComputePipeline","layout","compute","module","createShaderModule","code","entryPoint","maxOutputValues","outputBuffer","createBufferTracked","size","usage","GPUBufferUsage","STORAGE","COPY_SRC","bindGroup","createBindGroup","getBindGroupLayout","entries","binding","resource","buffer","encoder","createCommandEncoder","pass","beginComputePass","setPipeline","setBindGroup","dispatchWorkgroups","end","queue","submit","finish","outputArrayConstructor","Uint32Array","Int32Array","Float32Array","expectGPUBufferValuesEqual","kSwizzleAssignmentCases","vec4u_w_literal","vecSize","initial","swizzle","rhs","expected","vec4u_xy_vec2u","vec4u_zx_vec2u","vec4u_xyzw_vec4u","vec4u_xy_vec2_yx","vec3i_y_literal","vec3i_zx_vec2i","vec3f_xy_vec2f","vec2f_yx_v_plus_v","vec4f_rgb_vec3f_div_10","vec2h_yx_vec2h","vec2_bool_y_true","vec3_bool_xz_vec2bool","test","desc","params","u","combine","beginSubcases","fn","case","skipIf","address_space","vecType","initialValues","map","v","join","outputElemType","var_ref","lhs","memory_view","new_rhs","replaceAll","unimplemented"],"sources":["../../../../../src/webgpu/shader/execution/statement/swizzle_assignment.spec.ts"],"sourcesContent":["export const description = `\nSwizzle assignment execution.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { TypedArrayBufferView } from '../../../../common/util/util.js';\nimport { Float16Array } from '../../../../external/petamoriken/float16/float16.js';\nimport { AllFeaturesMaxLimitsGPUTest, GPUTest } from '../../../gpu_test.js';\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsGPUTest);\n\n/**\n * Builds, runs then checks the output of a shader test with a swizzle assignment.\n *\n * @param t The test object\n * @param elemType The type of the vector elements\n * @param expectedValues The expected final values of the vector after the assignment\n */\nexport function runSwizzleAssignmentTest(\n  t: GPUTest,\n  elemType: SwizzleAssignmentCase['elemType'],\n  expectedValues: readonly number[],\n  wgsl: string\n) {\n  t.skipIfLanguageFeatureNotSupported('swizzle_assignment');\n  if (elemType === 'f16') {\n    t.skipIfDeviceDoesNotHaveFeature('shader-f16');\n  }\n\n  const pipeline = t.device.createComputePipeline({\n    layout: 'auto',\n    compute: {\n      module: t.device.createShaderModule({ code: wgsl }),\n      entryPoint: 'main',\n    },\n  });\n\n  const maxOutputValues = 1000;\n  const outputBuffer = t.createBufferTracked({\n    size: 4 * (1 + maxOutputValues),\n    usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC,\n  });\n\n  const bindGroup = t.device.createBindGroup({\n    layout: pipeline.getBindGroupLayout(0),\n    entries: [{ binding: 1, resource: { buffer: outputBuffer } }],\n  });\n\n  const encoder = t.device.createCommandEncoder();\n  const pass = encoder.beginComputePass();\n  pass.setPipeline(pipeline);\n  pass.setBindGroup(0, bindGroup);\n  pass.dispatchWorkgroups(1);\n  pass.end();\n  t.queue.submit([encoder.finish()]);\n\n  let outputArrayConstructor: { new (values: readonly number[]): TypedArrayBufferView };\n  switch (elemType) {\n    case 'u32':\n      outputArrayConstructor = Uint32Array;\n      break;\n    case 'i32':\n      outputArrayConstructor = Int32Array;\n      break;\n    case 'f32':\n      outputArrayConstructor = Float32Array;\n      break;\n    case 'f16':\n      outputArrayConstructor = Float16Array;\n      break;\n    case 'bool':\n      outputArrayConstructor = Uint32Array;\n      break;\n  }\n  t.expectGPUBufferValuesEqual(outputBuffer, new outputArrayConstructor(expectedValues));\n}\n\ninterface SwizzleAssignmentCase {\n  elemType: 'u32' | 'i32' | 'f32' | 'f16' | 'bool';\n  vecSize: 2 | 3 | 4;\n  initial: readonly number[];\n  swizzle: string;\n  rhs: string;\n  expected: readonly number[];\n}\n\nconst kSwizzleAssignmentCases: Record<string, SwizzleAssignmentCase> = {\n  // v = vec4u(1, 2, 3, 4)\n  // v.w = 5;\n  vec4u_w_literal: {\n    elemType: 'u32',\n    vecSize: 4,\n    initial: [1, 2, 3, 4],\n    swizzle: 'w',\n    rhs: '5',\n    expected: [1, 2, 3, 5],\n  },\n  // v = vec4u(1, 2, 3, 5)\n  // v.xy = vec2u(6, 7);\n  vec4u_xy_vec2u: {\n    elemType: 'u32',\n    vecSize: 4,\n    initial: [1, 2, 3, 5],\n    swizzle: 'xy',\n    rhs: 'vec2u(6, 7)',\n    expected: [6, 7, 3, 5],\n  },\n  // v = vec4u(6, 7, 3, 5)\n  // v.zx = vec2u(8, 9);\n  vec4u_zx_vec2u: {\n    elemType: 'u32',\n    vecSize: 4,\n    initial: [6, 7, 3, 5],\n    swizzle: 'zx',\n    rhs: 'vec2u(8, 9)',\n    expected: [9, 7, 8, 5],\n  },\n  // v = vec4u(1, 1, 1, 1)\n  // v.xyzw = vec4u(10, 11, 12, 13);\n  vec4u_xyzw_vec4u: {\n    elemType: 'u32',\n    vecSize: 4,\n    initial: [1, 1, 1, 1],\n    swizzle: 'xyzw',\n    rhs: 'vec4u(10, 11, 12, 13)',\n    expected: [10, 11, 12, 13],\n  },\n  // v = vec4u(10, 11, 12, 13)\n  // v.xy = vec2(v.y, v.x);\n  vec4u_xy_vec2_yx: {\n    elemType: 'u32',\n    vecSize: 4,\n    initial: [10, 11, 12, 13],\n    swizzle: 'xy',\n    rhs: 'vec2(v.y, v.x)',\n    expected: [11, 10, 12, 13],\n  },\n  // v = vec3i(-10, -20, -30)\n  // v.y = 50;\n  vec3i_y_literal: {\n    elemType: 'i32',\n    vecSize: 3,\n    initial: [-10, -20, -30],\n    swizzle: 'y',\n    rhs: '-50',\n    expected: [-10, -50, -30],\n  },\n  // v = vec3i(10, 20, 30)\n  // v.zx = vec2i(40, 60);\n  vec3i_zx_vec2i: {\n    elemType: 'i32',\n    vecSize: 3,\n    initial: [10, 20, 30],\n    swizzle: 'zx',\n    rhs: 'vec2i(40, 60)',\n    expected: [60, 20, 40],\n  },\n  // v = vec3f(1.0, 2.0, 3.0)\n  // v.xy = vec2f(4.0, 5.0);\n  vec3f_xy_vec2f: {\n    elemType: 'f32',\n    vecSize: 3,\n    initial: [1.0, 2.0, 3.0],\n    swizzle: 'xy',\n    rhs: 'vec2f(4.0, 5.0)',\n    expected: [4.0, 5.0, 3.0],\n  },\n  // v = vec2f(1.0, 2.0)\n  // v.xy = v + v;\n  vec2f_yx_v_plus_v: {\n    elemType: 'f32',\n    vecSize: 2,\n    initial: [1.0, 2.0],\n    swizzle: 'yx',\n    rhs: 'v + v',\n    expected: [4.0, 2.0],\n  },\n  // v = vec4f(10.0, 20.0, 30.0, 100.0)\n  // v.rgb = vec3f(v.r, v.g, v.b) / 10;\n  vec4f_rgb_vec3f_div_10: {\n    elemType: 'f32',\n    vecSize: 4,\n    initial: [10.0, 20.0, 30.0, 100.0],\n    swizzle: 'rgb',\n    rhs: 'vec3f(v.r, v.g, v.b) / 10.0',\n    expected: [1.0, 2.0, 3.0, 100.0],\n  },\n  // v = vec2h(1.0, 2.0)\n  // v.yx = vec2h(4.0, 5.0);\n  vec2h_yx_vec2h: {\n    elemType: 'f16',\n    vecSize: 2,\n    initial: [1.0, 2.0],\n    swizzle: 'yx',\n    rhs: 'vec2h(4.0, 5.0)',\n    expected: [5.0, 4.0],\n  },\n  // v = vec2<bool>(true, false)\n  // v.y = true;\n  vec2_bool_y_true: {\n    elemType: 'bool',\n    vecSize: 2,\n    initial: [1, 0],\n    swizzle: 'y',\n    rhs: 'true',\n    expected: [1, 1],\n  },\n  // v = vec3<bool>(true, true, true)\n  // v.xz = vec2<bool>(false, false);\n  vec3_bool_xz_vec2bool: {\n    elemType: 'bool',\n    vecSize: 3,\n    initial: [1, 1, 1],\n    swizzle: 'xz',\n    rhs: 'vec2<bool>(false, false)',\n    expected: [0, 1, 0],\n  },\n};\n\ng.test('swizzle_assignment_vars')\n  .desc(\n    'Tests the value of a vector after swizzle assignment on different variable types, address spaces, and on pointer and reference memory views.'\n  )\n  .params(u =>\n    u\n      .combine('case', keysOf(kSwizzleAssignmentCases))\n      .beginSubcases()\n      .combine('address_space', ['function', 'private', 'workgroup', 'storage'])\n      .combine('memory_view', ['ref', 'ptr'])\n  )\n  .fn(t => {\n    const { elemType, vecSize, initial, swizzle, rhs, expected } =\n      kSwizzleAssignmentCases[t.params.case];\n\n    t.skipIf(t.params.address_space === 'storage' && elemType === 'bool');\n\n    const vecType = `vec${vecSize}<${elemType}>`;\n    const initialValues =\n      elemType === 'bool'\n        ? initial.map(v => (v === 0 ? 'false' : 'true')).join(', ')\n        : initial.join(', ');\n    const outputElemType = elemType === 'bool' ? 'u32' : elemType;\n\n    const var_ref = t.params.address_space === 'storage' ? 'outputs.v' : 'v';\n    const lhs =\n      t.params.memory_view === 'ptr'\n        ? `let ptr = &${var_ref}; ptr.${swizzle}`\n        : `${var_ref}.${swizzle}`;\n    const new_rhs = rhs.replaceAll(/\\bv\\b/g, `${var_ref}`);\n\n    const wgsl = `\nrequires swizzle_assignment;\n${elemType === 'f16' ? 'enable f16;' : ''}\n\nstruct Outputs {\n  ${t.params.address_space === 'storage' ? `v : ${vecType},` : ''}\n  data : array<${outputElemType}>,\n};\n\n@group(0) @binding(1) var<storage, read_write> outputs : Outputs;\n\n${\n  t.params.address_space === 'private' || t.params.address_space === 'workgroup'\n    ? `var<${t.params.address_space}> v : ${vecType};`\n    : ''\n}\n\n@compute @workgroup_size(1)\nfn main() {\n\n  ${t.params.address_space === 'function' ? `var v : ${vecType};` : ''}\n  ${var_ref} = ${vecType}(${initialValues});\n  ${lhs} = ${new_rhs};\n\n  // Store result to Output\n  for (var i = 0; i < ${vecSize}; i++) {\n    ${\n      elemType === 'bool'\n        ? `outputs.data[i] = u32(${var_ref}[i]);`\n        : `outputs.data[i] = ${var_ref}[i];`\n    }\n  }\n}`;\n    runSwizzleAssignmentTest(t, elemType, expected, wgsl);\n  });\n\ng.test('swizzle_assignment_chained')\n  .desc('Tests the value of a vector after swizzle assignment on a chained swizzle.')\n  .unimplemented();\n\ng.test('swizzle_compound_assignment')\n  .desc('Tests the value of a vector after compound swizzle assignment.')\n  .unimplemented();\n"],"mappings":"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"}