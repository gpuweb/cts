{"version":3,"file":"if.spec.js","names":["description","makeTestGroup","GPUTest","runFlowControlTest","g","test","desc","params","u","combine","fn","t","f","expect_order","value","expect_not_reached"],"sources":["../../../../../src/webgpu/shader/execution/flow_control/if.spec.ts"],"sourcesContent":["export const description = `\nFlow control tests for if-statements.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../gpu_test.js';\n\nimport { runFlowControlTest } from './harness.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('if_true')\n  .desc(\n    \"Test that flow control executes the 'true' block of an if statement and not the 'false' block\"\n  )\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(\n      t,\n      f => `\n  ${f.expect_order(0)}\n  if (${f.value(true)}) {\n    ${f.expect_order(1)}\n  } else {\n    ${f.expect_not_reached()}\n  }\n  ${f.expect_order(2)}\n`\n    );\n  });\n\ng.test('if_false')\n  .desc(\n    \"Test that flow control executes the 'false' block of an if statement and not the 'true' block\"\n  )\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(\n      t,\n      f => `\n  ${f.expect_order(0)}\n  if (${f.value(false)}) {\n    ${f.expect_not_reached()}\n  } else {\n    ${f.expect_order(1)}\n  }\n  ${f.expect_order(2)}\n`\n    );\n  });\n\ng.test('else_if')\n  .desc(\"Test that flow control executes the correct 'else if' block of an if statement\")\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(\n      t,\n      f => `\n  ${f.expect_order(0)}\n  if (${f.value(false)}) {\n    ${f.expect_not_reached()}\n  } else if (${f.value(false)}) {\n    ${f.expect_not_reached()}\n  } else if (${f.value(true)}) {\n    ${f.expect_order(1)}\n  } else if (${f.value(false)}) {\n    ${f.expect_not_reached()}\n  }\n  ${f.expect_order(2)}\n`\n    );\n  });\n\ng.test('nested_if_else')\n  .desc('Test flow control for nested if-else statements')\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(\n      t,\n      f => `\n${f.expect_order(0)}\nif (${f.value(true)}) {\n  ${f.expect_order(1)}\n  if (${f.value(false)}) {\n    ${f.expect_not_reached()}\n  } else {\n    ${f.expect_order(2)}\n    if (${f.value(true)}) {\n      ${f.expect_order(3)}\n    } else {\n      ${f.expect_not_reached()}\n    }\n    ${f.expect_order(4)}\n  }\n  ${f.expect_order(5)}\n} else {\n  ${f.expect_not_reached()}\n}\n${f.expect_order(6)}\n`\n    );\n  });\n"],"mappings":"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"}