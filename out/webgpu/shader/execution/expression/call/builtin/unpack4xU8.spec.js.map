{"version":3,"file":"unpack4xU8.spec.js","names":["description","makeTestGroup","AllFeaturesMaxLimitsGPUTest","u32","toVector","Type","allInputSources","run","builtin","g","test","specURL","desc","params","u","combine","fn","t","cfg","unpack4xU8","e","result","i","testInputs","makeCase","input","expected","cases","flatMap","v","vec4u"],"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/unpack4xU8.spec.ts"],"sourcesContent":["export const description = `\nExecution tests for the 'unpack4xU8' builtin function\n\n@const fn unpack4xU8(e: u32) -> vec4<u32>\ne is interpreted as a vector with four 8-bit unsigned integer components. Unpack e into a vec4<u32>\nwith zero extension.\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { AllFeaturesMaxLimitsGPUTest } from '../../../../../gpu_test.js';\nimport { u32, toVector, Type } from '../../../../../util/conversion.js';\nimport { Case } from '../../case.js';\nimport { allInputSources, Config, run } from '../../expression.js';\n\nimport { builtin } from './builtin.js';\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsGPUTest);\n\ng.test('basic')\n  .specURL('https://www.w3.org/TR/WGSL/#unpack4xU8-builtin')\n  .desc(\n    `\n@const fn unpack4xU8(e: u32) -> vec4<u32>\n  `\n  )\n  .params(u => u.combine('inputSource', allInputSources))\n  .fn(async t => {\n    const cfg: Config = t.params;\n\n    const unpack4xU8 = (e: number) => {\n      const result: [number, number, number, number] = [0, 0, 0, 0];\n      for (let i = 0; i < 4; ++i) {\n        result[i] = (e >> (8 * i)) & 0xff;\n      }\n      return result;\n    };\n\n    const testInputs = [0, 0x08060402, 0xffffffff, 0xfefdfcfb] as const;\n\n    const makeCase = (e: number): Case => {\n      return { input: [u32(e)], expected: toVector(unpack4xU8(e), u32) };\n    };\n    const cases: Array<Case> = testInputs.flatMap(v => {\n      return [makeCase(v)];\n    });\n\n    await run(t, builtin('unpack4xU8'), [Type.u32], Type.vec4u, cfg, cases);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,kDAAkD;AAChF,SAASC,2BAA2B,QAAQ,4BAA4B;AACxE,SAASC,GAAG,EAAEC,QAAQ,EAAEC,IAAI,QAAQ,mCAAmC;;AAEvE,SAASC,eAAe,EAAUC,GAAG,QAAQ,qBAAqB;;AAElE,SAASC,OAAO,QAAQ,cAAc;;AAEtC,OAAO,MAAMC,CAAC,GAAGR,aAAa,CAACC,2BAA2B,CAAC;;AAE3DO,CAAC,CAACC,IAAI,CAAC,OAAO,CAAC;AACZC,OAAO,CAAC,gDAAgD,CAAC;AACzDC,IAAI;EACF;AACL;AACA;AACE,CAAC;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,aAAa,EAAET,eAAe,CAAC,CAAC;AACtDU,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,MAAMC,GAAW,GAAGD,CAAC,CAACJ,MAAM;;EAE5B,MAAMM,UAAU,GAAGA,CAACC,CAAS,KAAK;IAChC,MAAMC,MAAwC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC7D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;MAC1BD,MAAM,CAACC,CAAC,CAAC,GAAIF,CAAC,IAAK,CAAC,GAAGE,CAAE,GAAI,IAAI;IACnC;IACA,OAAOD,MAAM;EACf,CAAC;;EAED,MAAME,UAAU,GAAG,CAAC,CAAC,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAU;;EAEnE,MAAMC,QAAQ,GAAGA,CAACJ,CAAS,KAAW;IACpC,OAAO,EAAEK,KAAK,EAAE,CAACtB,GAAG,CAACiB,CAAC,CAAC,CAAC,EAAEM,QAAQ,EAAEtB,QAAQ,CAACe,UAAU,CAACC,CAAC,CAAC,EAAEjB,GAAG,CAAC,CAAC,CAAC;EACpE,CAAC;EACD,MAAMwB,KAAkB,GAAGJ,UAAU,CAACK,OAAO,CAAC,CAAAC,CAAC,KAAI;IACjD,OAAO,CAACL,QAAQ,CAACK,CAAC,CAAC,CAAC;EACtB,CAAC,CAAC;;EAEF,MAAMtB,GAAG,CAACU,CAAC,EAAET,OAAO,CAAC,YAAY,CAAC,EAAE,CAACH,IAAI,CAACF,GAAG,CAAC,EAAEE,IAAI,CAACyB,KAAK,EAAEZ,GAAG,EAAES,KAAK,CAAC;AACzE,CAAC,CAAC"}