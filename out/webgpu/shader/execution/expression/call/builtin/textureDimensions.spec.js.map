{"version":3,"file":"textureDimensions.spec.js","names":["description","makeTestGroup","kAllTextureFormats","kColorTextureFormats","kTextureFormatInfo","sampleTypeForFormatAndAspect","textureDimensionAndFormatCompatible","MaxLimitsTestMixin","align","kShaderStages","WGSLTextureQueryTest","g","kMaxMipsForTest","kMaxSamplesForTest","kAllViewDimensions","aspectsForFormat","format","formatInfo","depth","undefined","stencil","samplesForFormat","info","multisample","textureMipCount","params","samples","textureDimensionsForViewDimensions","dimensions","baseMipLevel","out","i","push","textureDimensionsLevel","viewDimensions","filter","dim","testValues","kMinLen","kNumCubeFaces","bw","blockWidth","bh","blockHeight","mip","kMultipleA","kMultipleB","kMultipleC","w","size","expected","h","d","l","run","t","stage","texture","viewDescriptor","textureType","levelArg","values","outputType","length","wgsl","executeAndExpectResult","dimensionsValidForStorage","test","specURL","desc","u","combine","unless","p","color","type","expand","beginSubcases","beforeAllSubcases","skipIfTextureFormatNotSupported","selectDeviceOrSkipTestCase","feature","fn","skipIfTextureViewDimensionNotSupported","createTextureTracked","dimension","isCompatibility","textureBindingViewDimension","usage","GPUTextureUsage","TEXTURE_BINDING","RENDER_ATTACHMENT","sampleCount","mipLevelCount","aspect","wgslSampledTextureType","base","replace","sampleType","Error","wgslDepthTextureType","storage","access","readWriteStorage","skipIfTextureFormatNotUsableAsStorageTexture","skipIfNoStorageTexturesInStage","STORAGE_BINDING","wgslStorageTextureType","width","height","canvas","OffscreenCanvas","getContext","videoFrame","VideoFrame","timestamp","device","importExternalTexture","source"],"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/textureDimensions.spec.ts"],"sourcesContent":["export const description = `\nExecution tests for the 'textureDimensions' builtin function\n\nThe dimensions of the texture in texels.\nFor textures based on cubes, the results are the dimensions of each face of the cube.\nCube faces are square, so the x and y components of the result are equal.\nIf level is outside the range [0, textureNumLevels(t)) then any valid value for the return type may be returned.\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport {\n  kAllTextureFormats,\n  kColorTextureFormats,\n  kTextureFormatInfo,\n  sampleTypeForFormatAndAspect,\n  textureDimensionAndFormatCompatible,\n} from '../../../../../format_info.js';\nimport { MaxLimitsTestMixin } from '../../../../../gpu_test.js';\nimport { align } from '../../../../../util/math.js';\nimport { kShaderStages, ShaderStage } from '../../../../validation/decl/util.js';\n\nimport { WGSLTextureQueryTest } from './texture_utils.js';\n\nexport const g = makeTestGroup(MaxLimitsTestMixin(WGSLTextureQueryTest));\n\n/// The maximum number of texture mipmap levels to test.\n/// Keep this small to reduce memory and test permutations.\nconst kMaxMipsForTest = 3;\n\n/// The maximum number of texture samples to test.\nconst kMaxSamplesForTest = 4;\n\n/// All the possible GPUTextureViewDimensions.\nconst kAllViewDimensions: readonly GPUTextureViewDimension[] = [\n  '1d',\n  '2d',\n  '2d-array',\n  '3d',\n  'cube',\n  'cube-array',\n] as const;\n\n/** @returns the aspects to test for the given format */\nfunction aspectsForFormat(format: GPUTextureFormat): readonly GPUTextureAspect[] {\n  const formatInfo = kTextureFormatInfo[format];\n  if (formatInfo.depth !== undefined && formatInfo.stencil !== undefined) {\n    return ['depth-only', 'stencil-only'];\n  }\n  return ['all'];\n}\n\n/** @returns the sample counts to test for the given format */\nfunction samplesForFormat(format: GPUTextureFormat): readonly number[] {\n  const info = kTextureFormatInfo[format];\n  return info.multisample ? [1, kMaxSamplesForTest] : [1];\n}\n\n/**\n * @returns a list of number of texture mipmap levels to test, given the format, view dimensions and\n * number of samples.\n */\nfunction textureMipCount(params: {\n  format: GPUTextureFormat;\n  dimensions: GPUTextureViewDimension;\n  samples?: number;\n}): readonly number[] {\n  if (params.samples !== undefined && params.samples !== 1) {\n    // https://www.w3.org/TR/webgpu/#texture-creation\n    // If descriptor.sampleCount > 1: descriptor.mipLevelCount must be 1.\n    return [1];\n  }\n  if (textureDimensionsForViewDimensions(params.dimensions) === '1d') {\n    // https://www.w3.org/TR/webgpu/#dom-gputexturedimension-2d\n    // Only \"2d\" textures may have mipmaps, be multisampled, use a compressed or depth/stencil\n    // format, and be used as a render attachment.\n    return [1];\n  }\n  return [1, kMaxMipsForTest];\n}\n\n/**\n * @returns a list of GPUTextureViewDescriptor.baseMipLevel to test, give the texture mipmap count.\n */\nfunction baseMipLevel(params: { textureMipCount: number }): readonly number[] {\n  const out: number[] = [];\n  for (let i = 0; i < params.textureMipCount; i++) {\n    out.push(i);\n  }\n  return out;\n}\n\n/**\n * @returns the argument values for the textureDimensions() `level` parameter to test.\n * An `undefined` represents a call to textureDimensions() without the level argument.\n */\nfunction textureDimensionsLevel(params: {\n  samples?: number;\n  textureMipCount: number;\n  baseMipLevel: number;\n}): readonly (number | undefined)[] {\n  if (params.samples !== undefined && params.samples > 1) {\n    return [undefined]; // textureDimensions() overload with `level` not available.\n  }\n  const out: (number | undefined)[] = [undefined];\n  for (let i = 0; i < params.textureMipCount - params.baseMipLevel; i++) {\n    out.push(i);\n  }\n  return out;\n}\n\n/** @returns the GPUTextureViewDimensions to test for the format and number of samples */\nfunction viewDimensions(params: {\n  format: GPUTextureFormat;\n  samples?: number;\n}): readonly GPUTextureViewDimension[] {\n  if (params.samples !== undefined && params.samples > 1) {\n    // https://www.w3.org/TR/webgpu/#dom-gputexturedimension-2d\n    // Only 2d textures can be multisampled\n    return ['2d'];\n  }\n\n  return kAllViewDimensions.filter(dim =>\n    textureDimensionAndFormatCompatible(textureDimensionsForViewDimensions(dim), params.format)\n  );\n}\n\n/** @returns the GPUTextureDimension for the GPUTextureViewDimension */\nfunction textureDimensionsForViewDimensions(dim: GPUTextureViewDimension): GPUTextureDimension {\n  switch (dim) {\n    case '1d':\n      return '1d';\n    case '2d':\n    case '2d-array':\n    case 'cube':\n    case 'cube-array':\n      return '2d';\n    case '3d':\n      return '3d';\n  }\n}\n\n/** TestValues holds the texture size and expected return value of textureDimensions() */\ntype TestValues = {\n  /** The value to pass to GPUTextureDescriptor.size, when creating the texture */\n  size: number[];\n  /** The expected result of calling textureDimensions() */\n  expected: number[];\n};\n\n/** @returns The TestValues to use for the given texture dimensions and format */\nfunction testValues(params: {\n  dimensions: GPUTextureViewDimension;\n  format: GPUTextureFormat;\n  baseMipLevel: number;\n  textureDimensionsLevel?: number;\n}): TestValues {\n  // The minimum dimension length, given the number of mipmap levels that are being tested.\n  const kMinLen = 1 << kMaxMipsForTest;\n  const kNumCubeFaces = 6;\n\n  const formatInfo = kTextureFormatInfo[params.format];\n  const bw = formatInfo.blockWidth;\n  const bh = formatInfo.blockHeight;\n  let mip = params.baseMipLevel;\n  if (params.textureDimensionsLevel !== undefined) {\n    mip += params.textureDimensionsLevel;\n  }\n\n  // Magic constants to multiply the minimum texture dimensions with, to provide\n  // different dimension values in the test. These could be parameterized, but\n  // these are currently fixed to reduce the number of test parameterizations.\n  const kMultipleA = 2;\n  const kMultipleB = 3;\n  const kMultipleC = 4;\n\n  switch (params.dimensions) {\n    case '1d': {\n      const w = align(kMinLen, bw) * kMultipleA;\n      return { size: [w], expected: [w >>> mip] };\n    }\n    case '2d': {\n      const w = align(kMinLen, bw) * kMultipleA;\n      const h = align(kMinLen, bh) * kMultipleB;\n      return { size: [w, h], expected: [w >>> mip, h >>> mip] };\n    }\n    case '2d-array': {\n      const w = align(kMinLen, bw) * kMultipleC;\n      const h = align(kMinLen, bh) * kMultipleB;\n      return { size: [w, h, 4], expected: [w >>> mip, h >>> mip] };\n    }\n    case '3d': {\n      const w = align(kMinLen, bw) * kMultipleA;\n      const h = align(kMinLen, bh) * kMultipleB;\n      const d = kMinLen * kMultipleC;\n      return {\n        size: [w, h, d],\n        expected: [w >>> mip, h >>> mip, d >>> mip],\n      };\n    }\n    case 'cube': {\n      const l = align(kMinLen, bw) * align(kMinLen, bh) * kMultipleB;\n      return {\n        size: [l, l, kNumCubeFaces],\n        expected: [l >>> mip, l >>> mip],\n      };\n    }\n    case 'cube-array': {\n      const l = align(kMinLen, bw) * align(kMinLen, bh) * kMultipleC;\n      return {\n        size: [l, l, kNumCubeFaces * 3],\n        expected: [l >>> mip, l >>> mip],\n      };\n    }\n  }\n}\n\n/**\n * Builds a shader module with the texture view bound to the WGSL texture with the given WGSL type,\n * which calls textureDimensions(), assigning the result to an output buffer.\n * This shader is executed with a compute shader, and the output buffer is compared to\n * `values.expected`.\n */\nfunction run(\n  t: WGSLTextureQueryTest,\n  stage: ShaderStage,\n  texture: GPUTexture | GPUExternalTexture,\n  viewDescriptor: GPUTextureViewDescriptor | undefined,\n  textureType: string,\n  levelArg: number | undefined,\n  values: TestValues\n) {\n  const outputType = values.expected.length > 1 ? `vec${values.expected.length}u` : 'u32';\n  const wgsl = `\n@group(0) @binding(0) var texture : ${textureType};\n\nfn getValue() -> ${outputType} {\n  return ${\n    levelArg !== undefined\n      ? `textureDimensions(texture, ${levelArg})`\n      : 'textureDimensions(texture)'\n  };\n}\n`;\n  t.executeAndExpectResult(stage, wgsl, texture, viewDescriptor, values.expected);\n}\n\n/** @returns true if the GPUTextureViewDimension is valid for a storage texture */\nfunction dimensionsValidForStorage(dimensions: GPUTextureViewDimension) {\n  switch (dimensions) {\n    case '1d':\n    case '2d':\n    case '2d-array':\n    case '3d':\n      return true;\n    default:\n      return false;\n  }\n}\n\ng.test('sampled_and_multisampled')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nT: f32, i32, u32\n\nfn textureDimensions(t: texture_1d<T>) -> u32\nfn textureDimensions(t: texture_1d<T>, level: u32) -> u32\nfn textureDimensions(t: texture_2d<T>) -> vec2<u32>\nfn textureDimensions(t: texture_2d<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_2d_array<T>) -> vec2<u32>\nfn textureDimensions(t: texture_2d_array<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_3d<T>) -> vec3<u32>\nfn textureDimensions(t: texture_3d<T>, level: u32) -> vec3<u32>\nfn textureDimensions(t: texture_cube<T>) -> vec2<u32>\nfn textureDimensions(t: texture_cube<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_cube_array<T>) -> vec2<u32>\nfn textureDimensions(t: texture_cube_array<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_multisampled_2d<T>)-> vec2<u32>\n\nParameters:\n * t: the sampled texture\n * level:\n   - The mip level, with level 0 containing a full size version of the texture.\n   - If omitted, the dimensions of level 0 are returned.\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kAllTextureFormats)\n      .unless(p => kTextureFormatInfo[p.format].color?.type === 'unfilterable-float')\n      .expand('aspect', u => aspectsForFormat(u.format))\n      .expand('samples', u => samplesForFormat(u.format))\n      .beginSubcases()\n      .combine('stage', kShaderStages)\n      .expand('dimensions', viewDimensions)\n      .expand('textureMipCount', textureMipCount)\n      .expand('baseMipLevel', baseMipLevel)\n      .expand('textureDimensionsLevel', textureDimensionsLevel)\n  )\n  .beforeAllSubcases(t => {\n    const info = kTextureFormatInfo[t.params.format];\n    t.skipIfTextureFormatNotSupported(t.params.format);\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    t.skipIfTextureViewDimensionNotSupported(t.params.dimensions);\n    const values = testValues(t.params);\n    const texture = t.createTextureTracked({\n      size: values.size,\n      dimension: textureDimensionsForViewDimensions(t.params.dimensions),\n      ...(t.isCompatibility && { textureBindingViewDimension: t.params.dimensions }),\n      usage:\n        t.params.samples === 1\n          ? GPUTextureUsage.TEXTURE_BINDING\n          : GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT,\n      format: t.params.format,\n      sampleCount: t.params.samples,\n      mipLevelCount: t.params.textureMipCount,\n    });\n    const viewDescriptor: GPUTextureViewDescriptor = {\n      dimension: t.params.dimensions,\n      aspect: t.params.aspect,\n      baseMipLevel: t.params.baseMipLevel,\n    };\n\n    function wgslSampledTextureType(): string {\n      const base = t.params.samples !== 1 ? 'texture_multisampled' : 'texture';\n      const dimensions = t.params.dimensions.replace('-', '_');\n      const sampleType = sampleTypeForFormatAndAspect(t.params.format, t.params.aspect);\n      switch (sampleType) {\n        case 'depth':\n        case 'float':\n          return `${base}_${dimensions}<f32>`;\n        case 'uint':\n          return `${base}_${dimensions}<u32>`;\n        case 'sint':\n          return `${base}_${dimensions}<i32>`;\n        case 'unfilterable-float':\n          throw new Error(`'${t.params.format}' does not support sampling`);\n      }\n    }\n\n    run(\n      t,\n      t.params.stage,\n      texture,\n      viewDescriptor,\n      wgslSampledTextureType(),\n      t.params.textureDimensionsLevel,\n      values\n    );\n  });\n\ng.test('depth')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nfn textureDimensions(t: texture_depth_2d) -> vec2<u32>\nfn textureDimensions(t: texture_depth_2d, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_2d_array) -> vec2<u32>\nfn textureDimensions(t: texture_depth_2d_array, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube_array) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube_array, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_multisampled_2d)-> vec2<u32>\n\nParameters:\n * t: the depth or multisampled texture\n * level:\n   - The mip level, with level 0 containing a full size version of the texture.\n   - If omitted, the dimensions of level 0 are returned.\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kAllTextureFormats)\n      .filter(p => !!kTextureFormatInfo[p.format].depth)\n      .expand('aspect', u => aspectsForFormat(u.format))\n      .unless(u => u.aspect === 'stencil-only')\n      .expand('samples', u => samplesForFormat(u.format))\n      .beginSubcases()\n      .combine('stage', kShaderStages)\n      .expand('dimensions', viewDimensions)\n      .expand('textureMipCount', textureMipCount)\n      .expand('baseMipLevel', baseMipLevel)\n      .expand('textureDimensionsLevel', textureDimensionsLevel)\n  )\n  .beforeAllSubcases(t => {\n    const info = kTextureFormatInfo[t.params.format];\n    t.skipIfTextureFormatNotSupported(t.params.format);\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    t.skipIfTextureViewDimensionNotSupported(t.params.dimensions);\n    const values = testValues(t.params);\n    const texture = t.createTextureTracked({\n      size: values.size,\n      dimension: textureDimensionsForViewDimensions(t.params.dimensions),\n      ...(t.isCompatibility && { textureBindingViewDimension: t.params.dimensions }),\n      usage:\n        t.params.samples === 1\n          ? GPUTextureUsage.TEXTURE_BINDING\n          : GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT,\n      format: t.params.format,\n      sampleCount: t.params.samples,\n      mipLevelCount: t.params.textureMipCount,\n    });\n    const viewDescriptor: GPUTextureViewDescriptor = {\n      dimension: t.params.dimensions,\n      aspect: t.params.aspect,\n      baseMipLevel: t.params.baseMipLevel,\n    };\n\n    function wgslDepthTextureType(): string {\n      const base = t.params.samples !== 1 ? 'texture_depth_multisampled' : 'texture_depth';\n      const dimensions = t.params.dimensions.replace('-', '_');\n      return `${base}_${dimensions}`;\n    }\n\n    run(\n      t,\n      t.params.stage,\n      texture,\n      viewDescriptor,\n      wgslDepthTextureType(),\n      t.params.textureDimensionsLevel,\n      values\n    );\n  });\n\ng.test('storage')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nF: rgba8unorm\n   rgba8snorm\n   rgba8uint\n   rgba8sint\n   rgba16uint\n   rgba16sint\n   rgba16float\n   r32uint\n   r32sint\n   r32float\n   rg32uint\n   rg32sint\n   rg32float\n   rgba32uint\n   rgba32sint\n   rgba32float\nA: read, write, read_write\n\nfn textureDimensions(t: texture_storage_1d<F,A>) -> u32\nfn textureDimensions(t: texture_storage_2d<F,A>) -> vec2<u32>\nfn textureDimensions(t: texture_storage_2d_array<F,A>) -> vec2<u32>\nfn textureDimensions(t: texture_storage_3d<F,A>) -> vec3<u32>\n\nParameters:\n * t: the storage texture\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kColorTextureFormats)\n      .filter(p => kTextureFormatInfo[p.format].color?.storage === true)\n      .expand('aspect', u => aspectsForFormat(u.format))\n      .beginSubcases()\n      .combine('stage', kShaderStages)\n      .combine('access', ['read', 'write', 'read_write'] as const)\n      // vertex stage can not use writable storage.\n      .unless(t => t.stage === 'vertex' && t.access !== 'read')\n      // Only some formats support write\n      .unless(\n        t =>\n          kTextureFormatInfo[t.format].color.readWriteStorage === false && t.access === 'read_write'\n      )\n      .expand('dimensions', u => viewDimensions(u).filter(dimensionsValidForStorage))\n      .expand('textureMipCount', textureMipCount)\n      .expand('baseMipLevel', baseMipLevel)\n  )\n  .beforeAllSubcases(t => {\n    const info = kTextureFormatInfo[t.params.format];\n    t.skipIfTextureFormatNotSupported(t.params.format);\n    t.skipIfTextureFormatNotUsableAsStorageTexture(t.params.format);\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    t.skipIfNoStorageTexturesInStage(t.params.stage);\n\n    const values = testValues(t.params);\n    const texture = t.createTextureTracked({\n      size: values.size,\n      dimension: textureDimensionsForViewDimensions(t.params.dimensions),\n      usage: GPUTextureUsage.STORAGE_BINDING,\n      format: t.params.format,\n      mipLevelCount: t.params.textureMipCount,\n    });\n    const viewDescriptor: GPUTextureViewDescriptor = {\n      dimension: t.params.dimensions,\n      aspect: t.params.aspect,\n      mipLevelCount: 1,\n      baseMipLevel: t.params.baseMipLevel,\n    };\n\n    function wgslStorageTextureType(): string {\n      const dimensions = t.params.dimensions.replace('-', '_');\n      return `texture_storage_${dimensions}<${t.params.format}, ${t.params.access}>`;\n    }\n\n    run(t, t.params.stage, texture, viewDescriptor, wgslStorageTextureType(), undefined, values);\n  });\n\ng.test('external')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nfn textureDimensions(t: texture_external) -> vec2<u32>\n\nParameters:\n * t: the external texture\n`\n  )\n  .params(u =>\n    u\n      .beginSubcases()\n      .combine('stage', kShaderStages)\n      .combine('width', [8, 16, 24] as const)\n      .combine('height', [8, 16, 24] as const)\n  )\n  .fn(t => {\n    const { stage, width, height } = t.params;\n    const canvas = new OffscreenCanvas(width, height);\n    // We have to make a context for VideoFrame to accept the canvas.\n    canvas.getContext('2d');\n    const videoFrame = new VideoFrame(canvas, { timestamp: 0 });\n    const texture = t.device.importExternalTexture({ source: videoFrame });\n\n    run(t, stage, texture, undefined, 'texture_external', undefined, {\n      size: [width, height],\n      expected: [width, height],\n    });\n  });\n"],"mappings":"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"}