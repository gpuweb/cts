{"version":3,"file":"var.spec.js","names":["description","makeTestGroup","keysOf","kAccessModeInfo","kAddressSpaceInfo","ShaderValidationTest","explicitSpaceExpander","getVarDeclShader","accessModeExpander","supportsRead","supportsWrite","g","kTypes","bool","isHostShareable","isConstructible","isFixedFootprint","requiresF16","i32","u32","f32","f16","vec3i","vec4u","vec2f","vec3h","mat2x2f","mat3x4h","S_u32","S_bool","S_S_bool","S_array_vec4u","S_array_vec4u_4","S_array_bool_4","sampler","test","desc","params","u","combine","beforeAllSubcases","t","type","selectDeviceOrSkipTestCase","fn","isAtomic","indexOf","decl","shouldPass","kind","wgsl","via_alias","expectCompileResult","initializer","kInitializers","my_const_42u","my_override_42u","another_private_var","addrspace","kResourceDecls","uniform","storage","texture","group","binding","a_group","a_binding","b_group","b_binding","b_use","collision","shouldFail","fdecl","mdecl","access_mode","suffix","trailing_comma","address_space","code","kNonHandleAddressSpaces","filter","as","specURL","addressSpace","spell","explicitSpace","prog","info","ok","spellAccessMode","accessModes","includes","accessMode","expand","kTestTypes","beginSubcases","lhsType","rhsType","expectation","prefix","skipIf","hasLanguageFeature","expect","stage","func"],"sources":["../../../../../src/webgpu/shader/validation/decl/var.spec.ts"],"sourcesContent":["export const description = `\nValidation tests for host-shareable types.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { AddressSpace, kAccessModeInfo, kAddressSpaceInfo } from '../../types.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nimport {\n  explicitSpaceExpander,\n  getVarDeclShader,\n  accessModeExpander,\n  supportsRead,\n  supportsWrite,\n  ShaderStage,\n} from './util.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\n// The set of types and their properties.\nconst kTypes = {\n  // Scalars.\n  bool: {\n    isHostShareable: false,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  i32: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  u32: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  f32: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  f16: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: true,\n  },\n\n  // Vectors.\n  'vec2<bool>': {\n    isHostShareable: false,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  vec3i: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  vec4u: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  vec2f: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  vec3h: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: true,\n  },\n\n  // Matrices.\n  mat2x2f: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  mat3x4h: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: true,\n  },\n\n  // Atomics.\n  'atomic<i32>': {\n    isHostShareable: true,\n    isConstructible: false,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  'atomic<u32>': {\n    isHostShareable: true,\n    isConstructible: false,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n\n  // Arrays.\n  'array<vec4<bool>>': {\n    isHostShareable: false,\n    isConstructible: false,\n    isFixedFootprint: false,\n    requiresF16: false,\n  },\n  'array<vec4<bool>, 4>': {\n    isHostShareable: false,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  'array<vec4u>': {\n    isHostShareable: true,\n    isConstructible: false,\n    isFixedFootprint: false,\n    requiresF16: false,\n  },\n  'array<vec4u, 4>': {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  'array<vec4u, array_size_const>': {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  'array<vec4u, array_size_override>': {\n    isHostShareable: false,\n    isConstructible: false,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n\n  // Structures.\n  S_u32: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  S_bool: {\n    isHostShareable: false,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  S_S_bool: {\n    isHostShareable: false,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  S_array_vec4u: {\n    isHostShareable: true,\n    isConstructible: false,\n    isFixedFootprint: false,\n    requiresF16: false,\n  },\n  S_array_vec4u_4: {\n    isHostShareable: true,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n  S_array_bool_4: {\n    isHostShareable: false,\n    isConstructible: true,\n    isFixedFootprint: true,\n    requiresF16: false,\n  },\n\n  // Misc.\n  'ptr<function, u32>': {\n    isHostShareable: false,\n    isConstructible: false,\n    isFixedFootprint: false,\n    requiresF16: false,\n  },\n  sampler: {\n    isHostShareable: false,\n    isConstructible: false,\n    isFixedFootprint: false,\n    requiresF16: false,\n  },\n  'texture_2d<f32>': {\n    isHostShareable: false,\n    isConstructible: false,\n    isFixedFootprint: false,\n    requiresF16: false,\n  },\n};\n\ng.test('module_scope_types')\n  .desc('Test that only types that are allowed for a given address space are accepted.')\n  .params(u =>\n    u\n      .combine('type', keysOf(kTypes))\n      .combine('kind', [\n        'comment',\n        'handle',\n        'private',\n        'storage_ro',\n        'storage_rw',\n        'uniform',\n        'workgroup',\n      ])\n      .combine('via_alias', [false, true])\n  )\n  .beforeAllSubcases(t => {\n    if (kTypes[t.params.type].requiresF16) {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(t => {\n    const type = kTypes[t.params.type];\n    const isAtomic = t.params.type.indexOf('atomic') > -1;\n\n    let decl = '<>';\n    let shouldPass = false;\n    switch (t.params.kind) {\n      case 'comment':\n        // Control case to make sure all types are spelled correctly.\n        // We always emit an alias to the target type.\n        decl = '// ';\n        shouldPass = true;\n        break;\n      case 'handle':\n        decl = '@group(0) @binding(0) var foo : ';\n        shouldPass = t.params.type.indexOf('texture') > -1 || t.params.type.indexOf('sampler') > -1;\n        break;\n      case 'private':\n        decl = 'var<private> foo : ';\n        shouldPass = type.isConstructible;\n        break;\n      case 'storage_ro':\n        decl = '@group(0) @binding(0) var<storage, read> foo : ';\n        shouldPass = type.isHostShareable && !isAtomic;\n        break;\n      case 'storage_rw':\n        decl = '@group(0) @binding(0) var<storage, read_write> foo : ';\n        shouldPass = type.isHostShareable;\n        break;\n      case 'uniform':\n        decl = '@group(0) @binding(0) var<uniform> foo : ';\n        shouldPass = type.isHostShareable && type.isConstructible;\n        break;\n      case 'workgroup':\n        decl = 'var<workgroup> foo : ';\n        shouldPass = type.isFixedFootprint;\n        break;\n    }\n\n    const wgsl = `${type.requiresF16 ? 'enable f16;' : ''}\n    const array_size_const = 4;\n    override array_size_override = 4;\n\n    struct S_u32 { a : u32 }\n    struct S_bool { a : bool }\n    struct S_S_bool { a : S_bool }\n    struct S_array_vec4u { a : array<u32> }\n    struct S_array_vec4u_4 { a : array<vec4u, 4> }\n    struct S_array_bool_4 { a : array<bool, 4> }\n\n    alias MyType = ${t.params.type};\n\n    ${decl} ${t.params.via_alias ? 'MyType' : t.params.type};\n    `;\n\n    t.expectCompileResult(shouldPass, wgsl);\n  });\n\ng.test('function_scope_types')\n  .desc('Test that only types that are allowed for a given address space are accepted.')\n  .params(u =>\n    u\n      .combine('type', keysOf(kTypes))\n      .combine('kind', ['comment', 'var'])\n      .combine('via_alias', [false, true])\n  )\n  .beforeAllSubcases(t => {\n    if (kTypes[t.params.type].requiresF16) {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(t => {\n    const type = kTypes[t.params.type];\n\n    let decl = '<>';\n    let shouldPass = false;\n    switch (t.params.kind) {\n      case 'comment':\n        // Control case to make sure all types are spelled correctly.\n        // We always emit an alias to the target type.\n        decl = '// ';\n        shouldPass = true;\n        break;\n      case 'var':\n        decl = 'var foo : ';\n        shouldPass = type.isConstructible;\n        break;\n    }\n\n    const wgsl = `${type.requiresF16 ? 'enable f16;' : ''}\n    const array_size_const = 4;\n    override array_size_override = 4;\n\n    struct S_u32 { a : u32 }\n    struct S_bool { a : bool }\n    struct S_S_bool { a : S_bool }\n    struct S_array_vec4u { a : array<u32> }\n    struct S_array_vec4u_4 { a : array<vec4u, 4> }\n    struct S_array_bool_4 { a : array<bool, 4> }\n\n    alias MyType = ${t.params.type};\n\n    fn foo() {\n      ${decl} ${t.params.via_alias ? 'MyType' : t.params.type};\n    }`;\n\n    t.expectCompileResult(shouldPass, wgsl);\n  });\n\ng.test('module_scope_initializers')\n  .desc('Test that initializers are only supported on address spaces that allow them.')\n  .params(u =>\n    u\n      .combine('initializer', [false, true])\n      .combine('kind', ['private', 'storage_ro', 'storage_rw', 'uniform', 'workgroup'])\n  )\n  .fn(t => {\n    let decl = '<>';\n    switch (t.params.kind) {\n      case 'private':\n        decl = 'var<private> foo : ';\n        break;\n      case 'storage_ro':\n        decl = '@group(0) @binding(0) var<storage, read> foo : ';\n        break;\n      case 'storage_rw':\n        decl = '@group(0) @binding(0) var<storage, read_write> foo : ';\n        break;\n      case 'uniform':\n        decl = '@group(0) @binding(0) var<uniform> foo : ';\n        break;\n      case 'workgroup':\n        decl = 'var<workgroup> foo : ';\n        break;\n    }\n\n    const wgsl = `${decl} u32${t.params.initializer ? ' = 42u' : ''};`;\n    t.expectCompileResult(t.params.kind === 'private' || !t.params.initializer, wgsl);\n  });\n\ng.test('handle_initializer')\n  .desc('Test that initializers are not allowed for handle types')\n  .params(u =>\n    u.combine('initializer', [false, true]).combine('type', ['sampler', 'texture_2d<f32>'])\n  )\n  .fn(t => {\n    const wgsl = `\n    @group(0) @binding(0) var foo : ${t.params.type};\n    @group(0) @binding(1) var bar : ${t.params.type}${t.params.initializer ? ' = foo' : ''};`;\n    t.expectCompileResult(!t.params.initializer, wgsl);\n  });\n\n// A list of u32 initializers and their validity for the private address space.\nconst kInitializers = {\n  'u32()': true,\n  '42u': true,\n  'u32(sqrt(42.0))': true,\n  'user_func()': false,\n  my_const_42u: true,\n  my_override_42u: true,\n  another_private_var: false,\n  'vec4u(1, 2, 3, 4)[my_const_42u / 20]': true,\n  'vec4u(1, 2, 3, 4)[my_override_42u / 20]': true,\n  'vec4u(1, 2, 3, 4)[another_private_var / 20]': false,\n};\n\ng.test('initializer_kind')\n  .desc(\n    'Test that initializers must be const-expression or override-expression for the private address space.'\n  )\n  .params(u =>\n    u.combine('initializer', keysOf(kInitializers)).combine('addrspace', ['private', 'function'])\n  )\n  .fn(t => {\n    let wgsl = `\n    const my_const_42u = 42u;\n    override my_override_42u : u32;\n    var<private> another_private_var = 42u;\n\n    fn user_func() -> u32 {\n      return 42u;\n    }\n    `;\n\n    if (t.params.addrspace === 'private') {\n      wgsl += `\n      var<private> foo : u32 = ${t.params.initializer};`;\n    } else {\n      wgsl += `\n      fn foo() {\n        var bar : u32 = ${t.params.initializer};\n      }`;\n    }\n    t.expectCompileResult(\n      t.params.addrspace === 'function' || kInitializers[t.params.initializer],\n      wgsl\n    );\n  });\n\ng.test('function_addrspace_at_module_scope')\n  .desc('Test that the function address space is not allowed at module scope.')\n  .params(u => u.combine('addrspace', ['private', 'function']))\n  .fn(t => {\n    t.expectCompileResult(\n      t.params.addrspace === 'private',\n      `var<${t.params.addrspace}> foo : i32;`\n    );\n  });\n\n// A list of resource variable declarations.\nconst kResourceDecls = {\n  uniform: 'var<uniform> buffer : vec4f;',\n  storage: 'var<storage> buffer : vec4f;',\n  texture: 'var t : texture_2d<f32>;',\n  sampler: 'var s : sampler;',\n};\n\ng.test('binding_point_on_resources')\n  .desc('Test that resource variables must have both @group and @binding attributes.')\n  .params(u =>\n    u\n      .combine('decl', keysOf(kResourceDecls))\n      .combine('group', ['', '@group(0)'])\n      .combine('binding', ['', '@binding(0)'])\n  )\n  .fn(t => {\n    const shouldPass = t.params.group !== '' && t.params.binding !== '';\n    const wgsl = `${t.params.group} ${t.params.binding} ${kResourceDecls[t.params.decl]}`;\n    t.expectCompileResult(shouldPass, wgsl);\n  });\n\ng.test('binding_point_on_non_resources')\n  .desc('Test that non-resource variables cannot have either @group or @binding attributes.')\n  .params(u =>\n    u\n      .combine('addrspace', ['private', 'workgroup'])\n      .combine('group', ['', '@group(0)'])\n      .combine('binding', ['', '@binding(0)'])\n  )\n  .fn(t => {\n    const shouldPass = t.params.group === '' && t.params.binding === '';\n    const wgsl = `${t.params.group} ${t.params.binding} var<${t.params.addrspace}> foo : i32;`;\n    t.expectCompileResult(shouldPass, wgsl);\n  });\n\ng.test('binding_point_on_function_var')\n  .desc('Test that function variables cannot have either @group or @binding attributes.')\n  .params(u => u.combine('group', ['', '@group(0)']).combine('binding', ['', '@binding(0)']))\n  .fn(t => {\n    const shouldPass = t.params.group === '' && t.params.binding === '';\n    const wgsl = `\n    fn foo() {\n      ${t.params.group} ${t.params.binding} var bar : i32;\n    }`;\n    t.expectCompileResult(shouldPass, wgsl);\n  });\n\ng.test('binding_collisions')\n  .desc('Test that binding points can collide iff they are not used by the same entry point.')\n  .params(u =>\n    u\n      .combine('a_group', [0, 1])\n      .combine('b_group', [0, 1])\n      .combine('a_binding', [0, 1])\n      .combine('b_binding', [0, 1])\n      .combine('b_use', ['same', 'different'])\n  )\n  .fn(t => {\n    const wgsl = `\n    @group(${t.params.a_group}) @binding(${t.params.a_binding}) var<uniform> a : vec4f;\n    @group(${t.params.b_group}) @binding(${t.params.b_binding}) var<uniform> b : vec4f;\n\n    @fragment\n    fn main1() {\n      _ = a;\n      ${\n        t.params.b_use === 'same'\n          ? ''\n          : `\n      }\n\n    @fragment\n    fn main2() {`\n      }\n      _ = b;\n    }`;\n\n    const collision =\n      t.params.a_group === t.params.b_group && t.params.a_binding === t.params.b_binding;\n    const shouldFail = collision && t.params.b_use === 'same';\n    t.expectCompileResult(!shouldFail, wgsl);\n  });\n\ng.test('binding_collision_unused_helper')\n  .desc('Test that binding points can collide in an unused helper function.')\n  .fn(t => {\n    const wgsl = `\n    @group(0) @binding(0) var<uniform> a : vec4f;\n    @group(0) @binding(0) var<uniform> b : vec4f;\n\n    fn foo() {\n      _ = a;\n      _ = b;\n    }`;\n\n    t.expectCompileResult(true, wgsl);\n  });\n\ng.test('address_space_access_mode')\n  .desc('Test that only storage accepts an access mode')\n  .params(u =>\n    u\n      .combine('address_space', ['private', 'storage', 'uniform', 'function', 'workgroup'] as const)\n      .combine('access_mode', ['', 'read', 'write', 'read_write'] as const)\n      .combine('trailing_comma', [true, false] as const)\n  )\n  .fn(t => {\n    let fdecl = ``;\n    let mdecl = ``;\n    // Most address spaces do not accept an access mode, but should accept no\n    // template argument or a trailing comma.\n    let shouldPass = t.params.access_mode === '';\n    let suffix = ``;\n    if (t.params.access_mode === '') {\n      suffix += t.params.trailing_comma ? ',' : '';\n    } else {\n      suffix += `,${t.params.access_mode}`;\n      suffix += t.params.trailing_comma ? ',' : '';\n    }\n    // 'handle' unchecked since it is untypable.\n    switch (t.params.address_space) {\n      case 'private':\n        mdecl = `var<private${suffix}> x : u32;`;\n        break;\n      case 'storage':\n        mdecl = `@group(0) @binding(0) var<storage${suffix}> x : u32;`;\n        shouldPass = t.params.access_mode !== 'write';\n        break;\n      case 'uniform':\n        mdecl = `@group(0) @binding(0) var<uniform${suffix}> x : u32;`;\n        break;\n      case 'workgroup':\n        mdecl = `var<workgroup${suffix}> x : u32;`;\n        break;\n      case 'function':\n        fdecl = `var<function${suffix}> x : u32;`;\n        break;\n    }\n    const code = `${mdecl}\n    fn foo() {\n      ${fdecl}\n    }`;\n    t.expectCompileResult(shouldPass, code);\n  });\n\n// Address spaces that can hold an i32 variable.\nconst kNonHandleAddressSpaces = keysOf(kAddressSpaceInfo).filter(\n  as => as !== 'handle'\n) as AddressSpace[];\n\ng.test('explicit_access_mode')\n  .desc('Validate uses of an explicit access mode on a var declaration')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#var-decls')\n  .params(\n    u =>\n      u\n        .combine('addressSpace', kNonHandleAddressSpaces)\n        .combine('explicitSpace', [true, false])\n        // Only keep cases where:\n        //   *if* the address space must be specified on a var decl (e.g. var<private>)\n        //   then the address space will actually be specified in this test case.\n        .filter(t => kAddressSpaceInfo[t.addressSpace].spell !== 'must' || t.explicitSpace)\n        .combine('explicitAccess', [true])\n        .combine('accessMode', keysOf(kAccessModeInfo))\n        .combine('stage', ['compute' as ShaderStage]) // Only need to check compute shaders\n  )\n  .fn(t => {\n    const prog = getVarDeclShader(t.params);\n    const info = kAddressSpaceInfo[t.params.addressSpace];\n\n    const ok =\n      // The address space must be explicitly specified.\n      t.params.explicitSpace &&\n      // The address space must allow an access mode to be spelled, and the\n      // access mode must be in the list of modes for the address space.\n      info.spellAccessMode !== 'never' &&\n      info.accessModes.includes(t.params.accessMode);\n\n    t.expectCompileResult(ok, prog);\n  });\n\ng.test('implicit_access_mode')\n  .desc('Validate an implicit access mode on a var declaration')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#var-decls')\n  .params(\n    u =>\n      u\n        .combine('addressSpace', kNonHandleAddressSpaces)\n        .expand('explicitSpace', explicitSpaceExpander)\n        .combine('explicitAccess', [false])\n        .combine('accessMode', [''] as const)\n        .combine('stage', ['compute' as ShaderStage]) // Only need to check compute shaders\n  )\n  .fn(t => {\n    const prog = getVarDeclShader(t.params);\n\n    // 7.3 var Declarations\n    // \"The access mode always has a default value,..\"\n    const ok = true;\n\n    t.expectCompileResult(ok, prog);\n  });\n\ng.test('read_access')\n  .desc('A variable can be read from when the access mode permits')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#var-decls')\n  .params(\n    u =>\n      u\n        .combine('addressSpace', kNonHandleAddressSpaces)\n        .expand('explicitSpace', explicitSpaceExpander)\n        .combine('explicitAccess', [false, true])\n        .expand('accessMode', accessModeExpander)\n        .combine('stage', ['compute' as ShaderStage]) // Only need to check compute shaders\n  )\n  .fn(t => {\n    const prog = getVarDeclShader(t.params, 'let copy = x;');\n    const ok = supportsRead(t.params);\n    t.expectCompileResult(ok, prog);\n  });\n\ng.test('write_access')\n  .desc('A variable can be written to when the access mode permits')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#var-decls')\n  .params(\n    u =>\n      u\n        .combine('addressSpace', kNonHandleAddressSpaces)\n        .expand('explicitSpace', explicitSpaceExpander)\n        .combine('explicitAccess', [false, true])\n        .expand('accessMode', accessModeExpander)\n        .combine('stage', ['compute' as ShaderStage]) // Only need to check compute shaders\n  )\n  .fn(t => {\n    const prog = getVarDeclShader(t.params, 'x = 0;');\n    const ok = supportsWrite(t.params);\n    t.expectCompileResult(ok, prog);\n  });\n\nconst kTestTypes = [\n  'f32',\n  'i32',\n  'u32',\n  'bool',\n  'vec2<f32>',\n  'vec2<i32>',\n  'vec2<u32>',\n  'vec2<bool>',\n  'vec3<f32>',\n  'vec3<i32>',\n  'vec3<u32>',\n  'vec3<bool>',\n  'vec4<f32>',\n  'vec4<i32>',\n  'vec4<u32>',\n  'vec4<bool>',\n  'mat2x2<f32>',\n  'mat2x3<f32>',\n  'mat2x4<f32>',\n  'mat3x2<f32>',\n  'mat3x3<f32>',\n  'mat3x4<f32>',\n  'mat4x2<f32>',\n  'mat4x3<f32>',\n  'mat4x4<f32>',\n  // [1]: 12 is a random number here. find a solution to replace it.\n  'array<f32, 12>',\n  'array<i32, 12>',\n  'array<u32, 12>',\n  'array<bool, 12>',\n] as const;\n\ng.test('initializer_type')\n  .desc(\n    `\n  If present, the initializer's type must match the store type of the variable.\n  Testing scalars, vectors, and matrices of every dimension and type.\n  TODO: add test for: structs - arrays of vectors and matrices - arrays of different length\n`\n  )\n  .params(u => u.beginSubcases().combine('lhsType', kTestTypes).combine('rhsType', kTestTypes))\n  .fn(t => {\n    const { lhsType, rhsType } = t.params;\n\n    const code = `\n      @fragment\n      fn main() {\n        var a : ${lhsType} = ${rhsType}();\n      }\n    `;\n\n    const expectation = lhsType === rhsType;\n    t.expectCompileResult(expectation, code);\n  });\n\ng.test('var_access_mode_bad_other_template_contents')\n  .desc(\n    'A variable declaration with explicit access mode with varying other template list contents'\n  )\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#var-decls')\n  .params(u =>\n    u\n      .combine('accessMode', ['read', 'read_write'])\n      .combine('prefix', ['storage,', '', ','])\n      .combine('suffix', [',storage', ',read', ',', ''])\n  )\n  .fn(t => {\n    const prog = `@group(0) @binding(0)\n                  var<${t.params.prefix}${t.params.accessMode}${t.params.suffix}> x: i32;`;\n    const ok = t.params.prefix === 'storage,' && t.params.suffix === '';\n    t.expectCompileResult(ok, prog);\n  });\n\ng.test('var_access_mode_bad_template_delim')\n  .desc('A variable declaration has explicit access mode with varying template list delimiters')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#var-decls')\n  .params(u =>\n    u\n      .combine('accessMode', ['read', 'read_write'])\n      .combine('prefix', ['', '<', '>', ','])\n      .combine('suffix', ['', '<', '>', ','])\n  )\n  .fn(t => {\n    const prog = `@group(0) @binding(0)\n                  var ${t.params.prefix}storage,${t.params.accessMode}${t.params.suffix} x: i32;`;\n    const ok = t.params.prefix === '<' && t.params.suffix === '>';\n    t.expectCompileResult(ok, prog);\n  });\n\ng.test('shader_stage')\n  .desc('Test the limitations of address space and shader stage')\n  .params(u =>\n    u\n      .combine('stage', ['compute', 'vertex', 'fragment'] as const)\n      .combine('kind', [\n        'handle_ro',\n        'handle_wo',\n        'handle_rw',\n        'function',\n        'private',\n        'storage_ro',\n        'storage_rw',\n        'uniform',\n        'workgroup',\n      ])\n  )\n  .fn(t => {\n    t.skipIf(\n      !t.hasLanguageFeature('readonly_and_readwrite_storage_textures') &&\n        t.params.kind === 'handle_rw',\n      'Unsupported language feature'\n    );\n    let mdecl = ``;\n    let fdecl = ``;\n    let expect = true;\n    switch (t.params.kind) {\n      case 'handle_ro':\n        mdecl = `@group(0) @binding(0) var v : sampler;`;\n        break;\n      case 'handle_wo':\n        mdecl = `@group(0) @binding(0) var v : texture_storage_2d<r32uint, write>;`;\n        expect = t.params.stage !== 'vertex';\n        break;\n      case 'handle_rw':\n        mdecl = `@group(0) @binding(0) var v : texture_storage_2d<r32uint, read_write>;`;\n        expect = t.params.stage !== 'vertex';\n        break;\n      case 'function':\n        fdecl = `var v : u32;`;\n        break;\n      case 'private':\n        mdecl = `var<private> v : i32;`;\n        break;\n      case 'storage_ro':\n        mdecl = `@group(0) @binding(0) var<storage> v : u32;`;\n        break;\n      case 'storage_rw':\n        mdecl = `@group(0) @binding(0) var<storage, read_write> v : u32;`;\n        expect = t.params.stage !== 'vertex';\n        break;\n      case 'uniform':\n        mdecl = `@group(0) @binding(0) var<uniform> v : u32;`;\n        break;\n      case 'workgroup':\n        mdecl = `var<workgroup> v : u32;`;\n        expect = t.params.stage === 'compute';\n        break;\n    }\n    let func = ``;\n    switch (t.params.stage) {\n      case 'compute':\n        func = `@compute @workgroup_size(1)\n        fn main() {\n          ${fdecl}\n          _ = v;\n        }`;\n        break;\n      case 'vertex':\n        func = `@vertex\n        fn main() -> @builtin(position) vec4f {\n          ${fdecl}\n          _ = v;\n          return vec4f();\n        }`;\n        break;\n      case 'fragment':\n        func = `@fragment\n        fn main() {\n          ${fdecl}\n          _ = v;\n        }`;\n        break;\n    }\n\n    const code = `\n    ${mdecl}\n    ${func}`;\n    t.expectCompileResult(expect, code);\n  });\n"],"mappings":"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"}