{"version":3,"file":"continuing.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kTests","continuing_break_if","src","pass","continuing_empty","continuing_break_if_parens","continuing_discard","continuing_continue_nested","continuing_continue","continuing_break","continuing_for","continuing_for_break","continuing_while","continuing_while_break","continuing_semicolon","continuing_functionn_call","continuing_let","continuing_var","continuing_const","continuing_block","continuing_const_assert","continuing_loop","continuing_if","continuing_switch","continuing_switch_break","continuing_loop_nested_continuing","continuing_inc","continuing_dec","while","for","switch_case","switch","continuing","return","if_body","if","if_else","continuing_continuing","no_body","return_in_continue","return_if_nested_in_continue","return_for_nested_in_continue","test","desc","params","u","combine","fn","t","code","stmt","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/statement/continuing.spec.ts"],"sourcesContent":["export const description = `Validation tests for continuing`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kTests = {\n  continuing_break_if: {\n    src: 'loop { continuing { break if true; } }',\n    pass: true,\n  },\n  continuing_empty: {\n    src: 'loop { if a == 4 { break; } continuing { } }',\n    pass: true,\n  },\n  continuing_break_if_parens: {\n    src: 'loop { continuing { break if (true); } }',\n    pass: true,\n  },\n  continuing_discard: {\n    src: 'loop { if a == 4 { break; } continuing { discard; } }',\n    pass: true,\n  },\n  continuing_continue_nested: {\n    src: 'loop { if a == 4 { break; } continuing { loop { if a == 4 { break; } continue; } } }',\n    pass: true,\n  },\n  continuing_continue: {\n    src: 'loop { if a == 4 { break; } continuing { continue; } }',\n    pass: false,\n  },\n  continuing_break: {\n    src: 'loop { continuing { break; } }',\n    pass: false,\n  },\n  continuing_for: {\n    src: 'loop { if a == 4 { break; } continuing { for(;a < 4;) { } } }',\n    pass: true,\n  },\n  continuing_for_break: {\n    src: 'loop { if a == 4 { break; } continuing { for(;;) { break; } } }',\n    pass: true,\n  },\n  continuing_while: {\n    src: 'loop { if a == 4 { break; } continuing { while a < 4 { } } }',\n    pass: true,\n  },\n  continuing_while_break: {\n    src: 'loop { if a == 4 { break; } continuing { while true { break; } } }',\n    pass: true,\n  },\n  continuing_semicolon: {\n    src: 'loop { if a == 4 { break; } continuing { ; } }',\n    pass: true,\n  },\n  continuing_functionn_call: {\n    src: 'loop { if a == 4 { break; } continuing { _ = b(); } }',\n    pass: true,\n  },\n  continuing_let: {\n    src: 'loop { if a == 4 { break; } continuing { let c = b(); } }',\n    pass: true,\n  },\n  continuing_var: {\n    src: 'loop { if a == 4 { break; } continuing { var a = b(); } }',\n    pass: true,\n  },\n  continuing_const: {\n    src: 'loop { if a == 4 { break; } continuing { const a = 1; } }',\n    pass: true,\n  },\n  continuing_block: {\n    src: 'loop { if a == 4 { break; } continuing { { } } }',\n    pass: true,\n  },\n  continuing_const_assert: {\n    src: 'loop { if a == 4 { break; } continuing { const_assert(1 != 2); } }',\n    pass: true,\n  },\n  continuing_loop: {\n    src: 'loop { if a == 4 { break; } continuing { loop { break; } } }',\n    pass: true,\n  },\n  continuing_if: {\n    src: 'loop { if a == 4 { break; } continuing { if true { } else if false { } else { } } }',\n    pass: true,\n  },\n  continuing_switch: {\n    src: 'loop { if a == 4 { break; } continuing { switch 2 { default: { } } } }',\n    pass: true,\n  },\n  continuing_switch_break: {\n    src: 'loop { if a == 4 { break; } continuing { switch 2 { default: { break; } } } }',\n    pass: true,\n  },\n  continuing_loop_nested_continuing: {\n    src: 'loop { if a == 4 { break; } continuing { loop { if a == 4 { break; } continuing { } } } }',\n    pass: true,\n  },\n  continuing_inc: {\n    src: 'loop { if a == 4 { break; } continuing { a += 1; } }',\n    pass: true,\n  },\n  continuing_dec: {\n    src: 'loop { if a == 4 { break; } continuing { a -= 1; } }',\n    pass: true,\n  },\n  while: {\n    src: 'while a < 4 { continuing { break if true; } }',\n    pass: false,\n  },\n  for: {\n    src: 'for (;a < 4;) { continuing { break if true; } }',\n    pass: false,\n  },\n  switch_case: {\n    src: 'switch(1) { default: { continuing { break if true; } } }',\n    pass: false,\n  },\n  switch: {\n    src: 'switch(1) { continuing { break if true; } }',\n    pass: false,\n  },\n  continuing: {\n    src: 'continuing { break if true; }',\n    pass: false,\n  },\n  return: {\n    src: 'return continuing { break if true; }',\n    pass: false,\n  },\n  if_body: {\n    src: 'if true { continuing { break if true; } }',\n    pass: false,\n  },\n  if: {\n    src: 'if true { } continuing { break if true; } }',\n    pass: false,\n  },\n  if_else: {\n    src: 'if true { } else { } continuing { break if true; } }',\n    pass: false,\n  },\n  continuing_continuing: {\n    src: 'loop { if a == 4 { break; } continuing { continuing { break if true; } } }',\n    pass: false,\n  },\n  no_body: {\n    src: 'loop { if a == 4 { break; } continuing }',\n    pass: false,\n  },\n  return_in_continue: {\n    src: 'loop { if a == 4 { break; } continuing { return vec4f(2); } }',\n    pass: false,\n  },\n  return_if_nested_in_continue: {\n    src: 'loop { if a == 4 { break; } continuing { if true { return vec4f(2); } } }',\n    pass: false,\n  },\n  return_for_nested_in_continue: {\n    src: 'loop { if a == 4 { break; } continuing { for(;a < 4;) { return vec4f(2); } } }',\n    pass: false,\n  },\n};\n\ng.test('placement')\n  .desc('Test that continuing placement is validated correctly')\n  .params(u => u.combine('stmt', keysOf(kTests)))\n  .fn(t => {\n    const code = `\nfn b() -> i32 {\n  return 1;\n}\n\n@fragment\nfn frag() -> @location(0) vec4f {\n  var a = 0;\n  ${kTests[t.params.stmt].src}\n  return vec4f(1);\n}\n    `;\n    t.expectCompileResult(kTests[t.params.stmt].pass, code);\n  });\n"],"mappings":"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"}