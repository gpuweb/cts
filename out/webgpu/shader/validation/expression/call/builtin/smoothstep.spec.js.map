{"version":3,"file":"smoothstep.spec.js","names":["builtin","description","makeTestGroup","keysOf","objectsToRecord","Type","concreteTypeOf","elementTypeOf","isConvertibleToFloatType","kAllScalarsAndVectors","kConvertableToFloatScalarsAndVectors","scalarTypeOf","f32","ShaderValidationTest","kConstantAndOverrideStages","stageSupportsType","validateConstOrOverrideBuiltinEval","g","kValuesTypes","kArgumentTypes","test","desc","params","u","combine","filter","stage","type","beginSubcases","expand","fn","t","f16","skipIfDeviceDoesNotHaveFeature","expectedResult","value1","value2","create","kStages","scalarTy","abstractInt","abstractFloat","enable","requiresF16","lowArg","highArg","lowStage","low","wgsl","toString","highStage","high","error","shader_error","pipeline_error","in_shader","expectCompileResult","constants","expectPipelineResult","code","reference","statements","beforeAllSubcases","selectDeviceOrSkipTestCase","kTests","valid","src","pass","alias","bool","i32","u32","mixed_aint_afloat","mixed_f32_afloat","mixed_f16_afloat","vec_bool","vec_i32","vec_u32","vec_f32","matrix","atomic","array","array_runtime","struct","enumerant","ptr","ptr_deref","sampler","texture","no_args","too_few_args","too_many_args","must_use","includes","enables","combineWithParams"],"sources":["../../../../../../../src/webgpu/shader/validation/expression/call/builtin/smoothstep.spec.ts"],"sourcesContent":["const builtin = 'smoothstep';\nexport const description = `\nValidation tests for the ${builtin}() builtin.\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { keysOf, objectsToRecord } from '../../../../../../common/util/data_tables.js';\nimport {\n  Type,\n  concreteTypeOf,\n  elementTypeOf,\n  isConvertibleToFloatType,\n  kAllScalarsAndVectors,\n  kConvertableToFloatScalarsAndVectors,\n  scalarTypeOf,\n  f32,\n} from '../../../../../util/conversion.js';\nimport { ShaderValidationTest } from '../../../shader_validation_test.js';\n\nimport {\n  kConstantAndOverrideStages,\n  stageSupportsType,\n  validateConstOrOverrideBuiltinEval,\n} from './const_override_validation.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kValuesTypes = objectsToRecord(kConvertableToFloatScalarsAndVectors);\nconst kArgumentTypes = objectsToRecord(kAllScalarsAndVectors);\n\ng.test('values')\n  .desc(\n    `\nValidates that constant evaluation and override evaluation of ${builtin}() rejects invalid values\n`\n  )\n  .params(u =>\n    u\n      .combine('stage', kConstantAndOverrideStages)\n      .combine('type', keysOf(kValuesTypes))\n      .filter(u => stageSupportsType(u.stage, kValuesTypes[u.type]))\n      .beginSubcases()\n      .expand('value1', u => [-1000, -10, 0, 10, 1000])\n      .expand('value2', u => [-1000, -10, 0, 10, 1000])\n  )\n  .fn(t => {\n    if (scalarTypeOf(kValuesTypes[t.params.type]) === Type.f16) {\n      t.skipIfDeviceDoesNotHaveFeature('shader-f16');\n    }\n    const type = kValuesTypes[t.params.type];\n\n    // We expect to fail if low == high.\n    const expectedResult = t.params.value1 !== t.params.value2;\n\n    validateConstOrOverrideBuiltinEval(\n      t,\n      builtin,\n      expectedResult,\n      [type.create(t.params.value1), type.create(t.params.value2), type.create(0)],\n      t.params.stage\n    );\n  });\n\nconst kStages = [...kConstantAndOverrideStages, 'runtime'] as const;\n\ng.test('partial_eval_errors')\n  .desc('Validates that low != high')\n  .params(u =>\n    u\n      .combine('lowStage', kStages)\n      .combine('highStage', kStages)\n      .combine('type', keysOf(kValuesTypes))\n      .filter(t => {\n        const type = kValuesTypes[t.type];\n        const scalarTy = scalarTypeOf(type);\n        return scalarTy !== Type.abstractInt && scalarTy !== Type.abstractFloat;\n      })\n      .beginSubcases()\n      .expand('low', u => [0, 10])\n      .expand('high', u => [0, 10])\n      // in_shader: Is the function call statically accessed by the entry point?\n      .combine('in_shader', [false, true] as const)\n  )\n  .fn(t => {\n    if (scalarTypeOf(kValuesTypes[t.params.type]) === Type.f16) {\n      t.skipIfDeviceDoesNotHaveFeature('shader-f16');\n    }\n    const type = kValuesTypes[t.params.type];\n    const scalarTy = scalarTypeOf(type);\n    const enable = `${type.requiresF16() ? 'enable f16;' : ''}`;\n    let lowArg = '';\n    let highArg = '';\n    switch (t.params.lowStage) {\n      case 'constant':\n        lowArg = `${type.create(t.params.low).wgsl()}`;\n        break;\n      case 'override':\n        lowArg = `${type.toString()}(o_low)`;\n        break;\n      case 'runtime':\n        lowArg = `v_low`;\n        break;\n    }\n    switch (t.params.highStage) {\n      case 'constant':\n        highArg = `${type.create(t.params.high).wgsl()}`;\n        break;\n      case 'override':\n        highArg = `${type.toString()}(o_high)`;\n        break;\n      case 'runtime':\n        highArg = `v_high`;\n        break;\n    }\n    const wgsl = `\n${enable}\noverride o_low : ${scalarTy.toString()};\noverride o_high : ${scalarTy.toString()};\nfn foo() {\n  var x : ${type.toString()};\n  var v_low : ${type.toString()};\n  var v_high : ${type.toString()};\n  let tmp = smoothstep(${lowArg}, ${highArg}, x);\n}`;\n\n    const error = t.params.low === t.params.high;\n    const shader_error =\n      error && t.params.lowStage === 'constant' && t.params.highStage === 'constant';\n    const pipeline_error =\n      t.params.in_shader &&\n      error &&\n      t.params.lowStage !== 'runtime' &&\n      t.params.highStage !== 'runtime';\n    t.expectCompileResult(!shader_error, wgsl);\n    if (!shader_error) {\n      const constants: Record<string, number> = {};\n      constants['o_low'] = t.params.low;\n      constants['o_high'] = t.params.high;\n      t.expectPipelineResult({\n        expectedResult: !pipeline_error,\n        code: wgsl,\n        constants,\n        reference: ['o_low', 'o_high'],\n        statements: t.params.in_shader ? ['foo();'] : [],\n      });\n    }\n  });\n\ng.test('argument_types')\n  .desc(\n    `\nValidates that scalar and vector arguments are rejected by ${builtin}() if not float type or vecN<float type>\n`\n  )\n  .params(u => u.combine('type', keysOf(kArgumentTypes)))\n  .beforeAllSubcases(t => {\n    if (scalarTypeOf(kArgumentTypes[t.params.type]) === Type.f16) {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(t => {\n    const type = kArgumentTypes[t.params.type];\n    const expectedResult = isConvertibleToFloatType(elementTypeOf(type));\n    validateConstOrOverrideBuiltinEval(\n      t,\n      builtin,\n      expectedResult,\n      [type.create(0), type.create(1), type.create(2)],\n      'constant',\n      /* returnType */ concreteTypeOf(type, [Type.f32])\n    );\n  });\n\nconst kTests = {\n  valid: {\n    src: `_ = ${builtin}(0.0, 42.0, 0.5);`,\n    pass: true,\n  },\n  alias: {\n    src: `_ = ${builtin}(f32_alias(0), f32_alias(42), f32_alias(0.5));`,\n    pass: true,\n  },\n  bool: {\n    src: `_ = ${builtin}(false, false, false);`,\n    pass: false,\n  },\n  i32: {\n    src: `_ = ${builtin}(1i, 2i, 1i);`,\n    pass: false,\n  },\n  u32: {\n    src: `_ = ${builtin}(1u, 2u, 1u);`,\n    pass: false,\n  },\n  f32: {\n    src: `_ = ${builtin}(1.0f, 2.0f, 1.0f);`,\n    pass: true,\n  },\n  f16: {\n    src: `_ = ${builtin}(1h, 2h, 1h);`,\n    pass: true,\n  },\n  mixed_aint_afloat: {\n    src: `_ = ${builtin}(1.0, 2, 1);`,\n    pass: true,\n  },\n  mixed_f32_afloat: {\n    src: `_ = ${builtin}(1.0f, 2.0, 1.0);`,\n    pass: true,\n  },\n  mixed_f16_afloat: {\n    src: `_ = ${builtin}(1.0h, 2.0, 1.0);`,\n    pass: true,\n  },\n  vec_bool: {\n    src: `_ = ${builtin}(vec2<bool>(false, true), vec2<bool>(false, true), vec2<bool>(false, true));`,\n    pass: false,\n  },\n  vec_i32: {\n    src: `_ = ${builtin}(vec2<i32>(1, 1), vec2<i32>(1, 1), vec2<i32>(1, 1));`,\n    pass: false,\n  },\n  vec_u32: {\n    src: `_ = ${builtin}(vec2<u32>(1, 1), vec2<u32>(1, 1), vec2<u32>(1, 1));`,\n    pass: false,\n  },\n  vec_f32: {\n    src: `_ = ${builtin}(vec2<f32>(0, 0), vec2<f32>(1, 1), vec2<f32>(1, 1));`,\n    pass: true,\n  },\n  matrix: {\n    src: `_ = ${builtin}(mat2x2(1, 1, 1, 1), mat2x2(1, 1, 1, 1), mat2x2(1, 1, 1, 1));`,\n    pass: false,\n  },\n  atomic: {\n    src: ` _ = ${builtin}(a, a, a);`,\n    pass: false,\n  },\n  array: {\n    src: `var a: array<bool, 5>;\n            _ = ${builtin}(a, a, a);`,\n    pass: false,\n  },\n  array_runtime: {\n    src: `_ = ${builtin}(k.arry, k.arry, k.arry);`,\n    pass: false,\n  },\n  struct: {\n    src: `var a: A;\n            _ = ${builtin}(a, a, a);`,\n    pass: false,\n  },\n  enumerant: {\n    src: `_ = ${builtin}(read_write, read_write, read_write);`,\n    pass: false,\n  },\n  ptr: {\n    src: `var<function> a = 1.0;\n            let p: ptr<function, f32> = &a;\n            _ = ${builtin}(p, p, p);`,\n    pass: false,\n  },\n  ptr_deref: {\n    src: `var<function> a = 1.0;\n            let p: ptr<function, f32> = &a;\n            _ = ${builtin}(*p, *p, *p);`,\n    pass: true,\n  },\n  sampler: {\n    src: `_ = ${builtin}(s, s, s);`,\n    pass: false,\n  },\n  texture: {\n    src: `_ = ${builtin}(t, t, t);`,\n    pass: false,\n  },\n  no_args: {\n    src: `_ = ${builtin}();`,\n    pass: false,\n  },\n  too_few_args: {\n    src: `_ = ${builtin}(1.0, 2.0);`,\n    pass: false,\n  },\n  too_many_args: {\n    src: `_ = ${builtin}(1.0, 2.0, 3.0, 4.0);`,\n    pass: false,\n  },\n\n  must_use: {\n    src: `${builtin}(1.0,2.0,3.0);`,\n    pass: false,\n  },\n};\n\ng.test('arguments')\n  .desc(`Test that ${builtin} is validated correctly when called with different arguments.`)\n  .params(u => u.combine('test', keysOf(kTests)))\n  .beforeAllSubcases(t => {\n    if (t.params.test.includes('f16')) {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(t => {\n    const src = kTests[t.params.test].src;\n    const enables = t.params.test.includes('f16') ? 'enable f16;' : '';\n    const code = `\n  ${enables}\n  alias f32_alias = f32;\n\n  @group(0) @binding(0) var s: sampler;\n  @group(0) @binding(1) var t: texture_2d<f32>;\n\n  var<workgroup> a: atomic<u32>;\n\n  struct A {\n    i: bool,\n  }\n  struct B {\n    arry: array<u32>,\n  }\n  @group(0) @binding(3) var<storage> k: B;\n\n  @vertex\n  fn main() -> @builtin(position) vec4<f32> {\n    ${src}\n    return vec4<f32>(.4, .2, .3, .1);\n  }`;\n    t.expectCompileResult(kTests[t.params.test].pass, code);\n  });\n\ng.test('early_eval_errors')\n  .desc('Validates that high must be greater than low')\n  .params(u =>\n    u\n      .combine('stage', kConstantAndOverrideStages)\n      .beginSubcases()\n      .combineWithParams([\n        { low: 1, high: 2 },\n        { low: 2, high: 1 },\n        { low: 1, high: 1 },\n      ] as const)\n  )\n  .fn(t => {\n    validateConstOrOverrideBuiltinEval(\n      t,\n      builtin,\n      /* expectedResult */ t.params.low !== t.params.high,\n      [f32(t.params.low), f32(t.params.high), f32(0)],\n      t.params.stage\n    );\n  });\n"],"mappings":"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"}