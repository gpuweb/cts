{"version":3,"file":"idl_test.js","names":["Fixture","getGPU","assert","IDLTest","init","rec","Promise","resolve","assertMember","act","exp","key","actValue","expValue","assertMemberCount","expKeys","Object","keys","actKeys","length"],"sources":["../../../src/webgpu/idl/idl_test.ts"],"sourcesContent":["import { Fixture } from '../../common/framework/fixture.js';\nimport { getGPU } from '../../common/util/navigator_gpu.js';\nimport { assert } from '../../common/util/util.js';\n\ninterface UnknownObject {\n  [k: string]: unknown;\n}\n\n/**\n * Base fixture for testing the exposed interface is correct (without actually using WebGPU).\n */\nexport class IDLTest extends Fixture {\n  override init(): Promise<void> {\n    // Ensure the GPU provider is initialized\n    getGPU(this.rec);\n    return Promise.resolve();\n  }\n\n  /**\n   * Asserts that a member of an IDL interface has the expected value.\n   */\n  assertMember(act: object, exp: object, key: string) {\n    assert(key in act, () => `Expected key ${key} missing`);\n    const actValue = (act as UnknownObject)[key];\n    const expValue = (exp as UnknownObject)[key];\n    assert(actValue === expValue, () => `Value of [${key}] was ${actValue}, expected ${expValue}`);\n  }\n\n  /**\n   * Asserts that an IDL interface has the same number of keys as the\n   *\n   * MAINTENANCE_TODO: add a way to check for the types of keys with unknown values, like methods and attributes\n   * MAINTENANCE_TODO: handle extensions\n   */\n  assertMemberCount(act: object, exp: object) {\n    const expKeys = Object.keys(exp);\n    const actKeys = Object.keys(act);\n    assert(\n      actKeys.length === expKeys.length,\n      () => `Had ${actKeys.length} keys, expected ${expKeys.length}`\n    );\n  }\n}\n"],"mappings":";;GAAA,SAASA,OAAO,QAAQ,mCAAmC,CAC3D,SAASC,MAAM,QAAQ,oCAAoC,CAC3D,SAASC,MAAM,QAAQ,2BAA2B;;;;;;AAMlD;AACA;AACA;AACA,OAAO,MAAMC,OAAO,SAASH,OAAO,CAAC;EAC1BI,IAAIA,CAAA,EAAkB;IAC7B;IACAH,MAAM,CAAC,IAAI,CAACI,GAAG,CAAC;IAChB,OAAOC,OAAO,CAACC,OAAO,CAAC,CAAC;EAC1B;;EAEA;AACF;AACA;EACEC,YAAYA,CAACC,GAAW,EAAEC,GAAW,EAAEC,GAAW,EAAE;IAClDT,MAAM,CAACS,GAAG,IAAIF,GAAG,EAAE,MAAO,gBAAeE,GAAI,UAAS,CAAC;IACvD,MAAMC,QAAQ,GAAIH,GAAG,CAAmBE,GAAG,CAAC;IAC5C,MAAME,QAAQ,GAAIH,GAAG,CAAmBC,GAAG,CAAC;IAC5CT,MAAM,CAACU,QAAQ,KAAKC,QAAQ,EAAE,MAAO,aAAYF,GAAI,SAAQC,QAAS,cAAaC,QAAS,EAAC,CAAC;EAChG;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEC,iBAAiBA,CAACL,GAAW,EAAEC,GAAW,EAAE;IAC1C,MAAMK,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACP,GAAG,CAAC;IAChC,MAAMQ,OAAO,GAAGF,MAAM,CAACC,IAAI,CAACR,GAAG,CAAC;IAChCP,MAAM;MACJgB,OAAO,CAACC,MAAM,KAAKJ,OAAO,CAACI,MAAM;MACjC,MAAO,OAAMD,OAAO,CAACC,MAAO,mBAAkBJ,OAAO,CAACI,MAAO;IAC/D,CAAC;EACH;AACF"}