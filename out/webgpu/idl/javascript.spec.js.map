{"version":3,"file":"javascript.spec.js","names":["description","makeTestGroup","keysOf","getGPU","assert","objectEquals","unreachable","getDefaultLimitsForAdapter","kLimits","GPUTest","GPUTestSubcaseBatchState","initUncanonicalizedDeviceDescriptor","isUnspecifiedLimit","limit","test","kSpecifiedLimits","filter","s","addAllFeatures","adapter","desc","descWithMaxLimits","defaultQueue","requiredFeatures","features","requiredLimits","AllFeaturesGPUTestSubcaseBatchState","requestDeviceWithRequiredParametersOrSkip","descriptor","descriptorModifier","mod","keyModifier","baseKey","AllFeaturesTest","MakeSharedState","recorder","params","kResourceInfo","buffer","create","t","createBufferTracked","size","usage","GPUBufferUsage","UNIFORM","requiredKeys","texture","createTextureTracked","format","GPUTextureUsage","TEXTURE_BINDING","querySet","createQuerySetTracked","type","count","device","limits","kResources","createResource","forOfIterations","obj","_","hasRequiredKeys","requiredKey","expect","constructor","name","aHasBElements","a","b","elem","Array","isArray","includes","has","g","u","combine","fn","Object","keys","shouldThrow","message","getOwnPropertyDescriptors","copy","Set","gpu","requestAdapter","requestDeviceTracked","defaultLimits","key","default","defaultLimit","entries","actual"],"sources":["../../../src/webgpu/idl/javascript.spec.ts"],"sourcesContent":["export const description = `\nValidate that various GPU objects behave correctly in JavaScript.\n\nExamples:\n  - GPUTexture, GPUBuffer, GPUQuerySet, GPUDevice, GPUAdapter, GPUAdapter.limits, GPUDevice.limits\n    - return nothing for Object.keys()\n    - adds no properties for {...object}\n    - iterate over keys for (key in object)\n    - throws for (key of object)\n    - return nothing from Object.getOwnPropertyDescriptors\n - GPUAdapter.limits, GPUDevice.limits\n     - can not be passed to requestAdapter as requiredLimits\n - GPUAdapter.features, GPUDevice.features\n    - do spread to array\n    - can be copied to set\n    - can be passed to requestAdapter as requiredFeatures\n`;\n\nimport { TestCaseRecorder, TestParams } from '../../common/framework/fixture.js';\nimport { makeTestGroup } from '../../common/framework/test_group.js';\nimport { keysOf } from '../../common/util/data_tables.js';\nimport { getGPU } from '../../common/util/navigator_gpu.js';\nimport { assert, objectEquals, unreachable } from '../../common/util/util.js';\nimport { getDefaultLimitsForAdapter, kLimits } from '../capability_info.js';\nimport {\n  DeviceSelectionDescriptor,\n  GPUTest,\n  GPUTestSubcaseBatchState,\n  initUncanonicalizedDeviceDescriptor,\n} from '../gpu_test.js';\nimport { CanonicalDeviceDescriptor, DescriptorModifier } from '../util/device_pool.js';\n\n// MAINTENANCE_TODO: Remove this filter when these limits are added to the spec.\nconst isUnspecifiedLimit = (limit: string) =>\n  /maxStorage(Buffer|Texture)sIn(Vertex|Fragment)Stage/.test(limit);\n\nconst kSpecifiedLimits = kLimits.filter(s => !isUnspecifiedLimit(s));\n\nfunction addAllFeatures(adapter: GPUAdapter, desc: CanonicalDeviceDescriptor | undefined) {\n  const descWithMaxLimits: CanonicalDeviceDescriptor = {\n    defaultQueue: {},\n    ...desc,\n    requiredFeatures: [...adapter.features] as GPUFeatureName[],\n    requiredLimits: { ...(desc?.requiredLimits ?? {}) },\n  };\n  return descWithMaxLimits;\n}\n\n/**\n * Used to request a device with all the max limits of the adapter.\n */\nclass AllFeaturesGPUTestSubcaseBatchState extends GPUTestSubcaseBatchState {\n  override requestDeviceWithRequiredParametersOrSkip(\n    descriptor: DeviceSelectionDescriptor,\n    descriptorModifier?: DescriptorModifier\n  ): void {\n    const mod: DescriptorModifier = {\n      descriptorModifier(adapter: GPUAdapter, desc: CanonicalDeviceDescriptor | undefined) {\n        desc = descriptorModifier?.descriptorModifier\n          ? descriptorModifier.descriptorModifier(adapter, desc)\n          : desc;\n        return addAllFeatures(adapter, desc);\n      },\n      keyModifier(baseKey: string) {\n        return `${baseKey}:AllFeaturesTest`;\n      },\n    };\n    super.requestDeviceWithRequiredParametersOrSkip(\n      initUncanonicalizedDeviceDescriptor(descriptor),\n      mod\n    );\n  }\n}\n\n/**\n * A Test that requests all the max limits from the adapter on the device.\n */\nclass AllFeaturesTest extends GPUTest {\n  public static override MakeSharedState(\n    recorder: TestCaseRecorder,\n    params: TestParams\n  ): GPUTestSubcaseBatchState {\n    return new AllFeaturesGPUTestSubcaseBatchState(recorder, params);\n  }\n}\n\nconst kResourceInfo = {\n  buffer: {\n    create(t: GPUTest) {\n      return t.createBufferTracked({ size: 16, usage: GPUBufferUsage.UNIFORM });\n    },\n    requiredKeys: [\n      'destroy',\n      'getMappedRange',\n      'label',\n      'mapAsync',\n      'mapState',\n      'size',\n      'unmap',\n      'usage',\n    ],\n  },\n  texture: {\n    create(t: GPUTest) {\n      return t.createTextureTracked({\n        size: [2, 3],\n        format: 'r8unorm',\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n      });\n    },\n    requiredKeys: [\n      'createView',\n      'depthOrArrayLayers',\n      'destroy',\n      'dimension',\n      'format',\n      'height',\n      'label',\n      'mipLevelCount',\n      'sampleCount',\n      'usage',\n      'width',\n    ],\n  },\n  querySet: {\n    create(t: GPUTest) {\n      return t.createQuerySetTracked({\n        type: 'occlusion',\n        count: 2,\n      });\n    },\n    requiredKeys: ['count', 'destroy', 'label', 'type'],\n  },\n  adapter: {\n    create(t: GPUTest) {\n      return t.adapter;\n    },\n    requiredKeys: ['features', 'info', 'limits', 'requestDevice'],\n  },\n  device: {\n    create(t: GPUTest) {\n      return t.device;\n    },\n    requiredKeys: [\n      'adapterInfo',\n      'addEventListener',\n      'createBindGroup',\n      'createBindGroupLayout',\n      'createBuffer',\n      'createCommandEncoder',\n      'createComputePipeline',\n      'createComputePipelineAsync',\n      'createPipelineLayout',\n      'createQuerySet',\n      'createRenderBundleEncoder',\n      'createRenderPipeline',\n      'createRenderPipelineAsync',\n      'createSampler',\n      'createShaderModule',\n      'createTexture',\n      'destroy',\n      'dispatchEvent',\n      'features',\n      'importExternalTexture',\n      'label',\n      'limits',\n      'lost',\n      'onuncapturederror',\n      'popErrorScope',\n      'pushErrorScope',\n      'queue',\n      'removeEventListener',\n    ],\n  },\n  'adapter.limits': {\n    create(t: GPUTest) {\n      return t.adapter.limits;\n    },\n    requiredKeys: kSpecifiedLimits,\n  },\n  'device.limits': {\n    create(t: GPUTest) {\n      return t.device.limits;\n    },\n    requiredKeys: kSpecifiedLimits,\n  },\n} as const;\nconst kResources = keysOf(kResourceInfo);\ntype ResourceName = (typeof kResources)[number];\n\nfunction createResource(t: GPUTest, type: ResourceName) {\n  return kResourceInfo[type].create(t);\n}\n\ntype Resource = ReturnType<typeof createResource>;\n\nfunction forOfIterations(obj: Resource) {\n  let count = 0;\n  for (const _ of obj as unknown as []) {\n    ++count;\n  }\n  return count;\n}\n\nfunction hasRequiredKeys(t: GPUTest, obj: Resource, requiredKeys: readonly string[]) {\n  for (const requiredKey of requiredKeys) {\n    t.expect(requiredKey in obj, `${requiredKey} in ${obj.constructor.name} exists`);\n  }\n}\n\nfunction aHasBElements(\n  t: GPUTest,\n  a: GPUSupportedFeatures | string[],\n  b: GPUSupportedFeatures | string[]\n) {\n  for (const elem of b) {\n    if (Array.isArray(a)) {\n      t.expect(a.includes(elem), `missing ${elem}`);\n    } else if (a.has) {\n      t.expect(a.has(elem), `missing ${elem}`);\n    } else {\n      unreachable();\n    }\n  }\n}\n\nexport const g = makeTestGroup(AllFeaturesTest);\ng.test('obj,Object_keys')\n  .desc('tests returns nothing for Object.keys()')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    t.expect(objectEquals([...Object.keys(obj)], []), `Object.keys([...${type}] === []`);\n  });\n\ng.test('obj,spread')\n  .desc('does not spread')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    t.expect(objectEquals({ ...obj }, {}), `{ ...${type} ] === {}`);\n  });\n\ng.test('obj,for_in')\n  .desc('iterates over keys - for (key in object)')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    hasRequiredKeys(t, obj, kResourceInfo[type].requiredKeys);\n  });\n\ng.test('obj,for_of')\n  .desc('throws TypeError - for (key of object')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    t.shouldThrow('TypeError', () => forOfIterations(obj), {\n      message: `for (const key of ${type} } throws TypeError`,\n    });\n  });\n\ng.test('obj,getOwnPropertyDescriptors')\n  .desc('Object.getOwnPropertyDescriptors returns {}')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    t.expect(\n      objectEquals(Object.getOwnPropertyDescriptors(obj), {}),\n      `Object.getOwnPropertyDescriptors(${type}} === {}`\n    );\n  });\n\ng.test('setlike,spread')\n  .desc('obj spreads')\n  .params(u => u.combine('type', ['adapter', 'device'] as const))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = type === 'adapter' ? t.adapter : t.device;\n    const copy = [...obj.features];\n    aHasBElements(t, copy, obj.features);\n    aHasBElements(t, obj.features, copy);\n  });\n\ng.test('setlike,set')\n  .desc('obj copies to set')\n  .params(u => u.combine('type', ['adapter', 'device'] as const))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = type === 'adapter' ? t.adapter : t.device;\n    const copy = new Set(obj.features);\n    aHasBElements(t, copy, obj.features);\n    aHasBElements(t, obj.features, copy);\n  });\n\ng.test('setlike,requiredFeatures')\n  .desc('can be passed as required features')\n  .params(u => u.combine('type', ['adapter', 'device'] as const))\n  .fn(async t => {\n    const { type } = t.params;\n    const obj = type === 'adapter' ? t.adapter : t.device;\n\n    const gpu = getGPU(null);\n    const adapter = await gpu.requestAdapter();\n    const device = await t.requestDeviceTracked(adapter!, {\n      requiredFeatures: obj.features as Iterable<GPUFeatureName>,\n    });\n    aHasBElements(t, device.features, obj.features);\n    aHasBElements(t, obj.features, device.features);\n  });\n\ng.test('limits')\n  .desc('adapter/device.limits can not be passed as requiredLimits')\n  .params(u => u.combine('type', ['adapter', 'device'] as const))\n  .fn(async t => {\n    const { type } = t.params;\n    const obj = type === 'adapter' ? t.adapter : t.device;\n\n    const gpu = getGPU(null);\n    const adapter = await gpu.requestAdapter();\n    assert(!!adapter);\n    const device = await t.requestDeviceTracked(adapter, {\n      requiredLimits: obj.limits as unknown as Record<string, number>,\n    });\n    const defaultLimits = getDefaultLimitsForAdapter(adapter);\n    for (const [key, { default: defaultLimit }] of Object.entries(defaultLimits)) {\n      if (isUnspecifiedLimit(key)) {\n        continue;\n      }\n      const actual = (device.limits as unknown as Record<string, number>)[key];\n      t.expect(\n        actual === defaultLimit,\n        `expected device.limits.${key}(${actual}) === ${defaultLimit}`\n      );\n    }\n  });\n"],"mappings":"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"}