{"version":3,"file":"javascript.spec.js","names":["description","makeTestGroup","keysOf","getGPU","assert","objectEquals","raceWithRejectOnTimeout","unreachable","getDefaultLimitsForDevice","kPossibleLimits","AllFeaturesMaxLimitsGPUTest","isUnspecifiedLimit","limit","test","kSpecifiedLimits","filter","s","kResourceInfo","gpu","create","t","requiredKeys","getters","settable","sameObject","skipInCompatibility","buffer","createBufferTracked","size","usage","GPUBufferUsage","UNIFORM","texture","createTextureTracked","format","GPUTextureUsage","TEXTURE_BINDING","querySet","createQuerySetTracked","type","count","adapter","device","limits","kResources","createResource","forOfIterations","obj","_","hasRequiredKeys","requiredKey","expect","constructor","name","aHasBElements","a","b","elem","Array","isArray","includes","has","g","desc","params","u","combine","fn","skipIf","isCompatibility","Object","keys","shouldThrow","message","getOwnPropertyDescriptors","kSetLikeFeaturesInfo","adapterFeatures","features","deviceFeatures","kSetLikeFeatures","kSetLikeInfo","wgslLanguageFeatures","kSetLikes","setLike","copy","Set","requestAdapter","requestDeviceTracked","requiredFeatures","requiredLimits","defaultLimits","key","default","defaultLimit","entries","actual","getter","origValue","isSettable","properties","getOwnPropertyDescriptor","undefined","ctorPrototype","prototype","origProperties","defineProperty","get","value","afterValue","gettersSet","methods","k","method","origFunc","property","origValue1","origValue2","foo","kClassInheritanceTests","GPUDevice","EventTarget","GPUPipelineError","DOMException","GPUValidationError","GPUError","GPUOutOfMemoryError","GPUInternalError","GPUUncapturedErrorEvent","Event","toString","kDispatchTests","canPassEventThroughDevice","result","Promise","resolve","addEventListener","once","dispatchEvent","event","canPassCustomEventThroughDevice","CustomEvent","patchingEventTargetAffectsDevice","addEventListenerWasCalled","dispatchEventWasCalled","removeEventListenerWasCalled","origFnAddEventListener","args","call","origFnDispatchEvent","origFnRemoveEventListener","removeEventListener","passingGPUUncapturedErrorEventWorksThoughEventTarget","target","error","kAddEventListenerTests","EventHandler","EventListener","handleEvent"],"sources":["../../../src/webgpu/idl/javascript.spec.ts"],"sourcesContent":["export const description = `\nValidate that various GPU objects behave correctly in JavaScript.\n\nExamples:\n  - GPUTexture, GPUBuffer, GPUQuerySet, GPUDevice, GPUAdapter, GPUAdapter.limits, GPUDevice.limits\n    - return nothing for Object.keys()\n    - adds no properties for {...object}\n    - iterate over keys for (key in object)\n    - throws for (key of object)\n    - return nothing from Object.getOwnPropertyDescriptors\n - GPUAdapter.limits, GPUDevice.limits\n     - can not be passed to requestAdapter as requiredLimits\n - GPUAdapter.features, GPUDevice.features\n    - do spread to array\n    - can be copied to set\n    - can be passed to requestAdapter as requiredFeatures\n`;\n\nimport { makeTestGroup } from '../../common/framework/test_group.js';\nimport { keysOf } from '../../common/util/data_tables.js';\nimport { getGPU } from '../../common/util/navigator_gpu.js';\nimport {\n  assert,\n  objectEquals,\n  raceWithRejectOnTimeout,\n  unreachable,\n} from '../../common/util/util.js';\nimport { getDefaultLimitsForDevice, kPossibleLimits } from '../capability_info.js';\nimport { AllFeaturesMaxLimitsGPUTest, GPUTest } from '../gpu_test.js';\n\n// MAINTENANCE_TODO: Remove this filter when these limits are added to the spec.\nconst isUnspecifiedLimit = (limit: string) =>\n  /maxStorage(Buffer|Texture)sIn(Vertex|Fragment)Stage/.test(limit);\n\nconst kSpecifiedLimits = kPossibleLimits.filter(s => !isUnspecifiedLimit(s));\n\ntype ResourceInfo = {\n  create: (t: GPUTest) => Object;\n  requiredKeys: readonly string[];\n  getters: readonly string[];\n  settable: readonly string[];\n  sameObject: readonly string[];\n  // Note: some of the tests need to be skipped in compatibility mode related to 'gpu'.\n  // This is because getGPU() doesn't return the actual `navigator.gpu` in compatibility mode.\n  // Instead it returns something that's wrapped to request compatibility mode.\n  skipInCompatibility?: boolean;\n};\nconst kResourceInfo: { [key: string]: ResourceInfo } = {\n  gpu: {\n    create(t: GPUTest) {\n      return getGPU(null);\n    },\n    requiredKeys: ['wgslLanguageFeatures', 'requestAdapter'],\n    getters: ['wgslLanguageFeatures'],\n    settable: [],\n    sameObject: ['wgslLanguageFeatures'],\n    skipInCompatibility: true,\n  },\n  buffer: {\n    create(t: GPUTest) {\n      return t.createBufferTracked({ size: 16, usage: GPUBufferUsage.UNIFORM });\n    },\n    requiredKeys: [\n      'destroy',\n      'getMappedRange',\n      'label',\n      'mapAsync',\n      'mapState',\n      'size',\n      'unmap',\n      'usage',\n    ],\n    getters: ['label', 'mapState', 'size', 'usage'],\n    settable: ['label'],\n    sameObject: [],\n  },\n  texture: {\n    create(t: GPUTest) {\n      return t.createTextureTracked({\n        size: [2, 3],\n        format: 'r8unorm',\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n      });\n    },\n    requiredKeys: [\n      'createView',\n      'depthOrArrayLayers',\n      'destroy',\n      'dimension',\n      'format',\n      'height',\n      'label',\n      'mipLevelCount',\n      'sampleCount',\n      'usage',\n      'width',\n    ],\n    getters: [\n      'depthOrArrayLayers',\n      'dimension',\n      'format',\n      'height',\n      'label',\n      'mipLevelCount',\n      'sampleCount',\n      'usage',\n      'width',\n    ],\n    settable: ['label'],\n    sameObject: [],\n  },\n  querySet: {\n    create(t: GPUTest) {\n      return t.createQuerySetTracked({\n        type: 'occlusion',\n        count: 2,\n      });\n    },\n    requiredKeys: ['count', 'destroy', 'label', 'type'],\n    getters: ['count', 'label', 'type'],\n    settable: ['label'],\n    sameObject: [],\n  },\n  adapter: {\n    create(t: GPUTest) {\n      return t.adapter;\n    },\n    requiredKeys: ['features', 'info', 'limits', 'requestDevice'],\n    getters: ['features', 'info', 'limits'],\n    settable: [],\n    sameObject: ['features', 'info', 'limits'],\n  },\n  device: {\n    create(t: GPUTest) {\n      return t.device;\n    },\n    requiredKeys: [\n      'adapterInfo',\n      'addEventListener',\n      'createBindGroup',\n      'createBindGroupLayout',\n      'createBuffer',\n      'createCommandEncoder',\n      'createComputePipeline',\n      'createComputePipelineAsync',\n      'createPipelineLayout',\n      'createQuerySet',\n      'createRenderBundleEncoder',\n      'createRenderPipeline',\n      'createRenderPipelineAsync',\n      'createSampler',\n      'createShaderModule',\n      'createTexture',\n      'destroy',\n      'dispatchEvent',\n      'features',\n      'importExternalTexture',\n      'label',\n      'limits',\n      'lost',\n      'onuncapturederror',\n      'popErrorScope',\n      'pushErrorScope',\n      'queue',\n      'removeEventListener',\n    ],\n    getters: ['adapterInfo', 'features', 'label', 'limits', 'lost', 'onuncapturederror', 'queue'],\n    settable: ['label', 'onuncapturederror'],\n    sameObject: ['adapterInfo', 'features', 'limits', 'queue'],\n  },\n  'adapter.limits': {\n    create(t: GPUTest) {\n      return t.adapter.limits;\n    },\n    requiredKeys: kSpecifiedLimits,\n    getters: kSpecifiedLimits,\n    settable: [],\n    sameObject: [],\n  },\n  'device.limits': {\n    create(t: GPUTest) {\n      return t.device.limits;\n    },\n    requiredKeys: kSpecifiedLimits,\n    getters: kSpecifiedLimits,\n    settable: [],\n    sameObject: [],\n  },\n} as const;\nconst kResources = keysOf(kResourceInfo);\ntype ResourceName = (typeof kResources)[number];\n\nfunction createResource(t: GPUTest, type: ResourceName) {\n  return kResourceInfo[type].create(t);\n}\n\ntype Resource = ReturnType<typeof createResource>;\n\nfunction forOfIterations(obj: Resource) {\n  let count = 0;\n  for (const _ of obj as unknown as []) {\n    ++count;\n  }\n  return count;\n}\n\nfunction hasRequiredKeys(t: GPUTest, obj: Resource, requiredKeys: readonly string[]) {\n  for (const requiredKey of requiredKeys) {\n    t.expect(requiredKey in obj, `${requiredKey} in ${obj.constructor.name} exists`);\n  }\n}\n\nfunction aHasBElements(\n  t: GPUTest,\n  a: GPUSupportedFeatures | string[],\n  b: GPUSupportedFeatures | string[]\n) {\n  for (const elem of b) {\n    if (Array.isArray(a)) {\n      t.expect(a.includes(elem), `missing ${elem}`);\n    } else if (a.has) {\n      t.expect(a.has(elem), `missing ${elem}`);\n    } else {\n      unreachable();\n    }\n  }\n}\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsGPUTest);\ng.test('obj,Object_keys')\n  .desc('tests returns nothing for Object.keys()')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const { skipInCompatibility } = kResourceInfo[type];\n    t.skipIf(t.isCompatibility && !!skipInCompatibility, 'skipped in compatibility mode');\n\n    const obj = createResource(t, type);\n    t.expect(objectEquals([...Object.keys(obj)], []), `[...Object.keys(${type})] === []`);\n  });\n\ng.test('obj,spread')\n  .desc('does not spread')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const { skipInCompatibility } = kResourceInfo[type];\n    t.skipIf(t.isCompatibility && !!skipInCompatibility, 'skipped in compatibility mode');\n\n    const obj = createResource(t, type);\n    t.expect(objectEquals({ ...obj }, {}), `{ ...${type} ] === {}`);\n  });\n\ng.test('obj,for_in')\n  .desc('iterates over keys - for (key in object)')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    hasRequiredKeys(t, obj, kResourceInfo[type].requiredKeys);\n  });\n\ng.test('obj,for_of')\n  .desc('throws TypeError - for (key of object')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const obj = createResource(t, type);\n    t.shouldThrow('TypeError', () => forOfIterations(obj), {\n      message: `for (const key of ${type} } throws TypeError`,\n    });\n  });\n\ng.test('obj,getOwnPropertyDescriptors')\n  .desc('Object.getOwnPropertyDescriptors returns {}')\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const { skipInCompatibility } = kResourceInfo[type];\n    t.skipIf(t.isCompatibility && !!skipInCompatibility, 'skipped in compatibility mode');\n\n    const obj = createResource(t, type);\n    t.expect(\n      objectEquals(Object.getOwnPropertyDescriptors(obj), {}),\n      `Object.getOwnPropertyDescriptors(${type}} === {}`\n    );\n  });\n\nconst kSetLikeFeaturesInfo: { [key: string]: (t: GPUTest) => GPUSupportedFeatures } = {\n  adapterFeatures(t: GPUTest) {\n    return t.adapter.features;\n  },\n  deviceFeatures(t: GPUTest) {\n    return t.device.features;\n  },\n};\nconst kSetLikeFeatures = keysOf(kSetLikeFeaturesInfo);\n\nconst kSetLikeInfo: { [key: string]: (t: GPUTest) => ReadonlySet<string> } = {\n  ...kSetLikeFeaturesInfo,\n  wgslLanguageFeatures() {\n    return getGPU(null).wgslLanguageFeatures;\n  },\n};\nconst kSetLikes = keysOf(kSetLikeInfo);\n\ng.test('setlike,spread')\n  .desc('obj spreads')\n  .params(u => u.combine('type', kSetLikes))\n  .fn(t => {\n    const { type } = t.params;\n    const setLike = kSetLikeInfo[type](t);\n    const copy = [...setLike];\n    aHasBElements(t, copy, setLike);\n    aHasBElements(t, setLike, copy);\n  });\n\ng.test('setlike,set')\n  .desc('obj copies to set')\n  .params(u => u.combine('type', kSetLikes))\n  .fn(t => {\n    const { type } = t.params;\n    const setLike = kSetLikeInfo[type](t);\n    const copy = new Set(setLike);\n    aHasBElements(t, copy, setLike);\n    aHasBElements(t, setLike, copy);\n  });\n\ng.test('setlike,requiredFeatures')\n  .desc('can be passed as required features')\n  .params(u => u.combine('type', kSetLikeFeatures))\n  .fn(async t => {\n    const { type } = t.params;\n    const features = kSetLikeFeaturesInfo[type](t);\n\n    const gpu = getGPU(null);\n    const adapter = await gpu.requestAdapter();\n    const device = await t.requestDeviceTracked(adapter!, {\n      requiredFeatures: features as Iterable<GPUFeatureName>,\n    });\n    aHasBElements(t, device.features, features);\n    aHasBElements(t, features, device.features);\n  });\n\ng.test('limits')\n  .desc('adapter/device.limits can not be passed as requiredLimits')\n  .params(u => u.combine('type', ['adapter', 'device'] as const))\n  .fn(async t => {\n    const { type } = t.params;\n    const obj = type === 'adapter' ? t.adapter : t.device;\n\n    const gpu = getGPU(null);\n    const adapter = await gpu.requestAdapter();\n    assert(!!adapter);\n    const device = await t.requestDeviceTracked(adapter, {\n      requiredLimits: obj.limits as unknown as Record<string, number>,\n    });\n    const defaultLimits = getDefaultLimitsForDevice(device);\n    for (const [key, { default: defaultLimit }] of Object.entries(defaultLimits)) {\n      if (isUnspecifiedLimit(key)) {\n        continue;\n      }\n      const actual = (device.limits as unknown as Record<string, number>)[key];\n      t.expect(\n        actual === defaultLimit,\n        `expected device.limits.${key}(${actual}) === ${defaultLimit}`\n      );\n    }\n  });\n\ng.test('readonly_properties')\n  .desc(\n    `\n    Test that setting a property with no setter throws.\n    `\n  )\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    'use strict'; // This makes setting a readonly property produce a TypeError.\n    const { type } = t.params;\n    const { getters, settable } = kResourceInfo[type];\n    const obj = createResource(t, type);\n    for (const getter of getters) {\n      const origValue = (obj as unknown as Record<string, unknown>)[getter];\n\n      // try setting it.\n      const isSettable = settable.includes(getter);\n      t.shouldThrow(\n        isSettable ? false : 'TypeError',\n        () => {\n          (obj as unknown as Record<string, string>)[getter] = 'test value';\n          // If we were able to set it, restore it.\n          (obj as unknown as Record<string, unknown>)[getter] = origValue;\n        },\n        {\n          message: `instanceof ${type}.${getter} = value ${\n            isSettable ? 'does not throw' : 'throws'\n          }`,\n        }\n      );\n    }\n  });\n\ng.test('getter_replacement')\n  .desc(\n    `\n    Test that replacing getters on class prototypes works\n\n    This is a common pattern for shims and debugging libraries so make sure this pattern works.\n    `\n  )\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const { getters } = kResourceInfo[type];\n\n    const obj = createResource(t, type);\n    for (const getter of getters) {\n      // Check it's not 'ownProperty`\n      const properties = Object.getOwnPropertyDescriptor(obj, getter);\n      t.expect(\n        properties === undefined,\n        `Object.getOwnPropertyDescriptor(instance of ${type}, '${getter}') === undefined`\n      );\n\n      // Check it's actually a getter that returns a non-function value.\n      const origValue = (obj as unknown as Record<string, () => unknown>)[getter];\n      t.expect(typeof origValue !== 'function', `instance of ${type}.${getter} !== 'function'`);\n\n      // check replacing the getter on constructor works.\n      const ctorPrototype = obj.constructor.prototype;\n      const origProperties = Object.getOwnPropertyDescriptor(ctorPrototype, getter);\n      assert(\n        !!origProperties,\n        `Object.getOwnPropertyDescriptor(${type}, '${getter}') !== undefined`\n      );\n      try {\n        Object.defineProperty(ctorPrototype, getter, {\n          get() {\n            return 'testGetterValue';\n          },\n        });\n        const value = (obj as unknown as Record<string, string>)[getter];\n        t.expect(\n          value === 'testGetterValue',\n          `replacing getter: '${getter}' on ${type} returns test value`\n        );\n      } finally {\n        Object.defineProperty(ctorPrototype, getter, origProperties);\n      }\n\n      // Check it turns the same value after restoring as before restoring.\n      const afterValue = (obj as unknown as Record<string, () => unknown>)[getter];\n      assert(afterValue === origValue, `able to restore getter for instance of ${type}.${getter}`);\n\n      // Check getOwnProperty also returns the value we got before.\n      assert(\n        Object.getOwnPropertyDescriptor(ctorPrototype, getter)!.get === origProperties.get,\n        `getOwnPropertyDescriptor(${type}, '${getter}').get is original function`\n      );\n    }\n  });\n\ng.test('method_replacement')\n  .desc(\n    `\n    Test that replacing methods on class prototypes works\n\n    This is a common pattern for shims and debugging libraries so make sure this pattern works.\n    `\n  )\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const { requiredKeys, getters, skipInCompatibility } = kResourceInfo[type];\n    t.skipIf(t.isCompatibility && !!skipInCompatibility, 'skipped in compatibility mode');\n\n    const gettersSet = new Set<string>(getters);\n    const methods = requiredKeys.filter(k => !gettersSet.has(k));\n\n    const obj = createResource(t, type);\n    for (const method of methods) {\n      const ctorPrototype = obj.constructor.prototype;\n      const origFunc = ctorPrototype[method];\n\n      t.expect(typeof origFunc === 'function', `${type}.prototype.${method} is a function`);\n\n      // Check the function the prototype and the one on the object are the same\n      t.expect(\n        (obj as unknown as Record<string, unknown>)[method] === origFunc,\n        `instance of ${type}.${method} === ${type}.prototype.${method}`\n      );\n\n      // Check replacing the method on constructor works.\n      try {\n        (ctorPrototype as unknown as Record<string, unknown>)[method] = function () {\n          return 'testMethodValue';\n        };\n        const value = (obj as unknown as Record<string, () => string>)[method]();\n        t.expect(\n          value === 'testMethodValue',\n          `replacing method: '${method}' on ${type} returns test value`\n        );\n      } finally {\n        (ctorPrototype as unknown as Record<string, unknown>)[method] = origFunc;\n      }\n\n      // Check the function the prototype and the one on the object are the same after restoring.\n      assert(\n        (obj as unknown as Record<string, unknown>)[method] === origFunc,\n        `instance of ${type}.${method} === ${type}.prototype.${method}`\n      );\n    }\n  });\n\ng.test('sameObject')\n  .desc(\n    `\n    Test that property that are supposed to return the sameObject do.\n    `\n  )\n  .params(u => u.combine('type', kResources))\n  .fn(t => {\n    const { type } = t.params;\n    const { sameObject } = kResourceInfo[type];\n    const obj = createResource(t, type);\n    for (const property of sameObject) {\n      const origValue1 = (obj as unknown as Record<string, Record<string, string>>)[property];\n      const origValue2 = (obj as unknown as Record<string, Record<string, string>>)[property];\n      t.expect(typeof origValue1 === 'object');\n      t.expect(typeof origValue2 === 'object');\n      // Seems like this should be enough if they are objects.\n      t.expect(origValue1 === origValue2);\n      // add a property\n      origValue1['foo'] = 'test';\n      // see that it appears on the object.\n      t.expect(origValue1.foo === 'test');\n      t.expect(origValue2.foo === 'test');\n      // Delete the property.\n      delete origValue2.foo;\n      // See it was removed.\n      assert(origValue1.foo === undefined);\n      assert(origValue2.foo === undefined);\n    }\n  });\n\nconst kClassInheritanceTests: { [key: string]: () => boolean } = {\n  GPUDevice: () => GPUDevice.prototype instanceof EventTarget,\n  GPUPipelineError: () => GPUPipelineError.prototype instanceof DOMException,\n  GPUValidationError: () => GPUValidationError.prototype instanceof GPUError,\n  GPUOutOfMemoryError: () => GPUOutOfMemoryError.prototype instanceof GPUError,\n  GPUInternalError: () => GPUInternalError.prototype instanceof GPUError,\n  GPUUncapturedErrorEvent: () => GPUUncapturedErrorEvent.prototype instanceof Event,\n} as const;\n\ng.test('inheritance')\n  .desc(\n    `\nTest that objects inherit from the correct base class\n\nThis is important because apps might patch the base class\nand expect instances of these classes to respond correctly.\n`\n  )\n  .params(u => u.combine('type', keysOf(kClassInheritanceTests)))\n  .fn(t => {\n    const fn = kClassInheritanceTests[t.params.type];\n    t.expect(fn(), fn.toString());\n  });\n\nconst kDispatchTests = {\n  async canPassEventThroughDevice(t: GPUTest) {\n    const result = await raceWithRejectOnTimeout(\n      new Promise(resolve => {\n        t.device.addEventListener('foo', resolve, { once: true });\n        t.device.dispatchEvent(new Event('foo'));\n      }),\n      500,\n      'timeout'\n    );\n    const event = result as Event;\n    t.expect(() => event instanceof Event, 'event');\n    t.expect(() => event.type === 'foo');\n  },\n  async canPassCustomEventThroughDevice(t: GPUTest) {\n    const result = await raceWithRejectOnTimeout(\n      new Promise(resolve => {\n        t.device.addEventListener('bar', resolve, { once: true });\n        t.device.dispatchEvent(new CustomEvent('bar'));\n      }),\n      500,\n      'timeout'\n    );\n    const event = result as CustomEvent;\n    t.expect(() => event instanceof CustomEvent);\n    t.expect(() => event instanceof Event);\n    t.expect(() => event.type === 'bar');\n  },\n  async patchingEventTargetAffectsDevice(t: GPUTest) {\n    let addEventListenerWasCalled = false;\n    let dispatchEventWasCalled = false;\n    let removeEventListenerWasCalled = false;\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const origFnAddEventListener = EventTarget.prototype.addEventListener;\n    EventTarget.prototype.addEventListener = function (\n      ...args: Parameters<typeof EventTarget.prototype.addEventListener>\n    ) {\n      addEventListenerWasCalled = true;\n      return origFnAddEventListener.call(this, ...args);\n    };\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const origFnDispatchEvent = EventTarget.prototype.dispatchEvent;\n    EventTarget.prototype.dispatchEvent = function (event: Event) {\n      dispatchEventWasCalled = true;\n      return origFnDispatchEvent.call(this, event);\n    };\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const origFnRemoveEventListener = EventTarget.prototype.removeEventListener;\n    EventTarget.prototype.removeEventListener = function (\n      ...args: Parameters<typeof EventTarget.prototype.removeEventListener>\n    ) {\n      removeEventListenerWasCalled = true;\n      return origFnRemoveEventListener.call(this, ...args);\n    };\n\n    try {\n      await raceWithRejectOnTimeout(\n        new Promise(resolve => {\n          t.device.addEventListener('foo', resolve);\n          t.device.dispatchEvent(new Event('foo'));\n          t.device.removeEventListener('foo', resolve);\n        }),\n        500,\n        'timeout'\n      );\n    } finally {\n      EventTarget.prototype.addEventListener = origFnAddEventListener;\n      EventTarget.prototype.dispatchEvent = origFnDispatchEvent;\n      EventTarget.prototype.removeEventListener = origFnRemoveEventListener;\n    }\n    t.expect(addEventListenerWasCalled, 'overriding EventTarget addEventListener worked');\n    t.expect(dispatchEventWasCalled, 'overriding EventTarget dispatchEvent worked');\n    t.expect(removeEventListenerWasCalled, 'overriding EventTarget removeEventListener worked');\n  },\n  async passingGPUUncapturedErrorEventWorksThoughEventTarget(t: GPUTest) {\n    const target = new EventTarget();\n    const result = await raceWithRejectOnTimeout(\n      new Promise(resolve => {\n        target.addEventListener('uncapturederror', resolve, { once: true });\n        target.dispatchEvent(\n          new GPUUncapturedErrorEvent('uncapturederror', {\n            error: new GPUValidationError('test error'),\n          })\n        );\n      }),\n      500,\n      'timeout'\n    );\n    const event = result as GPUUncapturedErrorEvent;\n    t.expect(() => event instanceof GPUUncapturedErrorEvent);\n    t.expect(() => event.error instanceof GPUValidationError);\n    t.expect(() => event.error.message === 'test error');\n  },\n} as const;\n\ng.test('device,EventTarget')\n  .desc(\n    `\nTest some repercussions of the fact that GPUDevice extends EventTarget\n`\n  )\n  .params(u => u.combine('test', keysOf(kDispatchTests)))\n  .fn(async t => {\n    await kDispatchTests[t.params.test](t);\n  });\n\nconst kAddEventListenerTests = {\n  EventHandler: async (t: GPUTest) => {\n    const result = await raceWithRejectOnTimeout(\n      new Promise(resolve => {\n        t.device.addEventListener('foo', resolve, { once: true });\n        t.device.dispatchEvent(new Event('foo'));\n      }),\n      500,\n      'timeout'\n    );\n    const event = result as Event;\n    t.expect(() => event instanceof Event, 'event');\n    t.expect(() => event.type === 'foo');\n  },\n  EventListener: async (t: GPUTest) => {\n    const result = await raceWithRejectOnTimeout(\n      new Promise(resolve => {\n        t.device.addEventListener(\n          'foo',\n          {\n            handleEvent: resolve,\n          },\n          { once: true }\n        );\n        t.device.dispatchEvent(new Event('foo'));\n      }),\n      500,\n      'timeout'\n    );\n    const event = result as Event;\n    t.expect(() => event instanceof Event, 'event');\n    t.expect(() => event.type === 'foo');\n  },\n} as const;\n\ng.test('device,addEventListener')\n  .desc(\n    `\nTest that addEventListener works with both an EventListener and an EventHandler\n\n* https://dom.spec.whatwg.org/#interface-eventtarget\n* https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler\n\n`\n  )\n  .params(u => u.combine('test', keysOf(kAddEventListenerTests)))\n  .fn(async t => {\n    await kAddEventListenerTests[t.params.test](t);\n  });\n"],"mappings":"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"}