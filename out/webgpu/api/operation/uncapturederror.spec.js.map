{"version":3,"file":"uncapturederror.spec.js","names":["description","makeTestGroup","kGeneratableErrorScopeFilters","ErrorTest","g","test","desc","params","u","combine","fn","t","useOnuncapturederror","errorType","uncapturedErrorEvent","expectUncapturedError","generateError","expect","isInstanceOfError","error","unimplemented"],"sources":["../../../../src/webgpu/api/operation/uncapturederror.spec.ts"],"sourcesContent":["export const description = `\nTests for GPUDevice.onuncapturederror / addEventListener('uncapturederror')\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { kGeneratableErrorScopeFilters } from '../../capability_info.js';\nimport { ErrorTest } from '../../error_test.js';\n\nexport const g = makeTestGroup(ErrorTest);\n\ng.test('iff_uncaptured')\n  .desc(\n    `{validation, out-of-memory} error should fire uncapturederror iff not captured by a scope.`\n  )\n  .params(u =>\n    u\n      .combine('useOnuncapturederror', [false, true])\n      .combine('errorType', kGeneratableErrorScopeFilters)\n  )\n  .fn(async t => {\n    const { useOnuncapturederror, errorType } = t.params;\n    const uncapturedErrorEvent = await t.expectUncapturedError(() => {\n      t.generateError(errorType);\n    }, useOnuncapturederror);\n    t.expect(t.isInstanceOfError(errorType, uncapturedErrorEvent.error));\n  });\n\ng.test('only_original_device_is_event_target')\n  .desc(\n    `Original GPUDevice objects are EventTargets and have onuncapturederror, but\ndeserialized GPUDevices do not.`\n  )\n  .unimplemented();\n\ng.test('uncapturederror_from_non_originating_thread')\n  .desc(\n    `Uncaptured errors on any thread should always propagate to the original GPUDevice object\n(since deserialized ones don't have EventTarget/onuncapturederror).`\n  )\n  .unimplemented();\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,yCAAyC;AACvE,SAASC,6BAA6B,QAAQ,0BAA0B;AACxE,SAASC,SAAS,QAAQ,qBAAqB;;AAE/C,OAAO,MAAMC,CAAC,GAAGH,aAAa,CAACE,SAAS,CAAC;;AAEzCC,CAAC,CAACC,IAAI,CAAC,gBAAgB,CAAC;AACrBC,IAAI;EACF;AACH,CAAC;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,sBAAsB,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9CA,OAAO,CAAC,WAAW,EAAEP,6BAA6B;AACvD,CAAC;AACAQ,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,MAAM,EAAEC,oBAAoB,EAAEC,SAAS,CAAC,CAAC,GAAGF,CAAC,CAACJ,MAAM;EACpD,MAAMO,oBAAoB,GAAG,MAAMH,CAAC,CAACI,qBAAqB,CAAC,MAAM;IAC/DJ,CAAC,CAACK,aAAa,CAACH,SAAS,CAAC;EAC5B,CAAC,EAAED,oBAAoB,CAAC;EACxBD,CAAC,CAACM,MAAM,CAACN,CAAC,CAACO,iBAAiB,CAACL,SAAS,EAAEC,oBAAoB,CAACK,KAAK,CAAC,CAAC;AACtE,CAAC,CAAC;;AAEJf,CAAC,CAACC,IAAI,CAAC,sCAAsC,CAAC;AAC3CC,IAAI;EACF;AACL;AACE,CAAC;AACAc,aAAa,CAAC,CAAC;;AAElBhB,CAAC,CAACC,IAAI,CAAC,6CAA6C,CAAC;AAClDC,IAAI;EACF;AACL;AACE,CAAC;AACAc,aAAa,CAAC,CAAC"}