{"version":3,"file":"render_bundle.spec.js","names":["description","makeTestGroup","AllFeaturesMaxLimitsGPUTest","ttu","g","makeRenderPipeline","device","blend","undefined","module","createShaderModule","code","pipeline","createRenderPipeline","layout","vertex","fragment","targets","format","makeRenderPass","encoder","view","pass","beginRenderPass","colorAttachments","loadOp","storeOp","makeTexture","t","createTextureTracked","size","usage","GPUTextureUsage","RENDER_ATTACHMENT","COPY_SRC","kColor0","R","G","B","A","kColor1","kColor0x3","kZero","test","desc","fn","bundleEncoder","createRenderBundleEncoder","colorFormats","setPipeline","draw","bundle","finish","texture","createCommandEncoder","createView","executeBundles","end","queue","submit","expectSingleColorWithTolerance","exp","bundleEncoder1","bundle1","bundleEncoder2","bundle2","expectSinglePixelComparisonsAreOkInTexture","coord","x","y","setViewport","color","srcFactor","dstFactor","operation","alpha"],"sources":["../../../../../../src/webgpu/api/operation/command_buffer/render/render_bundle.spec.ts"],"sourcesContent":["export const description = `\nEnsure that render bundles execute.\n- Test they run\n- Test they can be used multiple times\n  - in different passes\n  - in the same pass\n  - in the same executeBundles call\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { AllFeaturesMaxLimitsGPUTest, GPUTest } from '../../../../gpu_test.js';\nimport * as ttu from '../../../../texture_test_utils.js';\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsGPUTest);\n\n// Makes a render pipeline where we can select kColor0 or kColor1 by instance index\n// We can select top right triangle or bottom left triangle by vertex index\nfunction makeRenderPipeline(device: GPUDevice, blend: GPUBlendState | undefined = undefined) {\n  const module = device.createShaderModule({\n    code: `\n      struct Interop {\n         @builtin(position) pos: vec4f,\n         @location(0) @interpolate(flat, either) inst: u32,\n      }\n      @vertex fn vs(@builtin(vertex_index) vNdx: u32,\n                    @builtin(instance_index) inst: u32) -> Interop {\n        let pos = array(\n          vec2f(-1, -1), vec2f(1, -1), vec2f(-1, 1),\n          vec2f(-1,  1), vec2f(1, -1), vec2f( 1, 1),\n        );\n        return Interop(vec4f(pos[vNdx], 0, 1), inst);\n      }\n\n      @fragment fn fs(v: Interop) -> @location(0) vec4f {\n        // round these colors a little since different GPUs might go up or down a bit to rgba8unorm\n        let colors = array(\n          vec4f(1.1 / 255, 2.1 / 255, 3.1 / 255, 4.1 / 255),\n          vec4f(5.1 / 255, 6.1 / 255, 7.1 / 255, 8.1 / 255),\n        );\n        return colors[v.inst];\n      }\n    `,\n  });\n\n  const pipeline = device.createRenderPipeline({\n    layout: 'auto',\n    vertex: { module },\n    fragment: { module, targets: [{ format: 'rgba8unorm', blend }] },\n  });\n\n  return pipeline;\n}\n\nfunction makeRenderPass(encoder: GPUCommandEncoder, view: GPUTextureView) {\n  const pass = encoder.beginRenderPass({\n    colorAttachments: [\n      {\n        view,\n        loadOp: 'clear',\n        storeOp: 'store',\n      },\n    ],\n  });\n  return pass;\n}\n\nfunction makeTexture(t: GPUTest) {\n  return t.createTextureTracked({\n    size: [4, 4],\n    format: 'rgba8unorm',\n    usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC,\n  });\n}\n\nconst kColor0 = { R: 1 / 255, G: 2 / 255, B: 3 / 255, A: 4 / 255 };\nconst kColor1 = { R: 5 / 255, G: 6 / 255, B: 7 / 255, A: 8 / 255 };\nconst kColor0x3 = { R: kColor0.R * 3, G: kColor0.G * 3, B: kColor0.B * 3, A: kColor0.A * 3 };\nconst kZero = { R: 0, G: 0, B: 0, A: 0 };\n\ng.test('basic')\n  .desc(`Test a basic render bundle`)\n  .fn(t => {\n    const pipeline = makeRenderPipeline(t.device);\n\n    const bundleEncoder = t.device.createRenderBundleEncoder({\n      colorFormats: ['rgba8unorm'],\n    });\n    bundleEncoder.setPipeline(pipeline);\n    bundleEncoder.draw(6);\n    const bundle = bundleEncoder.finish();\n\n    const texture = makeTexture(t);\n\n    const encoder = t.device.createCommandEncoder();\n    const pass = makeRenderPass(encoder, texture.createView());\n    pass.executeBundles([bundle]);\n    pass.end();\n    t.device.queue.submit([encoder.finish()]);\n\n    ttu.expectSingleColorWithTolerance(t, texture, 'rgba8unorm', {\n      size: [4, 4, 1],\n      exp: kColor0,\n    });\n  });\n\ng.test('two_bundles')\n  .desc(`Test drawing 2 render bundles`)\n  .fn(t => {\n    const pipeline = makeRenderPipeline(t.device);\n\n    const bundleEncoder1 = t.device.createRenderBundleEncoder({\n      colorFormats: ['rgba8unorm'],\n    });\n    bundleEncoder1.setPipeline(pipeline);\n    bundleEncoder1.draw(3);\n    const bundle1 = bundleEncoder1.finish();\n\n    const bundleEncoder2 = t.device.createRenderBundleEncoder({\n      colorFormats: ['rgba8unorm'],\n    });\n    bundleEncoder2.setPipeline(pipeline);\n    bundleEncoder2.draw(3, 1, 3, 1);\n    const bundle2 = bundleEncoder2.finish();\n\n    const texture = makeTexture(t);\n\n    const encoder = t.device.createCommandEncoder();\n    const pass = makeRenderPass(encoder, texture.createView());\n    pass.executeBundles([bundle1, bundle2]);\n    pass.end();\n    t.device.queue.submit([encoder.finish()]);\n\n    ttu.expectSinglePixelComparisonsAreOkInTexture(t, { texture }, [\n      { coord: { x: 0, y: 3 }, exp: kColor0 },\n      { coord: { x: 3, y: 0 }, exp: kColor1 },\n    ]);\n  });\n\ng.test('one_bundle_used_multiple_times')\n  .desc(`Test drawing 1 render bundle multiple times using the viewport to select where`)\n  .fn(t => {\n    const pipeline = makeRenderPipeline(t.device);\n\n    const bundleEncoder = t.device.createRenderBundleEncoder({\n      colorFormats: ['rgba8unorm'],\n    });\n    bundleEncoder.setPipeline(pipeline);\n    bundleEncoder.draw(6);\n    const bundle = bundleEncoder.finish();\n\n    const texture = makeTexture(t);\n\n    const encoder = t.device.createCommandEncoder();\n    const pass = makeRenderPass(encoder, texture.createView());\n    pass.setViewport(0, 0, 1, 1, 0, 1);\n    pass.executeBundles([bundle]);\n    pass.setViewport(2, 0, 1, 1, 0, 1);\n    pass.executeBundles([bundle]);\n    pass.setViewport(0, 2, 1, 1, 0, 1);\n    pass.executeBundles([bundle]);\n    pass.setViewport(2, 2, 1, 1, 0, 1);\n    pass.executeBundles([bundle]);\n    pass.end();\n    t.device.queue.submit([encoder.finish()]);\n\n    ttu.expectSinglePixelComparisonsAreOkInTexture(t, { texture }, [\n      { coord: { x: 0, y: 0 }, exp: kColor0 },\n      { coord: { x: 2, y: 0 }, exp: kColor0 },\n      { coord: { x: 0, y: 2 }, exp: kColor0 },\n      { coord: { x: 2, y: 2 }, exp: kColor0 },\n      // Check a few places we should not have rendered.\n      { coord: { x: 1, y: 0 }, exp: kZero },\n      { coord: { x: 3, y: 0 }, exp: kZero },\n      { coord: { x: 0, y: 1 }, exp: kZero },\n      { coord: { x: 0, y: 3 }, exp: kZero },\n      { coord: { x: 3, y: 3 }, exp: kZero },\n    ]);\n  });\n\ng.test('one_bundle_used_multiple_times_same_executeBundles')\n  .desc(`Test drawing 1 render bundle multiple times using the same call to executeBundles`)\n  .fn(t => {\n    const pipeline = makeRenderPipeline(t.device, {\n      color: { srcFactor: 'one', dstFactor: 'one', operation: 'add' },\n      alpha: { srcFactor: 'one', dstFactor: 'one', operation: 'add' },\n    });\n\n    const bundleEncoder = t.device.createRenderBundleEncoder({\n      colorFormats: ['rgba8unorm'],\n    });\n    bundleEncoder.setPipeline(pipeline);\n    bundleEncoder.draw(6);\n    const bundle = bundleEncoder.finish();\n\n    const texture = makeTexture(t);\n\n    const encoder = t.device.createCommandEncoder();\n    const pass = makeRenderPass(encoder, texture.createView());\n    pass.executeBundles([bundle, bundle, bundle]);\n    pass.end();\n    t.device.queue.submit([encoder.finish()]);\n\n    // Check the result is kColor0 added 3 times.\n    ttu.expectSingleColorWithTolerance(t, texture, 'rgba8unorm', {\n      size: [4, 4, 1],\n      exp: kColor0x3,\n    });\n  });\n"],"mappings":"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"}