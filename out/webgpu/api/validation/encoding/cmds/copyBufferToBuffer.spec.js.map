{"version":3,"sources":["../../../../../../src/webgpu/api/validation/encoding/cmds/copyBufferToBuffer.spec.ts"],"names":["description","makeTestGroup","kBufferUsages","kMaxSafeMultipleOf8","ValidationTest","F","TestCopyBufferToBuffer","options","srcBuffer","srcOffset","dstBuffer","dstOffset","copySize","isSuccess","commandEncoder","device","createCommandEncoder","copyBufferToBuffer","expectValidationError","finish","g","test","fn","t","validBuffer","createBuffer","size","usage","GPUBufferUsage","COPY_SRC","COPY_DST","errorBuffer","getErrorBuffer","desc","paramsSubcasesOnly","srcMismatched","dstMismatched","unimplemented","u","combine","srcUsage","dstUsage","params","_isSuccess","buffer"],"mappings":";AAAA;AACA,GADA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAvBO,CAyBP,SAASC,aAAT,QAA8B,+CAA9B;AACA,SAASC,aAAT,QAA8B,gCAA9B;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,SAASC,cAAT,QAA+B,0BAA/B;;AAEA,MAAMC,CAAN,SAAgBD,cAAhB,CAA+B;AAC7BE,EAAAA,sBAAsB,CAACC,OAAD;;;;;;;AAOb;AACP,UAAM,EAAEC,SAAF,EAAaC,SAAb,EAAwBC,SAAxB,EAAmCC,SAAnC,EAA8CC,QAA9C,EAAwDC,SAAxD,KAAsEN,OAA5E;;AAEA,UAAMO,cAAc,GAAG,KAAKC,MAAL,CAAYC,oBAAZ,EAAvB;AACAF,IAAAA,cAAc,CAACG,kBAAf,CAAkCT,SAAlC,EAA6CC,SAA7C,EAAwDC,SAAxD,EAAmEC,SAAnE,EAA8EC,QAA9E;;AAEA,SAAKM,qBAAL,CAA2B,MAAM;AAC/BJ,MAAAA,cAAc,CAACK,MAAf;AACD,KAFD,EAEG,CAACN,SAFJ;AAGD,GAjB4B;;;AAoB/B,OAAO,MAAMO,CAAC,GAAGnB,aAAa,CAACI,CAAD,CAAvB;;AAEPe,CAAC,CAACC,IAAF,CAAO,0BAAP,EAAmCC,EAAnC,CAAsC,OAAMC,CAAN,KAAW;AAC/C,QAAMC,WAAW,GAAGD,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACxCC,IAAAA,IAAI,EAAE,EADkC;AAExCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,GAA0BD,cAAc,CAACE,QAFR,EAAtB,CAApB;;;AAKA,QAAMC,WAAW,GAAGR,CAAC,CAACS,cAAF,EAApB;;AAEAT,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SAAS,EAAEuB,WADY;AAEvBtB,IAAAA,SAAS,EAAE,CAFY;AAGvBC,IAAAA,SAAS,EAAEc,WAHY;AAIvBb,IAAAA,SAAS,EAAE,CAJY;AAKvBC,IAAAA,QAAQ,EAAE,CALa;AAMvBC,IAAAA,SAAS,EAAE,KANY,EAAzB;;;AASAU,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SAAS,EAAEgB,WADY;AAEvBf,IAAAA,SAAS,EAAE,CAFY;AAGvBC,IAAAA,SAAS,EAAEqB,WAHY;AAIvBpB,IAAAA,SAAS,EAAE,CAJY;AAKvBC,IAAAA,QAAQ,EAAE,CALa;AAMvBC,IAAAA,SAAS,EAAE,KANY,EAAzB;;AAQD,CAzBD;;AA2BAO,CAAC,CAACC,IAAF,CAAO,wBAAP;AACGY,IADH;AAEI,qGAFJ;;AAIGC,kBAJH,CAIsB;AAClB,EAAEC,aAAa,EAAE,KAAjB,EAAwBC,aAAa,EAAE,KAAvC,EADkB,EAC8B;AAChD,EAAED,aAAa,EAAE,IAAjB,EAAuBC,aAAa,EAAE,KAAtC,EAFkB;AAGlB,EAAED,aAAa,EAAE,KAAjB,EAAwBC,aAAa,EAAE,IAAvC,EAHkB,CAJtB;;AASGC,aATH;;AAWAjB,CAAC,CAACC,IAAF,CAAO,cAAP;AACGa,kBADH,CACsB,CAAAI,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,UADX,EACuBrC,aADvB;AAEGqC,OAFH,CAEW,UAFX,EAEuBrC,aAFvB,CAFJ;;AAMGoB,EANH,CAMM,OAAMC,CAAN,KAAW;AACb,QAAM,EAAEiB,QAAF,EAAYC,QAAZ,KAAyBlB,CAAC,CAACmB,MAAjC;;AAEA,QAAMlC,SAAS,GAAGe,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEa,QAF+B,EAAtB,CAAlB;;AAIA,QAAM9B,SAAS,GAAGa,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEc,QAF+B,EAAtB,CAAlB;;;AAKA,QAAM5B,SAAS,GAAG2B,QAAQ,KAAKZ,cAAc,CAACC,QAA5B,IAAwCY,QAAQ,KAAKb,cAAc,CAACE,QAAtF;;AAEAP,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SADuB;AAEvBC,IAAAA,SAAS,EAAE,CAFY;AAGvBC,IAAAA,SAHuB;AAIvBC,IAAAA,SAAS,EAAE,CAJY;AAKvBC,IAAAA,QAAQ,EAAE,CALa;AAMvBC,IAAAA,SANuB,EAAzB;;AAQD,CA5BH;;AA8BAO,CAAC,CAACC,IAAF,CAAO,qBAAP;AACGa,kBADH,CACsB;AAClB,EAAEtB,QAAQ,EAAE,CAAZ,EAAe+B,UAAU,EAAE,IAA3B,EADkB;AAElB,EAAE/B,QAAQ,EAAE,CAAZ,EAAe+B,UAAU,EAAE,KAA3B,EAFkB;AAGlB,EAAE/B,QAAQ,EAAE,CAAZ,EAAe+B,UAAU,EAAE,IAA3B,EAHkB;AAIlB,EAAE/B,QAAQ,EAAE,CAAZ,EAAe+B,UAAU,EAAE,KAA3B,EAJkB;AAKlB,EAAE/B,QAAQ,EAAE,CAAZ,EAAe+B,UAAU,EAAE,IAA3B,EALkB,CADtB;;AAQGrB,EARH,CAQM,OAAMC,CAAN,KAAW;AACb,QAAM,EAAEX,QAAF,EAAY+B,UAAU,EAAE9B,SAAxB,KAAsCU,CAAC,CAACmB,MAA9C;;AAEA,QAAMlC,SAAS,GAAGe,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAFgB,EAAtB,CAAlB;;AAIA,QAAMnB,SAAS,GAAGa,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACE,QAFgB,EAAtB,CAAlB;;;AAKAP,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SADuB;AAEvBC,IAAAA,SAAS,EAAE,CAFY;AAGvBC,IAAAA,SAHuB;AAIvBC,IAAAA,SAAS,EAAE,CAJY;AAKvBC,IAAAA,QALuB;AAMvBC,IAAAA,SANuB,EAAzB;;AAQD,CA5BH;;AA8BAO,CAAC,CAACC,IAAF,CAAO,uBAAP;AACGa,kBADH,CACsB;AAClB,EAAEzB,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,IAA1C,EADkB;AAElB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,KAA1C,EAFkB;AAGlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,IAA1C,EAHkB;AAIlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,KAA1C,EAJkB;AAKlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,IAA1C,EALkB;AAMlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,KAA1C,EANkB;AAOlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,IAA1C,EAPkB;AAQlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,KAA1C,EARkB;AASlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,IAA1C,EATkB;AAUlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BgC,UAAU,EAAE,IAA1C,EAVkB,CADtB;;AAaGrB,EAbH,CAaM,OAAMC,CAAN,KAAW;AACb,QAAM,EAAEd,SAAF,EAAaE,SAAb,EAAwBgC,UAAU,EAAE9B,SAApC,KAAkDU,CAAC,CAACmB,MAA1D;;AAEA,QAAMlC,SAAS,GAAGe,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAFgB,EAAtB,CAAlB;;AAIA,QAAMnB,SAAS,GAAGa,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACE,QAFgB,EAAtB,CAAlB;;;AAKAP,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SADuB;AAEvBC,IAAAA,SAFuB;AAGvBC,IAAAA,SAHuB;AAIvBC,IAAAA,SAJuB;AAKvBC,IAAAA,QAAQ,EAAE,CALa;AAMvBC,IAAAA,SANuB,EAAzB;;AAQD,CAjCH;;AAmCAO,CAAC,CAACC,IAAF,CAAO,eAAP;AACGa,kBADH,CACsB;AAClB,EAAEzB,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAET,mBAAxC,EADkB;AAElB,EAAEM,SAAS,EAAE,EAAb,EAAiBE,SAAS,EAAE,CAA5B,EAA+BC,QAAQ,EAAET,mBAAzC,EAFkB;AAGlB,EAAEM,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,EAA3B,EAA+BC,QAAQ,EAAET,mBAAzC,EAHkB;AAIlB,EAAEM,SAAS,EAAEN,mBAAb,EAAkCQ,SAAS,EAAE,CAA7C,EAAgDC,QAAQ,EAAE,EAA1D,EAJkB;AAKlB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAER,mBAA3B,EAAgDS,QAAQ,EAAE,EAA1D,EALkB;AAMlB,EAAEH,SAAS,EAAEN,mBAAb,EAAkCQ,SAAS,EAAE,CAA7C,EAAgDC,QAAQ,EAAET,mBAA1D,EANkB;AAOlB,EAAEM,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAER,mBAA3B,EAAgDS,QAAQ,EAAET,mBAA1D,EAPkB;AAQlB;AACEM,EAAAA,SAAS,EAAEN,mBADb;AAEEQ,EAAAA,SAAS,EAAER,mBAFb;AAGES,EAAAA,QAAQ,EAAET,mBAHZ,EARkB,CADtB;;;AAeGmB,EAfH,CAeM,OAAMC,CAAN,KAAW;AACb,QAAM,EAAEd,SAAF,EAAaE,SAAb,EAAwBC,QAAxB,KAAqCW,CAAC,CAACmB,MAA7C;;AAEA,QAAMlC,SAAS,GAAGe,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAFgB,EAAtB,CAAlB;;AAIA,QAAMnB,SAAS,GAAGa,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACE,QAFgB,EAAtB,CAAlB;;;AAKAP,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SADuB;AAEvBC,IAAAA,SAFuB;AAGvBC,IAAAA,SAHuB;AAIvBC,IAAAA,SAJuB;AAKvBC,IAAAA,QALuB;AAMvBC,IAAAA,SAAS,EAAE,KANY,EAAzB;;AAQD,CAnCH;;AAqCAO,CAAC,CAACC,IAAF,CAAO,oBAAP;AACGa,kBADH,CACsB;AAClB,EAAEzB,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAE,EAAxC,EAA4C+B,UAAU,EAAE,IAAxD,EADkB;AAElB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAE,EAAxC,EAFkB;AAGlB,EAAEH,SAAS,EAAE,EAAb,EAAiBE,SAAS,EAAE,CAA5B,EAA+BC,QAAQ,EAAE,CAAzC,EAHkB;AAIlB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,EAA3B,EAA+BC,QAAQ,EAAE,CAAzC,EAJkB;AAKlB,EAAEH,SAAS,EAAE,EAAb,EAAiBE,SAAS,EAAE,CAA5B,EAA+BC,QAAQ,EAAE,CAAzC,EALkB;AAMlB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,EAA3B,EAA+BC,QAAQ,EAAE,CAAzC,EANkB;AAOlB,EAAEH,SAAS,EAAE,EAAb,EAAiBE,SAAS,EAAE,CAA5B,EAA+BC,QAAQ,EAAE,EAAzC,EAPkB;AAQlB,EAAEH,SAAS,EAAE,EAAb,EAAiBE,SAAS,EAAE,CAA5B,EAA+BC,QAAQ,EAAE,EAAzC,EAA6C+B,UAAU,EAAE,IAAzD,EARkB;AASlB,EAAElC,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,EAA3B,EAA+BC,QAAQ,EAAE,EAAzC,EATkB;AAUlB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,EAA3B,EAA+BC,QAAQ,EAAE,EAAzC,EAA6C+B,UAAU,EAAE,IAAzD,EAVkB,CADtB;;AAaGrB,EAbH,CAaM,OAAMC,CAAN,KAAW;AACb,QAAM,EAAEd,SAAF,EAAaE,SAAb,EAAwBC,QAAxB,EAAkC+B,UAAU,GAAG,KAA/C,KAAyDpB,CAAC,CAACmB,MAAjE;;AAEA,QAAMlC,SAAS,GAAGe,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAFgB,EAAtB,CAAlB;;AAIA,QAAMnB,SAAS,GAAGa,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACtCC,IAAAA,IAAI,EAAE,EADgC;AAEtCC,IAAAA,KAAK,EAAEC,cAAc,CAACE,QAFgB,EAAtB,CAAlB;;;AAKAP,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SADuB;AAEvBC,IAAAA,SAFuB;AAGvBC,IAAAA,SAHuB;AAIvBC,IAAAA,SAJuB;AAKvBC,IAAAA,QALuB;AAMvBC,IAAAA,SAAS,EAAE8B,UANY,EAAzB;;AAQD,CAjCH;;AAmCAvB,CAAC,CAACC,IAAF,CAAO,yBAAP;AACGa,kBADH,CACsB;AAClB,EAAEzB,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAE,CAAxC,EADkB;AAElB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAE,CAAxC,EAFkB;AAGlB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAE,CAAxC,EAHkB;AAIlB,EAAEH,SAAS,EAAE,CAAb,EAAgBE,SAAS,EAAE,CAA3B,EAA8BC,QAAQ,EAAE,CAAxC,EAJkB,CADtB;;AAOGU,EAPH,CAOM,OAAMC,CAAN,KAAW;AACb,QAAM,EAAEd,SAAF,EAAaE,SAAb,EAAwBC,QAAxB,KAAqCW,CAAC,CAACmB,MAA7C;;AAEA,QAAME,MAAM,GAAGrB,CAAC,CAACR,MAAF,CAASU,YAAT,CAAsB;AACnCC,IAAAA,IAAI,EAAE,EAD6B;AAEnCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,GAA0BD,cAAc,CAACE,QAFb,EAAtB,CAAf;;;AAKAP,EAAAA,CAAC,CAACjB,sBAAF,CAAyB;AACvBE,IAAAA,SAAS,EAAEoC,MADY;AAEvBnC,IAAAA,SAFuB;AAGvBC,IAAAA,SAAS,EAAEkC,MAHY;AAIvBjC,IAAAA,SAJuB;AAKvBC,IAAAA,QALuB;AAMvBC,IAAAA,SAAS,EAAE,KANY,EAAzB;;AAQD,CAvBH","sourcesContent":["export const description = `\ncopyBufferToBuffer tests.\n\nTest Plan:\n* Buffer is valid/invalid\n  - the source buffer is invalid\n  - the destination buffer is invalid\n* Buffer usages\n  - the source buffer is created without GPUBufferUsage::COPY_SRC\n  - the destination buffer is created without GPUBufferUsage::COPY_DEST\n* CopySize\n  - copySize is not a multiple of 4\n  - copySize is 0\n* copy offsets\n  - sourceOffset is not a multiple of 4\n  - destinationOffset is not a multiple of 4\n* Arthimetic overflow\n  - (sourceOffset + copySize) is overflow\n  - (destinationOffset + copySize) is overflow\n* Out of bounds\n  - (sourceOffset + copySize) > size of source buffer\n  - (destinationOffset + copySize) > size of destination buffer\n* Source buffer and destination buffer are the same buffer\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { kBufferUsages } from '../../../../capability_info.js';\nimport { kMaxSafeMultipleOf8 } from '../../../../util/math.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nclass F extends ValidationTest {\n  TestCopyBufferToBuffer(options: {\n    srcBuffer: GPUBuffer;\n    srcOffset: number;\n    dstBuffer: GPUBuffer;\n    dstOffset: number;\n    copySize: number;\n    isSuccess: boolean;\n  }): void {\n    const { srcBuffer, srcOffset, dstBuffer, dstOffset, copySize, isSuccess } = options;\n\n    const commandEncoder = this.device.createCommandEncoder();\n    commandEncoder.copyBufferToBuffer(srcBuffer, srcOffset, dstBuffer, dstOffset, copySize);\n\n    this.expectValidationError(() => {\n      commandEncoder.finish();\n    }, !isSuccess);\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('copy_with_invalid_buffer').fn(async t => {\n  const validBuffer = t.device.createBuffer({\n    size: 16,\n    usage: GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST,\n  });\n\n  const errorBuffer = t.getErrorBuffer();\n\n  t.TestCopyBufferToBuffer({\n    srcBuffer: errorBuffer,\n    srcOffset: 0,\n    dstBuffer: validBuffer,\n    dstOffset: 0,\n    copySize: 8,\n    isSuccess: false,\n  });\n\n  t.TestCopyBufferToBuffer({\n    srcBuffer: validBuffer,\n    srcOffset: 0,\n    dstBuffer: errorBuffer,\n    dstOffset: 0,\n    copySize: 8,\n    isSuccess: false,\n  });\n});\n\ng.test('buffer,device_mismatch')\n  .desc(\n    'Tests copyBufferToBuffer cannot be called with src buffer or dst buffer created from another device'\n  )\n  .paramsSubcasesOnly([\n    { srcMismatched: false, dstMismatched: false }, // control case\n    { srcMismatched: true, dstMismatched: false },\n    { srcMismatched: false, dstMismatched: true },\n  ] as const)\n  .unimplemented();\n\ng.test('buffer_usage')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('srcUsage', kBufferUsages)\n      .combine('dstUsage', kBufferUsages)\n  )\n  .fn(async t => {\n    const { srcUsage, dstUsage } = t.params;\n\n    const srcBuffer = t.device.createBuffer({\n      size: 16,\n      usage: srcUsage,\n    });\n    const dstBuffer = t.device.createBuffer({\n      size: 16,\n      usage: dstUsage,\n    });\n\n    const isSuccess = srcUsage === GPUBufferUsage.COPY_SRC && dstUsage === GPUBufferUsage.COPY_DST;\n\n    t.TestCopyBufferToBuffer({\n      srcBuffer,\n      srcOffset: 0,\n      dstBuffer,\n      dstOffset: 0,\n      copySize: 8,\n      isSuccess,\n    });\n  });\n\ng.test('copy_size_alignment')\n  .paramsSubcasesOnly([\n    { copySize: 0, _isSuccess: true },\n    { copySize: 2, _isSuccess: false },\n    { copySize: 4, _isSuccess: true },\n    { copySize: 5, _isSuccess: false },\n    { copySize: 8, _isSuccess: true },\n  ] as const)\n  .fn(async t => {\n    const { copySize, _isSuccess: isSuccess } = t.params;\n\n    const srcBuffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_SRC,\n    });\n    const dstBuffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_DST,\n    });\n\n    t.TestCopyBufferToBuffer({\n      srcBuffer,\n      srcOffset: 0,\n      dstBuffer,\n      dstOffset: 0,\n      copySize,\n      isSuccess,\n    });\n  });\n\ng.test('copy_offset_alignment')\n  .paramsSubcasesOnly([\n    { srcOffset: 0, dstOffset: 0, _isSuccess: true },\n    { srcOffset: 2, dstOffset: 0, _isSuccess: false },\n    { srcOffset: 4, dstOffset: 0, _isSuccess: true },\n    { srcOffset: 5, dstOffset: 0, _isSuccess: false },\n    { srcOffset: 8, dstOffset: 0, _isSuccess: true },\n    { srcOffset: 0, dstOffset: 2, _isSuccess: false },\n    { srcOffset: 0, dstOffset: 4, _isSuccess: true },\n    { srcOffset: 0, dstOffset: 5, _isSuccess: false },\n    { srcOffset: 0, dstOffset: 8, _isSuccess: true },\n    { srcOffset: 4, dstOffset: 4, _isSuccess: true },\n  ] as const)\n  .fn(async t => {\n    const { srcOffset, dstOffset, _isSuccess: isSuccess } = t.params;\n\n    const srcBuffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_SRC,\n    });\n    const dstBuffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_DST,\n    });\n\n    t.TestCopyBufferToBuffer({\n      srcBuffer,\n      srcOffset,\n      dstBuffer,\n      dstOffset,\n      copySize: 8,\n      isSuccess,\n    });\n  });\n\ng.test('copy_overflow')\n  .paramsSubcasesOnly([\n    { srcOffset: 0, dstOffset: 0, copySize: kMaxSafeMultipleOf8 },\n    { srcOffset: 16, dstOffset: 0, copySize: kMaxSafeMultipleOf8 },\n    { srcOffset: 0, dstOffset: 16, copySize: kMaxSafeMultipleOf8 },\n    { srcOffset: kMaxSafeMultipleOf8, dstOffset: 0, copySize: 16 },\n    { srcOffset: 0, dstOffset: kMaxSafeMultipleOf8, copySize: 16 },\n    { srcOffset: kMaxSafeMultipleOf8, dstOffset: 0, copySize: kMaxSafeMultipleOf8 },\n    { srcOffset: 0, dstOffset: kMaxSafeMultipleOf8, copySize: kMaxSafeMultipleOf8 },\n    {\n      srcOffset: kMaxSafeMultipleOf8,\n      dstOffset: kMaxSafeMultipleOf8,\n      copySize: kMaxSafeMultipleOf8,\n    },\n  ] as const)\n  .fn(async t => {\n    const { srcOffset, dstOffset, copySize } = t.params;\n\n    const srcBuffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_SRC,\n    });\n    const dstBuffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_DST,\n    });\n\n    t.TestCopyBufferToBuffer({\n      srcBuffer,\n      srcOffset,\n      dstBuffer,\n      dstOffset,\n      copySize,\n      isSuccess: false,\n    });\n  });\n\ng.test('copy_out_of_bounds')\n  .paramsSubcasesOnly([\n    { srcOffset: 0, dstOffset: 0, copySize: 32, _isSuccess: true },\n    { srcOffset: 0, dstOffset: 0, copySize: 36 },\n    { srcOffset: 36, dstOffset: 0, copySize: 4 },\n    { srcOffset: 0, dstOffset: 36, copySize: 4 },\n    { srcOffset: 36, dstOffset: 0, copySize: 0 },\n    { srcOffset: 0, dstOffset: 36, copySize: 0 },\n    { srcOffset: 20, dstOffset: 0, copySize: 16 },\n    { srcOffset: 20, dstOffset: 0, copySize: 12, _isSuccess: true },\n    { srcOffset: 0, dstOffset: 20, copySize: 16 },\n    { srcOffset: 0, dstOffset: 20, copySize: 12, _isSuccess: true },\n  ] as const)\n  .fn(async t => {\n    const { srcOffset, dstOffset, copySize, _isSuccess = false } = t.params;\n\n    const srcBuffer = t.device.createBuffer({\n      size: 32,\n      usage: GPUBufferUsage.COPY_SRC,\n    });\n    const dstBuffer = t.device.createBuffer({\n      size: 32,\n      usage: GPUBufferUsage.COPY_DST,\n    });\n\n    t.TestCopyBufferToBuffer({\n      srcBuffer,\n      srcOffset,\n      dstBuffer,\n      dstOffset,\n      copySize,\n      isSuccess: _isSuccess,\n    });\n  });\n\ng.test('copy_within_same_buffer')\n  .paramsSubcasesOnly([\n    { srcOffset: 0, dstOffset: 8, copySize: 4 },\n    { srcOffset: 8, dstOffset: 0, copySize: 4 },\n    { srcOffset: 0, dstOffset: 4, copySize: 8 },\n    { srcOffset: 4, dstOffset: 0, copySize: 8 },\n  ] as const)\n  .fn(async t => {\n    const { srcOffset, dstOffset, copySize } = t.params;\n\n    const buffer = t.device.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST,\n    });\n\n    t.TestCopyBufferToBuffer({\n      srcBuffer: buffer,\n      srcOffset,\n      dstBuffer: buffer,\n      dstOffset,\n      copySize,\n      isSuccess: false,\n    });\n  });\n"],"file":"copyBufferToBuffer.spec.js"}