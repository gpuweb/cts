{"version":3,"file":"dynamic_state.spec.js","names":["description","makeTestGroup","nextAfterF32","AllFeaturesMaxLimitsValidationTest","F","testViewportCall","success","v","attachmentSize","width","height","depthOrArrayLayers","attachment","createTextureTracked","format","size","usage","GPUTextureUsage","RENDER_ATTACHMENT","encoder","device","createCommandEncoder","pass","beginRenderPass","colorAttachments","view","createView","loadOp","storeOp","setViewport","x","y","w","h","minDepth","maxDepth","end","expectValidationError","finish","testScissorCall","s","shouldThrow","setScissorRect","createDummyRenderPassEncoder","g","test","desc","paramsSubcasesOnly","fn","t","params","attachmentWidth","attachmentHeight","u","combine","combineWithParams","om","od","sd","_success","dimension","maxViewportSize","limits","maxTextureDimension2D","xy","wh","dx","dy","dw","dh","r","b","a","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","encoders","setBlendConstant","value","setStencilReference"],"sources":["../../../../../../../src/webgpu/api/validation/encoding/cmds/render/dynamic_state.spec.ts"],"sourcesContent":["export const description = `\nAPI validation tests for dynamic state commands (setViewport/ScissorRect/BlendColor...).\n\nTODO: ensure existing tests cover these notes. Note many of these may be operation tests instead.\n> - setViewport\n>     - {x, y} = {0, invalid values if any}\n>     - {width, height, minDepth, maxDepth} = {\n>         - least possible value that's valid\n>         - greatest possible negative value that's invalid\n>         - greatest possible positive value that's valid\n>         - least possible positive value that's invalid if any\n>         - }\n>     - minDepth {<, =, >} maxDepth\n> - setScissorRect\n>     - {width, height} = 0\n>     - {x+width, y+height} = attachment size + 1\n> - setBlendConstant\n>     - color {slightly, very} out of range\n>     - used with a simple pipeline that {does, doesn't} use it\n> - setStencilReference\n>     - {0, max}\n>     - used with a simple pipeline that {does, doesn't} use it\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { nextAfterF32 } from '../../../../../util/math.js';\nimport { AllFeaturesMaxLimitsValidationTest } from '../../../validation_test.js';\n\ninterface ViewportCall {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  minDepth: number;\n  maxDepth: number;\n}\n\ninterface ScissorCall {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\n\nclass F extends AllFeaturesMaxLimitsValidationTest {\n  testViewportCall(\n    success: boolean,\n    v: ViewportCall,\n    attachmentSize: GPUExtent3D = { width: 1, height: 1, depthOrArrayLayers: 1 }\n  ) {\n    const attachment = this.createTextureTracked({\n      format: 'rgba8unorm',\n      size: attachmentSize,\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n    });\n\n    const encoder = this.device.createCommandEncoder();\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n        {\n          view: attachment.createView(),\n          loadOp: 'load',\n          storeOp: 'store',\n        },\n      ],\n    });\n    pass.setViewport(v.x, v.y, v.w, v.h, v.minDepth, v.maxDepth);\n    pass.end();\n\n    this.expectValidationError(() => {\n      encoder.finish();\n    }, !success);\n  }\n\n  testScissorCall(\n    success: boolean | 'type-error',\n    s: ScissorCall,\n    attachmentSize: GPUExtent3D = { width: 1, height: 1, depthOrArrayLayers: 1 }\n  ) {\n    const attachment = this.createTextureTracked({\n      format: 'rgba8unorm',\n      size: attachmentSize,\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n    });\n\n    const encoder = this.device.createCommandEncoder();\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n        {\n          view: attachment.createView(),\n          loadOp: 'load',\n          storeOp: 'store',\n        },\n      ],\n    });\n    if (success === 'type-error') {\n      this.shouldThrow('TypeError', () => {\n        pass.setScissorRect(s.x, s.y, s.w, s.h);\n      });\n    } else {\n      pass.setScissorRect(s.x, s.y, s.w, s.h);\n      pass.end();\n\n      this.expectValidationError(() => {\n        encoder.finish();\n      }, !success);\n    }\n  }\n\n  createDummyRenderPassEncoder(): { encoder: GPUCommandEncoder; pass: GPURenderPassEncoder } {\n    const attachment = this.createTextureTracked({\n      format: 'rgba8unorm',\n      size: [1, 1, 1],\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n    });\n\n    const encoder = this.device.createCommandEncoder();\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n        {\n          view: attachment.createView(),\n          loadOp: 'load',\n          storeOp: 'store',\n        },\n      ],\n    });\n\n    return { encoder, pass };\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('setViewport,width_height_nonnegative')\n  .desc(\n    `Test that the width and height parameters of setViewport must be non-negative.\n\nTODO Test -0 (it should be valid) but can't be tested because the harness complains about duplicate parameters.\nTODO Test the first value smaller than -0`\n  )\n  .paramsSubcasesOnly([\n    // Control case: everything to 0 is ok, covers the empty viewport case.\n    { x: 0, y: 0, w: 0, h: 0 },\n\n    // Negative width/height is invalid\n    { x: 0, y: 0, w: -1, h: 0 },\n    { x: 0, y: 0, w: 0, h: -1 },\n\n    // Negative width/height is invalid even if the resulting bounds are positive\n    { x: 1, y: 0, w: -1, h: 0 },\n    { x: 0, y: 1, w: 0, h: -1 },\n  ])\n  .fn(t => {\n    const { x, y, w, h } = t.params;\n    const success = w >= 0 && h >= 0;\n    t.testViewportCall(success, { x, y, w, h, minDepth: 0, maxDepth: 1 });\n  });\n\ng.test('setViewport,exceeds_attachment_size')\n  .desc(`Test that the viewport can exceed the attachment size`)\n  .paramsSubcasesOnly([\n    { attachmentWidth: 3, attachmentHeight: 3 },\n    { attachmentWidth: 1024, attachmentHeight: 1024 },\n  ])\n  .fn(t => {\n    const { attachmentWidth, attachmentHeight } = t.params;\n    t.testViewportCall(\n      true,\n      { x: 0, y: 0, w: attachmentWidth + 1, h: attachmentHeight + 1, minDepth: 0, maxDepth: 1 },\n      { width: attachmentWidth, height: attachmentHeight, depthOrArrayLayers: 1 }\n    );\n  });\n\ng.test('setViewport,xy_rect_contained_in_bounds')\n  .desc(\n    `Test that the rectangle defined by x, y, width, height must be contained in the maximum viewport bounds\nand that the viewport size cannot exceed the maximum.`\n  )\n  .paramsSubcasesOnly(u =>\n    u.combine('dimension', [0, 1]).combineWithParams([\n      // Control case: max viewport is valid.\n      { om: 0, od: 0, sd: 0, _success: true },\n\n      // Other valid cases\n      { om: -1, od: 0, sd: 0, _success: true },\n      { om: -2, od: 0, sd: 0, _success: true },\n      { om: 1, od: -1, sd: 0, _success: true },\n      { om: 0, od: -1, sd: 0, _success: true },\n      { om: 0, od: 1, sd: 0, _success: true },\n      { om: 1, od: 0, sd: -1, _success: true },\n\n      // Cases that go outside the allowed bounds\n      { om: -2, od: -1, sd: 0, _success: false },\n      { om: 1, od: 0, sd: 0, _success: false },\n      { om: 1, od: 1, sd: -1, _success: false },\n      { om: 1, od: 'negative', sd: 0, _success: false },\n\n      // Case that exceeds the max viewport size\n      { om: 0, od: 0, sd: 1, _success: false },\n      { om: 0, od: 0, sd: 'positive', _success: false },\n    ])\n  )\n  .fn(t => {\n    const { dimension, om, od, sd, _success } = t.params;\n\n    const maxViewportSize = t.device.limits.maxTextureDimension2D;\n\n    const xy = [0, 0];\n    const wh = [maxViewportSize, maxViewportSize];\n\n    xy[dimension] = maxViewportSize * om;\n\n    if (od === 'negative' || od === 'positive') {\n      xy[dimension] = nextAfterF32(xy[dimension], od, 'no-flush');\n    } else {\n      xy[dimension] += od as number;\n    }\n\n    if (sd === 'negative' || sd === 'positive') {\n      wh[dimension] = nextAfterF32(wh[dimension], sd, 'no-flush');\n    } else {\n      wh[dimension] += sd as number;\n    }\n\n    const x = xy[0];\n    const y = xy[1];\n    const w = wh[0];\n    const h = wh[1];\n\n    t.testViewportCall(_success, { x, y, w, h, minDepth: 0, maxDepth: 1 });\n  });\n\ng.test('setViewport,depth_rangeAndOrder')\n  .desc('Test that 0 <= minDepth <= maxDepth <= 1')\n  .paramsSubcasesOnly([\n    // Success cases\n    { minDepth: 0, maxDepth: 1 },\n    { minDepth: -0, maxDepth: -0 },\n    { minDepth: 1, maxDepth: 1 },\n    { minDepth: 0.3, maxDepth: 0.7 },\n    { minDepth: 0.7, maxDepth: 0.7 },\n    { minDepth: 0.3, maxDepth: 0.3 },\n\n    // Invalid cases\n    { minDepth: -0.1, maxDepth: 1 },\n    { minDepth: 0, maxDepth: 1.1 },\n    { minDepth: 0.5, maxDepth: 0.49999 },\n  ])\n  .fn(t => {\n    const { minDepth, maxDepth } = t.params;\n    const success =\n      0 <= minDepth && minDepth <= 1 && 0 <= maxDepth && maxDepth <= 1 && minDepth <= maxDepth;\n    t.testViewportCall(success, { x: 0, y: 0, w: 1, h: 1, minDepth, maxDepth });\n  });\n\ng.test('setScissorRect,x_y_width_height_nonnegative')\n  .desc(\n    `Test that the parameters of setScissorRect to define the box must be non-negative or a TypeError is thrown.\n\nTODO Test -0 (it should be valid) but can't be tested because the harness complains about duplicate parameters.\nTODO Test the first value smaller than -0`\n  )\n  .paramsSubcasesOnly([\n    // Control case: everything to 0 is ok, covers the empty scissor case.\n    { x: 0, y: 0, w: 0, h: 0 },\n\n    // Test -1\n    { x: -1, y: 0, w: 0, h: 0 },\n    { x: 0, y: -1, w: 0, h: 0 },\n    { x: 0, y: 0, w: -1, h: 0 },\n    { x: 0, y: 0, w: 0, h: -1 },\n  ])\n  .fn(t => {\n    const { x, y, w, h } = t.params;\n    const success = x >= 0 && y >= 0 && w >= 0 && h >= 0;\n    t.testScissorCall(success ? true : 'type-error', { x, y, w, h });\n  });\n\ng.test('setScissorRect,xy_rect_contained_in_attachment')\n  .desc(\n    'Test that the rectangle defined by x, y, width, height must be contained in the attachments'\n  )\n  .paramsSubcasesOnly(u =>\n    u\n      .combineWithParams([\n        { attachmentWidth: 3, attachmentHeight: 5 },\n        { attachmentWidth: 5, attachmentHeight: 3 },\n        { attachmentWidth: 1024, attachmentHeight: 1 },\n        { attachmentWidth: 1, attachmentHeight: 1024 },\n      ])\n      .combineWithParams([\n        // Control case: a full scissor is valid.\n        { dx: 0, dy: 0, dw: 0, dh: 0 },\n\n        // Other valid cases with a partial scissor.\n        { dx: 1, dy: 0, dw: -1, dh: 0 },\n        { dx: 0, dy: 1, dw: 0, dh: -1 },\n        { dx: 0, dy: 0, dw: -1, dh: 0 },\n        { dx: 0, dy: 0, dw: 0, dh: -1 },\n\n        // Test with a small value that causes the scissor to go outside the attachment.\n        { dx: 1, dy: 0, dw: 0, dh: 0 },\n        { dx: 0, dy: 1, dw: 0, dh: 0 },\n        { dx: 0, dy: 0, dw: 1, dh: 0 },\n        { dx: 0, dy: 0, dw: 0, dh: 1 },\n      ])\n  )\n  .fn(t => {\n    const { attachmentWidth, attachmentHeight, dx, dy, dw, dh } = t.params;\n    const x = dx;\n    const y = dy;\n    const w = attachmentWidth + dw;\n    const h = attachmentWidth + dh;\n\n    const success = x + w <= attachmentWidth && y + h <= attachmentHeight;\n    t.testScissorCall(\n      success,\n      { x, y, w, h },\n      { width: attachmentWidth, height: attachmentHeight, depthOrArrayLayers: 1 }\n    );\n  });\n\ng.test('setBlendConstant')\n  .desc('Test that almost any color value is valid for setBlendConstant')\n  .paramsSubcasesOnly([\n    { r: 1.0, g: 1.0, b: 1.0, a: 1.0 },\n    { r: -1.0, g: -1.0, b: -1.0, a: -1.0 },\n    { r: Number.MAX_SAFE_INTEGER, g: Number.MIN_SAFE_INTEGER, b: -0, a: 100000 },\n  ])\n  .fn(t => {\n    const { r, g, b, a } = t.params;\n    const encoders = t.createDummyRenderPassEncoder();\n    encoders.pass.setBlendConstant({ r, g, b, a });\n    encoders.pass.end();\n    encoders.encoder.finish();\n  });\n\ng.test('setStencilReference')\n  .desc('Test that almost any stencil reference value is valid for setStencilReference')\n  .paramsSubcasesOnly([\n    { value: 1 }, //\n    { value: 0 },\n    { value: 1000 },\n    { value: 0xffffffff },\n  ])\n  .fn(t => {\n    const { value } = t.params;\n    const encoders = t.createDummyRenderPassEncoder();\n    encoders.pass.setStencilReference(value);\n    encoders.pass.end();\n    encoders.encoder.finish();\n  });\n"],"mappings":"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"}