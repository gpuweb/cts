{"version":3,"file":"createBindGroup.spec.js","names":["description","makeTestGroup","assert","makeValueTestVariant","unreachable","allBindingEntries","bindingTypeInfo","bufferBindingEntries","bufferBindingTypeInfo","kBindableResources","kBufferBindingTypes","kBufferUsages","kCompareFunctions","kSamplerBindingTypes","kTextureUsages","kTextureViewDimensions","sampledAndStorageBindingEntries","texBindingTypeInfo","GPUConst","kAllTextureFormats","kTextureFormatInfo","kResourceStates","MaxLimitsTestMixin","getTextureDimensionFromView","ValidationTest","kTestFormat","clone","descriptor","JSON","parse","stringify","skipIfResourceNotSupportedInStages","t","entry","visibility","isCompatibility","skipIf","GPUShaderStage","FRAGMENT","buffer","type","device","limits","maxStorageBuffersInFragmentStage","storageTexture","undefined","maxStorageTexturesInFragmentStage","VERTEX","maxStorageBuffersInVertexStage","maxStorageTexturesInVertexStage","g","kStorageTextureFormats","filter","f","color","storage","test","desc","paramsSubcasesOnly","u","combine","fn","layoutEntryCount","bindGroupEntryCount","params","layoutEntries","i","push","binding","COMPUTE","bindGroupLayout","createBindGroupLayout","entries","resource","getStorageBuffer","shouldError","expectValidationError","createBindGroup","layout","layoutBinding","resourceType","info","getBindingResource","IsStorageTextureResourceType","resourceBindingIsCompatible","unless","usage","TextureUsage","STORAGE_BINDING","beforeAllSubcases","skipIfColorRenderableNotSupportedForFormat","appliedUsage","RENDER_ATTACHMENT","size","width","height","depthOrArrayLayers","format","sampleCount","createTextureTracked","createView","sampleType","texture","goodDescriptor","GPUTextureUsage","TEXTURE_BINDING","mismatchedTextureFormats","mismatchedTextureFormat","badDescriptor","p","viewDimension","beginSubcases","dimension","access","skipIfTextureViewDimensionNotSupported","textureView","multisampled","isValid","offset","_success","createBufferTracked","GPUBufferUsage","STORAGE","expand","minBindingSize","storageBuffer","kAllShaderStages","ShaderStage","state","visibilityMask","validStages","bgl","createBufferWithState","createTextureWithState","selectMismatchedDeviceOrSkipTestCase","mismatched","sourceDevice","mismatchedDevice","getUniformBuffer","sampler","combineWithParams","resource0Mismatched","resource1Mismatched","resource0","getDeviceMismatchedBindingResource","resource1","usage0","usage1","baseMipLevel","mipLevelCount","MIP_LEVEL_COUNT","storageTextureFormat","resourceFormat","skipIfTextureFormatNotUsableAsStorageTexture","BufferUsage","MAP_READ","MAP_WRITE","UNIFORM","add","mult","offsetAddMult","minAlignment","base","limit","bindingSize","maxBindingSize","offsetMult","bufferSizeAddition","bufferSize","effectiveBindingSize","createSampler","bgType","compareFunction","compare"],"sources":["../../../../src/webgpu/api/validation/createBindGroup.spec.ts"],"sourcesContent":["export const description = `\n  createBindGroup validation tests.\n\n  TODO: Ensure sure tests cover all createBindGroup validation rules.\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert, makeValueTestVariant, unreachable } from '../../../common/util/util.js';\nimport {\n  allBindingEntries,\n  BGLEntry,\n  BindableResource,\n  bindingTypeInfo,\n  bufferBindingEntries,\n  bufferBindingTypeInfo,\n  kBindableResources,\n  kBufferBindingTypes,\n  kBufferUsages,\n  kCompareFunctions,\n  kSamplerBindingTypes,\n  kTextureUsages,\n  kTextureViewDimensions,\n  sampledAndStorageBindingEntries,\n  texBindingTypeInfo,\n} from '../../capability_info.js';\nimport { GPUConst } from '../../constants.js';\nimport { kAllTextureFormats, kTextureFormatInfo } from '../../format_info.js';\nimport { kResourceStates, MaxLimitsTestMixin } from '../../gpu_test.js';\nimport { getTextureDimensionFromView } from '../../util/texture/base.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nconst kTestFormat: GPUTextureFormat = 'r32float';\n\nfunction clone<T extends GPUTextureDescriptor>(descriptor: T): T {\n  return JSON.parse(JSON.stringify(descriptor));\n}\n\nfunction skipIfResourceNotSupportedInStages(\n  t: ValidationTest,\n  entry: BGLEntry,\n  visibility: number\n) {\n  if (t.isCompatibility) {\n    t.skipIf(\n      (visibility & GPUShaderStage.FRAGMENT) !== 0 &&\n        (entry.buffer?.type === 'storage' || entry.buffer?.type === 'read-only-storage') &&\n        !(t.device.limits.maxStorageBuffersInFragmentStage! >= 2),\n      `maxStorageBuffersInFragmentStage(${t.device.limits.maxStorageBuffersInFragmentStage}) < 2`\n    );\n    t.skipIf(\n      (visibility & GPUShaderStage.FRAGMENT) !== 0 &&\n        entry.storageTexture !== undefined &&\n        !(t.device.limits.maxStorageTexturesInFragmentStage! >= 1),\n      `maxStorageTexturesInFragmentStage(${t.device.limits.maxStorageTexturesInFragmentStage}) < 1`\n    );\n    t.skipIf(\n      (visibility & GPUShaderStage.VERTEX) !== 0 &&\n        (entry.buffer?.type === 'storage' || entry.buffer?.type === 'read-only-storage') &&\n        !(t.device.limits.maxStorageBuffersInVertexStage! >= 2),\n      `maxStorageBuffersInVertexStage(${t.device.limits.maxStorageBuffersInVertexStage}) < 2`\n    );\n    t.skipIf(\n      (visibility & GPUShaderStage.VERTEX) !== 0 &&\n        entry.storageTexture !== undefined &&\n        !(t.device.limits.maxStorageTexturesInVertexStage! >= 1),\n      `maxStorageTexturesInVertexStage(${t.device.limits.maxStorageTexturesInVertexStage}) < 1`\n    );\n  }\n}\n\nexport const g = makeTestGroup(MaxLimitsTestMixin(ValidationTest));\n\nconst kStorageTextureFormats = kAllTextureFormats.filter(f => kTextureFormatInfo[f].color?.storage);\n\ng.test('binding_count_mismatch')\n  .desc('Test that the number of entries must match the number of entries in the BindGroupLayout.')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('layoutEntryCount', [1, 2, 3])\n      .combine('bindGroupEntryCount', [1, 2, 3])\n  )\n  .fn(t => {\n    const { layoutEntryCount, bindGroupEntryCount } = t.params;\n\n    const layoutEntries: Array<GPUBindGroupLayoutEntry> = [];\n    for (let i = 0; i < layoutEntryCount; ++i) {\n      layoutEntries.push({\n        binding: i,\n        visibility: GPUShaderStage.COMPUTE,\n        buffer: { type: 'storage' },\n      });\n    }\n    const bindGroupLayout = t.device.createBindGroupLayout({ entries: layoutEntries });\n\n    const entries: Array<GPUBindGroupEntry> = [];\n    for (let i = 0; i < bindGroupEntryCount; ++i) {\n      entries.push({\n        binding: i,\n        resource: { buffer: t.getStorageBuffer() },\n      });\n    }\n\n    const shouldError = layoutEntryCount !== bindGroupEntryCount;\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries,\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('binding_must_be_present_in_layout')\n  .desc(\n    'Test that the binding slot for each entry matches a binding slot defined in the BindGroupLayout.'\n  )\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('layoutBinding', [0, 1, 2])\n      .combine('binding', [0, 1, 2])\n  )\n  .fn(t => {\n    const { layoutBinding, binding } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        { binding: layoutBinding, visibility: GPUShaderStage.COMPUTE, buffer: { type: 'storage' } },\n      ],\n    });\n\n    const descriptor = {\n      entries: [{ binding, resource: { buffer: t.getStorageBuffer() } }],\n      layout: bindGroupLayout,\n    };\n\n    const shouldError = layoutBinding !== binding;\n    t.expectValidationError(() => {\n      t.device.createBindGroup(descriptor);\n    }, shouldError);\n  });\n\ng.test('binding_must_contain_resource_defined_in_layout')\n  .desc(\n    'Test that only compatible resource types specified in the BindGroupLayout are allowed for each entry.'\n  )\n  .params(u =>\n    u //\n      .combine('resourceType', kBindableResources)\n      .combine('entry', allBindingEntries(false, kTestFormat))\n  )\n  .fn(t => {\n    const { resourceType, entry } = t.params;\n    const info = bindingTypeInfo(entry);\n\n    const layout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility: GPUShaderStage.COMPUTE, ...entry }],\n    });\n\n    const resource = t.getBindingResource(resourceType);\n\n    const IsStorageTextureResourceType = (resourceType: BindableResource) => {\n      switch (resourceType) {\n        case 'readonlyStorageTex':\n        case 'readwriteStorageTex':\n        case 'writeonlyStorageTex':\n          return true;\n        default:\n          return false;\n      }\n    };\n\n    let resourceBindingIsCompatible;\n    switch (info.resource) {\n      // Either type of sampler may be bound to a filtering sampler binding.\n      case 'filtSamp':\n        resourceBindingIsCompatible = resourceType === 'filtSamp' || resourceType === 'nonFiltSamp';\n        break;\n      // But only non-filtering samplers can be used with non-filtering sampler bindings.\n      case 'nonFiltSamp':\n        resourceBindingIsCompatible = resourceType === 'nonFiltSamp';\n        break;\n      case 'readonlyStorageTex':\n      case 'readwriteStorageTex':\n      case 'writeonlyStorageTex':\n        resourceBindingIsCompatible = IsStorageTextureResourceType(resourceType);\n        break;\n      default:\n        resourceBindingIsCompatible = info.resource === resourceType;\n        break;\n    }\n    t.expectValidationError(() => {\n      t.device.createBindGroup({ layout, entries: [{ binding: 0, resource }] });\n    }, !resourceBindingIsCompatible);\n  });\n\ng.test('texture_binding_must_have_correct_usage')\n  .desc('Tests that texture bindings must have the correct usage.')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('entry', sampledAndStorageBindingEntries(false, kTestFormat))\n      .combine('usage', kTextureUsages)\n      .unless(({ entry, usage }) => {\n        const info = texBindingTypeInfo(entry);\n        // Can't create the texture for this (usage=STORAGE_BINDING and sampleCount=4), so skip.\n        return usage === GPUConst.TextureUsage.STORAGE_BINDING && info.resource === 'sampledTexMS';\n      })\n  )\n  .beforeAllSubcases(t => {\n    t.skipIfColorRenderableNotSupportedForFormat(kTestFormat);\n  })\n  .fn(t => {\n    const { entry, usage } = t.params;\n    const info = texBindingTypeInfo(entry);\n\n    t.skipIf(\n      t.isCompatibility && info.resource === 'sampledTexMS',\n      \"The test requires 'r32float' multisampled support which compat mode doesn't guarantee.\"\n    );\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility: GPUShaderStage.COMPUTE, ...entry }],\n    });\n\n    // The `RENDER_ATTACHMENT` usage must be specified if sampleCount > 1 according to WebGPU SPEC.\n    const appliedUsage =\n      info.resource === 'sampledTexMS' ? usage | GPUConst.TextureUsage.RENDER_ATTACHMENT : usage;\n\n    const descriptor = {\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: kTestFormat,\n      usage: appliedUsage,\n      sampleCount: info.resource === 'sampledTexMS' ? 4 : 1,\n    };\n    const resource = t.createTextureTracked(descriptor).createView();\n\n    const shouldError = (usage & info.usage) === 0;\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource }],\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('texture_must_have_correct_component_type')\n  .desc(\n    `\n    Tests that texture bindings must have a format that matches the sample type specified in the BindGroupLayout.\n    - Tests a compatible format for every sample type\n    - Tests an incompatible format for every sample type`\n  )\n  .params(u => u.combine('sampleType', ['float', 'sint', 'uint'] as const))\n  .fn(t => {\n    const { sampleType } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          texture: { sampleType },\n        },\n      ],\n    });\n\n    let format: GPUTextureFormat;\n    if (sampleType === 'float') {\n      format = 'r8unorm';\n    } else if (sampleType === 'sint') {\n      format = 'r8sint';\n    } else if (sampleType === 'uint') {\n      format = 'r8uint';\n    } else {\n      unreachable('Unexpected texture component type');\n    }\n\n    const goodDescriptor = {\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    // Control case\n    t.device.createBindGroup({\n      entries: [\n        {\n          binding: 0,\n          resource: t.createTextureTracked(goodDescriptor).createView(),\n        },\n      ],\n      layout: bindGroupLayout,\n    });\n\n    function* mismatchedTextureFormats(): Iterable<GPUTextureFormat> {\n      if (sampleType !== 'float') {\n        yield 'r8unorm';\n      }\n      if (sampleType !== 'sint') {\n        yield 'r8sint';\n      }\n      if (sampleType !== 'uint') {\n        yield 'r8uint';\n      }\n    }\n\n    // Mismatched texture binding formats are not valid.\n    for (const mismatchedTextureFormat of mismatchedTextureFormats()) {\n      const badDescriptor: GPUTextureDescriptor = clone(goodDescriptor);\n      badDescriptor.format = mismatchedTextureFormat;\n\n      t.expectValidationError(() => {\n        t.device.createBindGroup({\n          entries: [{ binding: 0, resource: t.createTextureTracked(badDescriptor).createView() }],\n          layout: bindGroupLayout,\n        });\n      });\n    }\n  });\n\ng.test('texture_must_have_correct_dimension')\n  .desc(\n    `\n    Test that bound texture views match the dimensions supplied in the BindGroupLayout\n      - Test for every GPUTextureViewDimension\n      - Test for both TEXTURE_BINDING and STORAGE_BINDING.\n  `\n  )\n  .params(u =>\n    u\n      .combine('usage', [\n        GPUConst.TextureUsage.TEXTURE_BINDING,\n        GPUConst.TextureUsage.STORAGE_BINDING,\n      ])\n      .combine('viewDimension', kTextureViewDimensions)\n      .unless(\n        p =>\n          p.usage === GPUConst.TextureUsage.STORAGE_BINDING &&\n          (p.viewDimension === 'cube' || p.viewDimension === 'cube-array')\n      )\n      .beginSubcases()\n      .combine('dimension', kTextureViewDimensions)\n  )\n  .fn(t => {\n    const { usage, viewDimension, dimension } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        usage === GPUTextureUsage.TEXTURE_BINDING\n          ? {\n              binding: 0,\n              visibility: GPUShaderStage.COMPUTE,\n              texture: { viewDimension },\n            }\n          : {\n              binding: 0,\n              visibility: GPUShaderStage.COMPUTE,\n              storageTexture: { access: 'write-only', format: 'rgba8unorm', viewDimension },\n            },\n      ],\n    });\n\n    let height = 16;\n    let depthOrArrayLayers = 6;\n    if (dimension === '1d') {\n      height = 1;\n      depthOrArrayLayers = 1;\n    }\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height, depthOrArrayLayers },\n      format: 'rgba8unorm' as const,\n      usage,\n      dimension: getTextureDimensionFromView(dimension),\n    });\n\n    t.skipIfTextureViewDimensionNotSupported(viewDimension, dimension);\n    if (t.isCompatibility && texture.dimension === '2d') {\n      if (depthOrArrayLayers === 1) {\n        t.skipIf(\n          viewDimension !== '2d',\n          '1 layer 2d textures default to textureBindingViewDimension: \"2d\" in compat mode'\n        );\n      } else {\n        t.skipIf(\n          viewDimension !== '2d-array',\n          '> 1 layer 2d textures default to textureBindingViewDimension \"2d-array\" in compat mode'\n        );\n      }\n    }\n\n    const shouldError = viewDimension !== dimension;\n    const textureView = texture.createView({ dimension });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('multisampled_validation')\n  .desc(\n    `\n    Test that the sample count of the texture is greater than 1 if the BindGroup entry's\n    multisampled is true. Otherwise, the texture's sampleCount should be 1.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('multisampled', [true, false])\n      .beginSubcases()\n      .combine('sampleCount', [1, 4])\n  )\n  .fn(t => {\n    const { multisampled, sampleCount } = t.params;\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          texture: { multisampled, sampleType: multisampled ? 'unfilterable-float' : undefined },\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT,\n      sampleCount,\n    });\n\n    const isValid = (!multisampled && sampleCount === 1) || (multisampled && sampleCount > 1);\n\n    const textureView = texture.createView();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer_offset_and_size_for_bind_groups_match')\n  .desc(\n    `\n    Test that a buffer binding's [offset, offset + size) must be contained in the BindGroup entry's buffer.\n    - Test for various offsets and sizes`\n  )\n  .paramsSubcasesOnly([\n    { offset: 0, size: 512, _success: true }, // offset 0 is valid\n    { offset: 256, size: 256, _success: true }, // offset 256 (aligned) is valid\n\n    // Touching the end of the buffer\n    { offset: 0, size: 1024, _success: true },\n    { offset: 0, size: undefined, _success: true },\n    { offset: 256 * 3, size: 256, _success: true },\n    { offset: 256 * 3, size: undefined, _success: true },\n\n    // Zero-sized bindings\n    { offset: 0, size: 0, _success: false },\n    { offset: 256, size: 0, _success: false },\n    { offset: 1024, size: 0, _success: false },\n    { offset: 1024, size: undefined, _success: false },\n\n    // Unaligned buffer offset is invalid\n    { offset: 1, size: 256, _success: false },\n    { offset: 1, size: undefined, _success: false },\n    { offset: 128, size: 256, _success: false },\n    { offset: 255, size: 256, _success: false },\n\n    // Out-of-bounds\n    { offset: 256 * 5, size: 0, _success: false }, // offset is OOB\n    { offset: 0, size: 256 * 5, _success: false }, // size is OOB\n    { offset: 1024, size: 1, _success: false }, // offset+size is OOB\n  ])\n  .fn(t => {\n    const { offset, size, _success } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility: GPUShaderStage.COMPUTE, buffer: { type: 'storage' } }],\n    });\n\n    const buffer = t.createBufferTracked({\n      size: 1024,\n      usage: GPUBufferUsage.STORAGE,\n    });\n\n    const descriptor = {\n      entries: [\n        {\n          binding: 0,\n          resource: { buffer, offset, size },\n        },\n      ],\n      layout: bindGroupLayout,\n    };\n\n    if (_success) {\n      // Control case\n      t.device.createBindGroup(descriptor);\n    } else {\n      // Buffer offset and/or size don't match in bind groups.\n      t.expectValidationError(() => {\n        t.device.createBindGroup(descriptor);\n      });\n    }\n  });\n\ng.test('minBindingSize')\n  .desc('Tests that minBindingSize is correctly enforced.')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('minBindingSize', [undefined, 4, 8, 256])\n      .expand('size', ({ minBindingSize }) =>\n        minBindingSize !== undefined\n          ? [minBindingSize - 4, minBindingSize, minBindingSize + 4]\n          : [4, 256]\n      )\n  )\n  .fn(t => {\n    const { size, minBindingSize } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: {\n            type: 'storage',\n            minBindingSize,\n          },\n        },\n      ],\n    });\n\n    const storageBuffer = t.createBufferTracked({\n      size,\n      usage: GPUBufferUsage.STORAGE,\n    });\n\n    t.expectValidationError(\n      () => {\n        t.device.createBindGroup({\n          layout: bindGroupLayout,\n          entries: [\n            {\n              binding: 0,\n              resource: { buffer: storageBuffer },\n            },\n          ],\n        });\n      },\n      minBindingSize !== undefined && size < minBindingSize\n    );\n  });\n\nconst kAllShaderStages =\n  GPUConst.ShaderStage.COMPUTE | GPUConst.ShaderStage.FRAGMENT | GPUConst.ShaderStage.VERTEX;\n\ng.test('buffer,resource_state')\n  .desc('Test bind group creation with various buffer resource states')\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('state', kResourceStates)\n      .combine('entry', bufferBindingEntries(true))\n      .combine('visibilityMask', [kAllShaderStages, GPUConst.ShaderStage.COMPUTE] as const)\n  )\n  .fn(t => {\n    const { state, entry, visibilityMask } = t.params;\n\n    assert(entry.buffer !== undefined);\n    const info = bufferBindingTypeInfo(entry.buffer);\n\n    const visibility = info.validStages & visibilityMask;\n    skipIfResourceNotSupportedInStages(t, entry, visibility);\n\n    const bgl = t.device.createBindGroupLayout({\n      entries: [\n        {\n          ...entry,\n          binding: 0,\n          visibility,\n        },\n      ],\n    });\n\n    const buffer = t.createBufferWithState(state, {\n      usage: info.usage,\n      size: 4,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: {\n              buffer,\n            },\n          },\n        ],\n      });\n    }, state === 'invalid');\n  });\n\ng.test('texture,resource_state')\n  .desc('Test bind group creation with various texture resource states')\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('state', kResourceStates)\n      .combine('entry', sampledAndStorageBindingEntries(true, kTestFormat))\n      .combine('visibilityMask', [kAllShaderStages, GPUConst.ShaderStage.COMPUTE] as const)\n  )\n  .fn(t => {\n    const { state, entry, visibilityMask } = t.params;\n    const info = texBindingTypeInfo(entry);\n\n    const visibility = info.validStages & visibilityMask;\n    skipIfResourceNotSupportedInStages(t, entry, visibility);\n\n    const bgl = t.device.createBindGroupLayout({\n      entries: [\n        {\n          ...entry,\n          binding: 0,\n          visibility,\n        },\n      ],\n    });\n\n    // The `RENDER_ATTACHMENT` usage must be specified if sampleCount > 1 according to WebGPU SPEC.\n    const usage = entry.texture?.multisampled\n      ? info.usage | GPUConst.TextureUsage.RENDER_ATTACHMENT\n      : info.usage;\n    const format = entry.storageTexture !== undefined ? 'r32float' : 'rgba8unorm';\n    const texture = t.createTextureWithState(state, {\n      usage,\n      size: [1, 1],\n      format,\n      sampleCount: entry.texture?.multisampled ? 4 : 1,\n    });\n\n    let textureView: GPUTextureView;\n    t.expectValidationError(() => {\n      textureView = texture.createView();\n    }, state === 'invalid');\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: textureView,\n          },\n        ],\n      });\n    }, state === 'invalid');\n  });\n\ng.test('bind_group_layout,device_mismatch')\n  .desc(\n    'Tests createBindGroup cannot be called with a bind group layout created from another device'\n  )\n  .paramsSubcasesOnly(u => u.combine('mismatched', [true, false]))\n  .beforeAllSubcases(t => {\n    t.selectMismatchedDeviceOrSkipTestCase(undefined);\n  })\n  .fn(t => {\n    const mismatched = t.params.mismatched;\n\n    const sourceDevice = mismatched ? t.mismatchedDevice : t.device;\n\n    const bgl = sourceDevice.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUConst.ShaderStage.COMPUTE,\n          buffer: {},\n        },\n      ],\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: { buffer: t.getUniformBuffer() },\n          },\n        ],\n      });\n    }, mismatched);\n  });\n\ng.test('binding_resources,device_mismatch')\n  .desc(\n    `\n    Tests createBindGroup cannot be called with various resources created from another device\n    Test with two resources to make sure all resources can be validated:\n    - resource0 and resource1 from same device\n    - resource0 and resource1 from different device\n\n    TODO: test GPUExternalTexture as a resource\n    `\n  )\n  .params(u =>\n    u\n      .combine('entry', [\n        { buffer: { type: 'storage' } },\n        { sampler: { type: 'filtering' } },\n        { texture: { multisampled: false } },\n        { storageTexture: { access: 'write-only', format: 'r32float' } },\n        { storageTexture: { access: 'read-only', format: 'r32float' } },\n        { storageTexture: { access: 'read-write', format: 'r32float' } },\n      ] as const)\n      .beginSubcases()\n      .combineWithParams([\n        { resource0Mismatched: false, resource1Mismatched: false }, //control case\n        { resource0Mismatched: true, resource1Mismatched: false },\n        { resource0Mismatched: false, resource1Mismatched: true },\n      ])\n      .combine('visibilityMask', [kAllShaderStages, GPUConst.ShaderStage.COMPUTE] as const)\n  )\n  .beforeAllSubcases(t => {\n    t.selectMismatchedDeviceOrSkipTestCase(undefined);\n  })\n  .fn(t => {\n    const { entry, resource0Mismatched, resource1Mismatched, visibilityMask } = t.params;\n\n    const info = bindingTypeInfo(entry);\n    const visibility = info.validStages & visibilityMask;\n    skipIfResourceNotSupportedInStages(t, entry, visibility);\n\n    const resource0 = resource0Mismatched\n      ? t.getDeviceMismatchedBindingResource(info.resource)\n      : t.getBindingResource(info.resource);\n    const resource1 = resource1Mismatched\n      ? t.getDeviceMismatchedBindingResource(info.resource)\n      : t.getBindingResource(info.resource);\n\n    const bgl = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility,\n          ...entry,\n        },\n        {\n          binding: 1,\n          visibility,\n          ...entry,\n        },\n      ],\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: resource0,\n          },\n          {\n            binding: 1,\n            resource: resource1,\n          },\n        ],\n      });\n    }, resource0Mismatched || resource1Mismatched);\n  });\n\ng.test('storage_texture,usage')\n  .desc(\n    `\n    Test that the texture usage contains STORAGE_BINDING if the BindGroup entry defines\n    storageTexture.\n  `\n  )\n  .params(u =>\n    u //\n      // If usage0 and usage1 are the same, the usage being test is a single usage. Otherwise, it's\n      // a combined usage.\n      .combine('usage0', kTextureUsages)\n      .combine('usage1', kTextureUsages)\n  )\n  .fn(t => {\n    const { usage0, usage1 } = t.params;\n\n    const usage = usage0 | usage1;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          storageTexture: { access: 'write-only', format: 'rgba8unorm' },\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage,\n    });\n\n    const isValid = GPUTextureUsage.STORAGE_BINDING & usage;\n\n    const textureView = texture.createView();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('storage_texture,mip_level_count')\n  .desc(\n    `\n    Test that the mip level count of the resource of the BindGroup entry as a descriptor is 1 if the\n    BindGroup entry defines storageTexture. If the mip level count is not 1, a validation error\n    should be generated.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('baseMipLevel', [1, 2])\n      .combine('mipLevelCount', [1, 2])\n  )\n  .fn(t => {\n    const { baseMipLevel, mipLevelCount } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          storageTexture: { access: 'write-only', format: 'rgba8unorm' },\n        },\n      ],\n    });\n\n    const MIP_LEVEL_COUNT = 4;\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.STORAGE_BINDING,\n      mipLevelCount: MIP_LEVEL_COUNT,\n    });\n\n    const textureView = texture.createView({ baseMipLevel, mipLevelCount });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, mipLevelCount !== 1);\n  });\n\ng.test('storage_texture,format')\n  .desc(\n    `\n    Test that the format of the storage texture is equal to resource's descriptor format if the\n    BindGroup entry defines storageTexture.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('storageTextureFormat', kStorageTextureFormats)\n      .combine('resourceFormat', kStorageTextureFormats)\n  )\n  .beforeAllSubcases(t => {\n    const { storageTextureFormat, resourceFormat } = t.params;\n    t.skipIfTextureFormatNotUsableAsStorageTexture(storageTextureFormat, resourceFormat);\n  })\n  .fn(t => {\n    const { storageTextureFormat, resourceFormat } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          storageTexture: { access: 'write-only', format: storageTextureFormat },\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: resourceFormat,\n      usage: GPUTextureUsage.STORAGE_BINDING,\n    });\n\n    const isValid = storageTextureFormat === resourceFormat;\n    const textureView = texture.createView({ format: resourceFormat });\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,usage')\n  .desc(\n    `\n    Test that the buffer usage contains 'UNIFORM' if the BindGroup entry defines buffer and it's\n    type is 'uniform', and the buffer usage contains 'STORAGE' if the BindGroup entry's buffer type\n    is 'storage'|read-only-storage'.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('type', kBufferBindingTypes)\n      // If usage0 and usage1 are the same, the usage being test is a single usage. Otherwise, it's\n      // a combined usage.\n      .beginSubcases()\n      .combine('usage0', kBufferUsages)\n      .combine('usage1', kBufferUsages)\n      .unless(\n        ({ usage0, usage1 }) =>\n          ((usage0 | usage1) & (GPUConst.BufferUsage.MAP_READ | GPUConst.BufferUsage.MAP_WRITE)) !==\n          0\n      )\n  )\n  .fn(t => {\n    const { type, usage0, usage1 } = t.params;\n\n    const usage = usage0 | usage1;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const buffer = t.createBufferTracked({\n      size: 4,\n      usage,\n    });\n\n    let isValid = false;\n    if (type === 'uniform') {\n      isValid = GPUBufferUsage.UNIFORM & usage ? true : false;\n    } else if (type === 'storage' || type === 'read-only-storage') {\n      isValid = GPUBufferUsage.STORAGE & usage ? true : false;\n    }\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,resource_offset')\n  .desc(\n    `\n    Test that the resource.offset of the BindGroup entry is a multiple of limits.\n    'minUniformBufferOffsetAlignment|minStorageBufferOffsetAlignment' if the BindGroup entry defines\n    buffer and the buffer type is 'uniform|storage|read-only-storage'.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('type', kBufferBindingTypes)\n      .beginSubcases()\n      .combine('offsetAddMult', [\n        { add: 0, mult: 0 },\n        { add: 0, mult: 0.5 },\n        { add: 0, mult: 1.5 },\n        { add: 2, mult: 0 },\n      ])\n  )\n  .fn(t => {\n    const { type, offsetAddMult } = t.params;\n    const minAlignment =\n      t.device.limits[\n        type === 'uniform' ? 'minUniformBufferOffsetAlignment' : 'minStorageBufferOffsetAlignment'\n      ];\n    const offset = makeValueTestVariant(minAlignment, offsetAddMult);\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const usage = type === 'uniform' ? GPUBufferUsage.UNIFORM : GPUBufferUsage.STORAGE;\n    const isValid = offset % minAlignment === 0;\n\n    const buffer = t.createBufferTracked({\n      size: 1024,\n      usage,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer, offset } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,resource_binding_size')\n  .desc(\n    `\n    Test that the buffer binding size of the BindGroup entry is equal to or less than limits.\n    'maxUniformBufferBindingSize|maxStorageBufferBindingSize' if the BindGroup entry defines\n    buffer and the buffer type is 'uniform|storage|read-only-storage'.\n  `\n  )\n  .params(u =>\n    u\n      .combine('type', kBufferBindingTypes)\n      .beginSubcases()\n      // Test a size of 1 (for uniform buffer) or 4 (for storage and read-only storage buffer)\n      // then values just within and just above the limit.\n      .combine('bindingSize', [\n        { base: 1, limit: 0 },\n        { base: 0, limit: 1 },\n        { base: 1, limit: 1 },\n      ])\n  )\n  .fn(t => {\n    const {\n      type,\n      bindingSize: { base, limit },\n    } = t.params;\n    const mult = type === 'uniform' ? 1 : 4;\n    const maxBindingSize =\n      t.device.limits[\n        type === 'uniform' ? 'maxUniformBufferBindingSize' : 'maxStorageBufferBindingSize'\n      ];\n    const bindingSize = base * mult + maxBindingSize * limit;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const usage = type === 'uniform' ? GPUBufferUsage.UNIFORM : GPUBufferUsage.STORAGE;\n    const isValid = bindingSize <= maxBindingSize;\n\n    // MAINTENANCE_TODO: Allocating the max size seems likely to fail. Refactor test.\n    const buffer = t.createBufferTracked({\n      size: maxBindingSize,\n      usage,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer, size: bindingSize } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,effective_buffer_binding_size')\n  .desc(\n    `\n  Test that the effective buffer binding size of the BindGroup entry must be a multiple of 4 if the\n  buffer type is 'storage|read-only-storage', while there is no such restriction on uniform buffers.\n`\n  )\n  .params(u =>\n    u\n      .combine('type', kBufferBindingTypes)\n      .beginSubcases()\n      .combine('offsetMult', [0, 1])\n      .combine('bufferSizeAddition', [8, 10])\n      .combine('bindingSize', [undefined, 2, 4, 6])\n  )\n  .fn(t => {\n    const { type, offsetMult, bufferSizeAddition, bindingSize } = t.params;\n    const minAlignment =\n      t.device.limits[\n        type === 'uniform' ? 'minUniformBufferOffsetAlignment' : 'minStorageBufferOffsetAlignment'\n      ];\n    const offset = minAlignment * offsetMult;\n    const bufferSize = minAlignment + bufferSizeAddition;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const effectiveBindingSize = bindingSize ?? bufferSize - offset;\n    let usage, isValid;\n    if (type === 'uniform') {\n      usage = GPUBufferUsage.UNIFORM;\n      isValid = true;\n    } else {\n      usage = GPUBufferUsage.STORAGE;\n      isValid = effectiveBindingSize % 4 === 0;\n    }\n\n    const buffer = t.createBufferTracked({\n      size: bufferSize,\n      usage,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer, offset, size: bindingSize } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('sampler,device_mismatch')\n  .desc(`Tests createBindGroup cannot be called with a sampler created from another device.`)\n  .paramsSubcasesOnly(u => u.combine('mismatched', [true, false]))\n  .beforeAllSubcases(t => {\n    t.selectMismatchedDeviceOrSkipTestCase(undefined);\n  })\n  .fn(t => {\n    const { mismatched } = t.params;\n\n    const sourceDevice = mismatched ? t.mismatchedDevice : t.device;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          sampler: { type: 'filtering' as const },\n        },\n      ],\n    });\n\n    const sampler = sourceDevice.createSampler();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: sampler }],\n        layout: bindGroupLayout,\n      });\n    }, mismatched);\n  });\n\ng.test('sampler,compare_function_with_binding_type')\n  .desc(\n    `\n  Test that the sampler of the BindGroup has a 'compareFunction' value if the sampler type of the\n  BindGroupLayout is 'comparison'. Other sampler types should not have 'compare' field in\n  the descriptor of the sampler.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('bgType', kSamplerBindingTypes)\n      .beginSubcases()\n      .combine('compareFunction', [undefined, ...kCompareFunctions])\n  )\n  .fn(t => {\n    const { bgType, compareFunction } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          sampler: { type: bgType },\n        },\n      ],\n    });\n\n    const isValid =\n      bgType === 'comparison' ? compareFunction !== undefined : compareFunction === undefined;\n\n    const sampler = t.device.createSampler({ compare: compareFunction });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: sampler }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n"],"mappings":"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"}