{"version":3,"file":"createBindGroup.spec.js","names":["description","AllFeaturesMaxLimitsGPUTest","kResourceStates","makeTestGroup","assert","makeValueTestVariant","unreachable","allBindingEntries","bindingTypeInfo","bufferBindingEntries","bufferBindingTypeInfo","kBindableResources","kBufferBindingTypes","kBufferUsages","kCompareFunctions","kSamplerBindingTypes","kTextureUsages","kTextureViewDimensions","sampledAndStorageBindingEntries","texBindingTypeInfo","isValidTextureUsageCombination","GPUConst","kPossibleStorageTextureFormats","kRegularTextureFormats","getTextureDimensionFromView","vtu","kTestFormat","clone","descriptor","JSON","parse","stringify","skipIfResourceNotSupportedInStages","t","entry","visibility","isCompatibility","skipIf","GPUShaderStage","FRAGMENT","buffer","type","device","limits","maxStorageBuffersInFragmentStage","storageTexture","undefined","maxStorageTexturesInFragmentStage","VERTEX","maxStorageBuffersInVertexStage","maxStorageTexturesInVertexStage","g","test","desc","paramsSubcasesOnly","u","combine","fn","layoutEntryCount","bindGroupEntryCount","params","layoutEntries","i","push","binding","COMPUTE","bindGroupLayout","createBindGroupLayout","entries","resource","getStorageBuffer","shouldError","expectValidationError","createBindGroup","layout","layoutBinding","resourceType","info","getBindingResource","isStorageTextureResourceType","resourceBindingIsCompatible","unless","usage","TextureUsage","TRANSIENT_ATTACHMENT","STORAGE_BINDING","skipIfTransientAttachmentNotSupported","appliedUsage","RENDER_ATTACHMENT","size","width","height","depthOrArrayLayers","format","sampleCount","createTextureTracked","createView","sampleType","texture","goodDescriptor","GPUTextureUsage","TEXTURE_BINDING","mismatchedTextureFormats","mismatchedTextureFormat","badDescriptor","p","viewDimension","beginSubcases","dimension","access","skipIfTextureViewDimensionNotSupported","textureView","multisampled","isValid","offset","_success","bindBufferResource","createBufferTracked","GPUBufferUsage","STORAGE","expand","minBindingSize","storageBuffer","kAllShaderStages","ShaderStage","state","visibilityMask","validStages","bgl","createBufferWithState","bindTextureResource","createTextureWithState","beforeAllSubcases","usesMismatchedDevice","mismatched","sourceDevice","mismatchedDevice","getUniformBuffer","sampler","combineWithParams","resource0Mismatched","resource1Mismatched","resource0","getDeviceMismatchedBindingResource","resource1","usage0","usage1","baseMipLevel","mipLevelCount","MIP_LEVEL_COUNT","storageTextureFormat","resourceFormat","skipIfTextureFormatNotSupported","skipIfTextureFormatNotUsableWithStorageAccessMode","BufferUsage","MAP_READ","MAP_WRITE","UNIFORM","add","mult","offsetAddMult","minAlignment","base","limit","bindingSize","maxBindingSize","offsetMult","bufferSizeAddition","bufferSize","effectiveBindingSize","createSampler","bgType","compareFunction","compare","externalTexture"],"sources":["../../../../src/webgpu/api/validation/createBindGroup.spec.ts"],"sourcesContent":["export const description = `\n  createBindGroup validation tests.\n\n  TODO: Ensure sure tests cover all createBindGroup validation rules.\n`;\n\nimport { AllFeaturesMaxLimitsGPUTest, kResourceStates } from '../.././gpu_test.js';\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert, makeValueTestVariant, unreachable } from '../../../common/util/util.js';\nimport {\n  allBindingEntries,\n  BGLEntry,\n  BindableResource,\n  bindingTypeInfo,\n  bufferBindingEntries,\n  bufferBindingTypeInfo,\n  kBindableResources,\n  kBufferBindingTypes,\n  kBufferUsages,\n  kCompareFunctions,\n  kSamplerBindingTypes,\n  kTextureUsages,\n  kTextureViewDimensions,\n  sampledAndStorageBindingEntries,\n  texBindingTypeInfo,\n  isValidTextureUsageCombination,\n} from '../../capability_info.js';\nimport { GPUConst } from '../../constants.js';\nimport { kPossibleStorageTextureFormats, kRegularTextureFormats } from '../../format_info.js';\nimport { getTextureDimensionFromView } from '../../util/texture/base.js';\n\nimport * as vtu from './validation_test_utils.js';\n\nconst kTestFormat: GPUTextureFormat = 'r32float';\n\nfunction clone<T extends GPUTextureDescriptor>(descriptor: T): T {\n  return JSON.parse(JSON.stringify(descriptor));\n}\n\nfunction skipIfResourceNotSupportedInStages(\n  t: AllFeaturesMaxLimitsGPUTest,\n  entry: BGLEntry,\n  visibility: number\n) {\n  if (t.isCompatibility) {\n    t.skipIf(\n      (visibility & GPUShaderStage.FRAGMENT) !== 0 &&\n        (entry.buffer?.type === 'storage' || entry.buffer?.type === 'read-only-storage') &&\n        !(t.device.limits.maxStorageBuffersInFragmentStage! >= 2),\n      `maxStorageBuffersInFragmentStage(${t.device.limits.maxStorageBuffersInFragmentStage}) < 2`\n    );\n    t.skipIf(\n      (visibility & GPUShaderStage.FRAGMENT) !== 0 &&\n        entry.storageTexture !== undefined &&\n        !(t.device.limits.maxStorageTexturesInFragmentStage! >= 1),\n      `maxStorageTexturesInFragmentStage(${t.device.limits.maxStorageTexturesInFragmentStage}) < 1`\n    );\n    t.skipIf(\n      (visibility & GPUShaderStage.VERTEX) !== 0 &&\n        (entry.buffer?.type === 'storage' || entry.buffer?.type === 'read-only-storage') &&\n        !(t.device.limits.maxStorageBuffersInVertexStage! >= 2),\n      `maxStorageBuffersInVertexStage(${t.device.limits.maxStorageBuffersInVertexStage}) < 2`\n    );\n    t.skipIf(\n      (visibility & GPUShaderStage.VERTEX) !== 0 &&\n        entry.storageTexture !== undefined &&\n        !(t.device.limits.maxStorageTexturesInVertexStage! >= 1),\n      `maxStorageTexturesInVertexStage(${t.device.limits.maxStorageTexturesInVertexStage}) < 1`\n    );\n  }\n}\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsGPUTest);\n\ng.test('binding_count_mismatch')\n  .desc('Test that the number of entries must match the number of entries in the BindGroupLayout.')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('layoutEntryCount', [1, 2, 3])\n      .combine('bindGroupEntryCount', [1, 2, 3])\n  )\n  .fn(t => {\n    const { layoutEntryCount, bindGroupEntryCount } = t.params;\n\n    const layoutEntries: Array<GPUBindGroupLayoutEntry> = [];\n    for (let i = 0; i < layoutEntryCount; ++i) {\n      layoutEntries.push({\n        binding: i,\n        visibility: GPUShaderStage.COMPUTE,\n        buffer: { type: 'storage' },\n      });\n    }\n    const bindGroupLayout = t.device.createBindGroupLayout({ entries: layoutEntries });\n\n    const entries: Array<GPUBindGroupEntry> = [];\n    for (let i = 0; i < bindGroupEntryCount; ++i) {\n      entries.push({\n        binding: i,\n        resource: { buffer: vtu.getStorageBuffer(t) },\n      });\n    }\n\n    const shouldError = layoutEntryCount !== bindGroupEntryCount;\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries,\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('binding_must_be_present_in_layout')\n  .desc(\n    'Test that the binding slot for each entry matches a binding slot defined in the BindGroupLayout.'\n  )\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('layoutBinding', [0, 1, 2])\n      .combine('binding', [0, 1, 2])\n  )\n  .fn(t => {\n    const { layoutBinding, binding } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        { binding: layoutBinding, visibility: GPUShaderStage.COMPUTE, buffer: { type: 'storage' } },\n      ],\n    });\n\n    const descriptor = {\n      entries: [{ binding, resource: { buffer: vtu.getStorageBuffer(t) } }],\n      layout: bindGroupLayout,\n    };\n\n    const shouldError = layoutBinding !== binding;\n    t.expectValidationError(() => {\n      t.device.createBindGroup(descriptor);\n    }, shouldError);\n  });\n\ng.test('binding_must_contain_resource_defined_in_layout')\n  .desc(\n    'Test that only compatible resource types specified in the BindGroupLayout are allowed for each entry.'\n  )\n  .params(u =>\n    u //\n      .combine('resourceType', kBindableResources)\n      .combine('entry', allBindingEntries(false, kTestFormat))\n  )\n  .fn(t => {\n    const { resourceType, entry } = t.params;\n    const info = bindingTypeInfo(entry);\n\n    const layout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility: GPUShaderStage.COMPUTE, ...entry }],\n    });\n\n    const resource = vtu.getBindingResource(t, resourceType);\n\n    const isStorageTextureResourceType = (resourceType: BindableResource) => {\n      switch (resourceType) {\n        case 'readonlyStorageTex':\n        case 'readwriteStorageTex':\n        case 'writeonlyStorageTex':\n          return true;\n        default:\n          return false;\n      }\n    };\n\n    let resourceBindingIsCompatible;\n    switch (info.resource) {\n      // Either type of sampler may be bound to a filtering sampler binding.\n      case 'filtSamp':\n        resourceBindingIsCompatible = resourceType === 'filtSamp' || resourceType === 'nonFiltSamp';\n        break;\n      // But only non-filtering samplers can be used with non-filtering sampler bindings.\n      case 'nonFiltSamp':\n        resourceBindingIsCompatible = resourceType === 'nonFiltSamp';\n        break;\n      case 'readonlyStorageTex':\n      case 'readwriteStorageTex':\n      case 'writeonlyStorageTex':\n        resourceBindingIsCompatible = isStorageTextureResourceType(resourceType);\n        break;\n      default:\n        resourceBindingIsCompatible = info.resource === resourceType;\n        break;\n    }\n    t.expectValidationError(() => {\n      t.device.createBindGroup({ layout, entries: [{ binding: 0, resource }] });\n    }, !resourceBindingIsCompatible);\n  });\n\ng.test('texture_binding_must_have_correct_usage')\n  .desc('Tests that texture bindings must have the correct usage.')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('entry', sampledAndStorageBindingEntries(false, kTestFormat))\n      .combine('usage', kTextureUsages)\n      .unless(({ entry, usage }) => {\n        const info = texBindingTypeInfo(entry);\n        // TRANSIENT_ATTACHMENT is only valid when combined with RENDER_ATTACHMENT, so skip.\n        if (\n          usage === GPUConst.TextureUsage.TRANSIENT_ATTACHMENT &&\n          info.resource !== 'sampledTexMS'\n        ) {\n          return true;\n        }\n        // Can't create the texture for this (usage=STORAGE_BINDING and sampleCount=4), so skip.\n        return usage === GPUConst.TextureUsage.STORAGE_BINDING && info.resource === 'sampledTexMS';\n      })\n  )\n  .fn(t => {\n    const { entry, usage } = t.params;\n    const info = texBindingTypeInfo(entry);\n\n    t.skipIf(\n      t.isCompatibility && info.resource === 'sampledTexMS',\n      \"The test requires 'r32float' multisampled support which compat mode doesn't guarantee.\"\n    );\n\n    // MAINTENANCE_TODO(#4509): Remove this when TRANSIENT_ATTACHMENT is added to the WebGPU spec.\n    if ((usage & GPUConst.TextureUsage.TRANSIENT_ATTACHMENT) !== 0) {\n      t.skipIfTransientAttachmentNotSupported();\n    }\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility: GPUShaderStage.COMPUTE, ...entry }],\n    });\n\n    // The `RENDER_ATTACHMENT` usage must be specified if sampleCount > 1 according to WebGPU SPEC.\n    const appliedUsage =\n      info.resource === 'sampledTexMS' ? usage | GPUConst.TextureUsage.RENDER_ATTACHMENT : usage;\n\n    const descriptor = {\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: kTestFormat,\n      usage: appliedUsage,\n      sampleCount: info.resource === 'sampledTexMS' ? 4 : 1,\n    };\n    const resource = t.createTextureTracked(descriptor).createView();\n\n    const shouldError = (usage & info.usage) === 0;\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource }],\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('texture_must_have_correct_component_type')\n  .desc(\n    `\n    Tests that texture bindings must have a format that matches the sample type specified in the BindGroupLayout.\n    - Tests a compatible format for every sample type\n    - Tests an incompatible format for every sample type`\n  )\n  .params(u => u.combine('sampleType', ['float', 'sint', 'uint'] as const))\n  .fn(t => {\n    const { sampleType } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          texture: { sampleType },\n        },\n      ],\n    });\n\n    let format: GPUTextureFormat;\n    if (sampleType === 'float') {\n      format = 'r8unorm';\n    } else if (sampleType === 'sint') {\n      format = 'r8sint';\n    } else if (sampleType === 'uint') {\n      format = 'r8uint';\n    } else {\n      unreachable('Unexpected texture component type');\n    }\n\n    const goodDescriptor = {\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    // Control case\n    t.device.createBindGroup({\n      entries: [\n        {\n          binding: 0,\n          resource: t.createTextureTracked(goodDescriptor).createView(),\n        },\n      ],\n      layout: bindGroupLayout,\n    });\n\n    function* mismatchedTextureFormats(): Iterable<GPUTextureFormat> {\n      if (sampleType !== 'float') {\n        yield 'r8unorm';\n      }\n      if (sampleType !== 'sint') {\n        yield 'r8sint';\n      }\n      if (sampleType !== 'uint') {\n        yield 'r8uint';\n      }\n    }\n\n    // Mismatched texture binding formats are not valid.\n    for (const mismatchedTextureFormat of mismatchedTextureFormats()) {\n      const badDescriptor: GPUTextureDescriptor = clone(goodDescriptor);\n      badDescriptor.format = mismatchedTextureFormat;\n\n      t.expectValidationError(() => {\n        t.device.createBindGroup({\n          entries: [{ binding: 0, resource: t.createTextureTracked(badDescriptor).createView() }],\n          layout: bindGroupLayout,\n        });\n      });\n    }\n  });\n\ng.test('texture_must_have_correct_dimension')\n  .desc(\n    `\n    Test that bound texture views match the dimensions supplied in the BindGroupLayout\n      - Test for every GPUTextureViewDimension\n      - Test for both TEXTURE_BINDING and STORAGE_BINDING.\n  `\n  )\n  .params(u =>\n    u\n      .combine('usage', [\n        GPUConst.TextureUsage.TEXTURE_BINDING,\n        GPUConst.TextureUsage.STORAGE_BINDING,\n      ])\n      .combine('viewDimension', kTextureViewDimensions)\n      .unless(\n        p =>\n          p.usage === GPUConst.TextureUsage.STORAGE_BINDING &&\n          (p.viewDimension === 'cube' || p.viewDimension === 'cube-array')\n      )\n      .beginSubcases()\n      .combine('dimension', kTextureViewDimensions)\n  )\n  .fn(t => {\n    const { usage, viewDimension, dimension } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        usage === GPUTextureUsage.TEXTURE_BINDING\n          ? {\n              binding: 0,\n              visibility: GPUShaderStage.COMPUTE,\n              texture: { viewDimension },\n            }\n          : {\n              binding: 0,\n              visibility: GPUShaderStage.COMPUTE,\n              storageTexture: { access: 'write-only', format: 'rgba8unorm', viewDimension },\n            },\n      ],\n    });\n\n    let height = 16;\n    let depthOrArrayLayers = 6;\n    if (dimension === '1d') {\n      height = 1;\n      depthOrArrayLayers = 1;\n    }\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height, depthOrArrayLayers },\n      format: 'rgba8unorm' as const,\n      usage,\n      dimension: getTextureDimensionFromView(dimension),\n    });\n\n    t.skipIfTextureViewDimensionNotSupported(viewDimension, dimension);\n    if (t.isCompatibility && texture.dimension === '2d') {\n      if (depthOrArrayLayers === 1) {\n        t.skipIf(\n          viewDimension !== '2d',\n          '1 layer 2d textures default to textureBindingViewDimension: \"2d\" in compat mode'\n        );\n      } else {\n        t.skipIf(\n          viewDimension !== '2d-array',\n          '> 1 layer 2d textures default to textureBindingViewDimension \"2d-array\" in compat mode'\n        );\n      }\n    }\n\n    const shouldError = viewDimension !== dimension;\n    const textureView = texture.createView({ dimension });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('multisampled_validation')\n  .desc(\n    `\n    Test that the sample count of the texture is greater than 1 if the BindGroup entry's\n    multisampled is true. Otherwise, the texture's sampleCount should be 1.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('multisampled', [true, false])\n      .beginSubcases()\n      .combine('sampleCount', [1, 4])\n  )\n  .fn(t => {\n    const { multisampled, sampleCount } = t.params;\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          texture: { multisampled, sampleType: multisampled ? 'unfilterable-float' : undefined },\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT,\n      sampleCount,\n    });\n\n    const isValid = (!multisampled && sampleCount === 1) || (multisampled && sampleCount > 1);\n\n    const textureView = texture.createView();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer_offset_and_size_for_bind_groups_match')\n  .desc(\n    `\n    Test that a buffer binding's [offset, offset + size) must be contained in the BindGroup entry's buffer.\n    - Test for various offsets and sizes`\n  )\n  .paramsSubcasesOnly([\n    { offset: 0, size: 512, _success: true }, // offset 0 is valid\n    { offset: 256, size: 256, _success: true }, // offset 256 (aligned) is valid\n    { bindBufferResource: true, _success: true }, // full buffer is valid\n\n    // Touching the end of the buffer\n    { offset: 0, size: 1024, _success: true },\n    { offset: 0, size: undefined, _success: true },\n    { offset: 256 * 3, size: 256, _success: true },\n    { offset: 256 * 3, size: undefined, _success: true },\n\n    // Zero-sized bindings\n    { offset: 0, size: 0, _success: false },\n    { offset: 256, size: 0, _success: false },\n    { offset: 1024, size: 0, _success: false },\n    { offset: 1024, size: undefined, _success: false },\n\n    // Unaligned buffer offset is invalid\n    { offset: 1, size: 256, _success: false },\n    { offset: 1, size: undefined, _success: false },\n    { offset: 127, size: 256, _success: false },\n    { offset: 255, size: 256, _success: false },\n\n    // Out-of-bounds\n    { offset: 256 * 5, size: 0, _success: false }, // offset is OOB\n    { offset: 0, size: 256 * 5, _success: false }, // size is OOB\n    { offset: 1024, size: 1, _success: false }, // offset+size is OOB\n  ])\n  .fn(t => {\n    const { bindBufferResource, offset, size, _success } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility: GPUShaderStage.COMPUTE, buffer: { type: 'storage' } }],\n    });\n\n    const buffer = t.createBufferTracked({\n      size: 1024,\n      usage: GPUBufferUsage.STORAGE,\n    });\n\n    const resource = bindBufferResource ? buffer : { buffer, offset, size };\n    const descriptor = {\n      entries: [\n        {\n          binding: 0,\n          resource,\n        },\n      ],\n      layout: bindGroupLayout,\n    };\n\n    if (_success) {\n      // Control case\n      t.device.createBindGroup(descriptor);\n    } else {\n      // Buffer offset and/or size don't match in bind groups.\n      t.expectValidationError(() => {\n        t.device.createBindGroup(descriptor);\n      });\n    }\n  });\n\ng.test('minBindingSize')\n  .desc('Tests that minBindingSize is correctly enforced.')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('minBindingSize', [undefined, 4, 8, 256])\n      .expand('size', ({ minBindingSize }) =>\n        minBindingSize !== undefined\n          ? [minBindingSize - 4, minBindingSize, minBindingSize + 4]\n          : [4, 256]\n      )\n  )\n  .fn(t => {\n    const { size, minBindingSize } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: {\n            type: 'storage',\n            minBindingSize,\n          },\n        },\n      ],\n    });\n\n    const storageBuffer = t.createBufferTracked({\n      size,\n      usage: GPUBufferUsage.STORAGE,\n    });\n\n    t.expectValidationError(\n      () => {\n        t.device.createBindGroup({\n          layout: bindGroupLayout,\n          entries: [\n            {\n              binding: 0,\n              resource: { buffer: storageBuffer },\n            },\n          ],\n        });\n      },\n      minBindingSize !== undefined && size < minBindingSize\n    );\n  });\n\nconst kAllShaderStages =\n  GPUConst.ShaderStage.COMPUTE | GPUConst.ShaderStage.FRAGMENT | GPUConst.ShaderStage.VERTEX;\n\ng.test('buffer,resource_state')\n  .desc('Test bind group creation with various buffer resource states')\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('state', kResourceStates)\n      .combine('entry', bufferBindingEntries(true))\n      .combine('visibilityMask', [kAllShaderStages, GPUConst.ShaderStage.COMPUTE] as const)\n      .combine('bindBufferResource', [false, true] as const)\n  )\n  .fn(t => {\n    const { state, entry, visibilityMask, bindBufferResource } = t.params;\n\n    assert(entry.buffer !== undefined);\n    const info = bufferBindingTypeInfo(entry.buffer);\n\n    const visibility = info.validStages & visibilityMask;\n    skipIfResourceNotSupportedInStages(t, entry, visibility);\n\n    const bgl = t.device.createBindGroupLayout({\n      entries: [\n        {\n          ...entry,\n          binding: 0,\n          visibility,\n        },\n      ],\n    });\n\n    const buffer = vtu.createBufferWithState(t, state, {\n      usage: info.usage,\n      size: 4,\n    });\n\n    const resource = bindBufferResource ? buffer : { buffer };\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource,\n          },\n        ],\n      });\n    }, state === 'invalid');\n  });\n\ng.test('texture,resource_state')\n  .desc('Test bind group creation with various texture resource states')\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('state', kResourceStates)\n      .combine('entry', sampledAndStorageBindingEntries(true, kTestFormat))\n      .combine('visibilityMask', [kAllShaderStages, GPUConst.ShaderStage.COMPUTE] as const)\n      .combine('bindTextureResource', [false, true] as const)\n  )\n  .fn(t => {\n    const { state, entry, visibilityMask, bindTextureResource } = t.params;\n    const info = texBindingTypeInfo(entry);\n\n    const visibility = info.validStages & visibilityMask;\n    skipIfResourceNotSupportedInStages(t, entry, visibility);\n\n    const bgl = t.device.createBindGroupLayout({\n      entries: [\n        {\n          ...entry,\n          binding: 0,\n          visibility,\n        },\n      ],\n    });\n\n    // The `RENDER_ATTACHMENT` usage must be specified if sampleCount > 1 according to WebGPU SPEC.\n    const usage = entry.texture?.multisampled\n      ? info.usage | GPUConst.TextureUsage.RENDER_ATTACHMENT\n      : info.usage;\n    const format = entry.storageTexture !== undefined ? 'r32float' : 'rgba8unorm';\n    const texture = vtu.createTextureWithState(t, state, {\n      usage,\n      size: [1, 1],\n      format,\n      sampleCount: entry.texture?.multisampled ? 4 : 1,\n    });\n\n    let resource: GPUTexture | GPUTextureView;\n    if (bindTextureResource) {\n      resource = texture;\n    } else {\n      t.expectValidationError(() => {\n        resource = texture.createView();\n      }, state === 'invalid');\n    }\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [{ binding: 0, resource }],\n      });\n    }, state === 'invalid');\n  });\n\ng.test('bind_group_layout,device_mismatch')\n  .desc(\n    'Tests createBindGroup cannot be called with a bind group layout created from another device'\n  )\n  .paramsSubcasesOnly(u => u.combine('mismatched', [true, false]))\n  .beforeAllSubcases(t => t.usesMismatchedDevice())\n  .fn(t => {\n    const mismatched = t.params.mismatched;\n\n    const sourceDevice = mismatched ? t.mismatchedDevice : t.device;\n\n    const bgl = sourceDevice.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUConst.ShaderStage.COMPUTE,\n          buffer: {},\n        },\n      ],\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: { buffer: vtu.getUniformBuffer(t) },\n          },\n        ],\n      });\n    }, mismatched);\n  });\n\ng.test('binding_resources,device_mismatch')\n  .desc(\n    `\n    Tests createBindGroup cannot be called with various resources created from another device\n    Test with two resources to make sure all resources can be validated:\n    - resource0 and resource1 from same device\n    - resource0 and resource1 from different device\n\n    TODO: test GPUExternalTexture as a resource\n    `\n  )\n  .params(u =>\n    u\n      .combine('entry', [\n        { buffer: { type: 'storage' } },\n        { sampler: { type: 'filtering' } },\n        { texture: { multisampled: false } },\n        { storageTexture: { access: 'write-only', format: 'r32float' } },\n        { storageTexture: { access: 'read-only', format: 'r32float' } },\n        { storageTexture: { access: 'read-write', format: 'r32float' } },\n      ] as const)\n      .beginSubcases()\n      .combineWithParams([\n        { resource0Mismatched: false, resource1Mismatched: false }, //control case\n        { resource0Mismatched: true, resource1Mismatched: false },\n        { resource0Mismatched: false, resource1Mismatched: true },\n      ])\n      .combine('visibilityMask', [kAllShaderStages, GPUConst.ShaderStage.COMPUTE] as const)\n  )\n  .beforeAllSubcases(t => t.usesMismatchedDevice())\n  .fn(t => {\n    const { entry, resource0Mismatched, resource1Mismatched, visibilityMask } = t.params;\n\n    const info = bindingTypeInfo(entry);\n    const visibility = info.validStages & visibilityMask;\n    skipIfResourceNotSupportedInStages(t, entry, visibility);\n\n    const resource0 = resource0Mismatched\n      ? vtu.getDeviceMismatchedBindingResource(t, info.resource)\n      : vtu.getBindingResource(t, info.resource);\n    const resource1 = resource1Mismatched\n      ? vtu.getDeviceMismatchedBindingResource(t, info.resource)\n      : vtu.getBindingResource(t, info.resource);\n\n    const bgl = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility,\n          ...entry,\n        },\n        {\n          binding: 1,\n          visibility,\n          ...entry,\n        },\n      ],\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        layout: bgl,\n        entries: [\n          {\n            binding: 0,\n            resource: resource0,\n          },\n          {\n            binding: 1,\n            resource: resource1,\n          },\n        ],\n      });\n    }, resource0Mismatched || resource1Mismatched);\n  });\n\ng.test('storage_texture,usage')\n  .desc(\n    `\n    Test that the texture usage contains STORAGE_BINDING if the BindGroup entry defines\n    storageTexture.\n  `\n  )\n  .params(u =>\n    u //\n      // If usage0 and usage1 are the same, the usage being test is a single usage. Otherwise, it's\n      // a combined usage.\n      .combine('usage0', kTextureUsages)\n      .combine('usage1', kTextureUsages)\n      .unless(({ usage0, usage1 }) => {\n        return !isValidTextureUsageCombination(usage0 | usage1);\n      })\n  )\n  .fn(t => {\n    const { usage0, usage1 } = t.params;\n\n    const usage = usage0 | usage1;\n\n    // MAINTENANCE_TODO(#4509): Remove this when TRANSIENT_ATTACHMENT is added to the WebGPU spec.\n    if ((usage & GPUConst.TextureUsage.TRANSIENT_ATTACHMENT) !== 0) {\n      t.skipIfTransientAttachmentNotSupported();\n    }\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          storageTexture: { access: 'write-only', format: 'rgba8unorm' },\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage,\n    });\n\n    const isValid = GPUTextureUsage.STORAGE_BINDING & usage;\n\n    const textureView = texture.createView();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('storage_texture,mip_level_count')\n  .desc(\n    `\n    Test that the mip level count of the resource of the BindGroup entry as a descriptor is 1 if the\n    BindGroup entry defines storageTexture. If the mip level count is not 1, a validation error\n    should be generated.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('baseMipLevel', [1, 2])\n      .combine('mipLevelCount', [1, 2])\n  )\n  .fn(t => {\n    const { baseMipLevel, mipLevelCount } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          storageTexture: { access: 'write-only', format: 'rgba8unorm' },\n        },\n      ],\n    });\n\n    const MIP_LEVEL_COUNT = 4;\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.STORAGE_BINDING,\n      mipLevelCount: MIP_LEVEL_COUNT,\n    });\n\n    const textureView = texture.createView({ baseMipLevel, mipLevelCount });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, mipLevelCount !== 1);\n  });\n\ng.test('storage_texture,format')\n  .desc(\n    `\n    Test that the format of the storage texture is equal to resource's descriptor format if the\n    BindGroup entry defines storageTexture.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('storageTextureFormat', kPossibleStorageTextureFormats)\n      .combine('resourceFormat', kPossibleStorageTextureFormats)\n  )\n  .fn(t => {\n    const { storageTextureFormat, resourceFormat } = t.params;\n    t.skipIfTextureFormatNotSupported(storageTextureFormat, resourceFormat);\n    t.skipIfTextureFormatNotUsableWithStorageAccessMode(\n      'write-only',\n      storageTextureFormat,\n      resourceFormat\n    );\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          storageTexture: { access: 'write-only', format: storageTextureFormat },\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: resourceFormat,\n      usage: GPUTextureUsage.STORAGE_BINDING,\n    });\n\n    const isValid = storageTextureFormat === resourceFormat;\n    const textureView = texture.createView({ format: resourceFormat });\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,usage')\n  .desc(\n    `\n    Test that the buffer usage contains 'UNIFORM' if the BindGroup entry defines buffer and it's\n    type is 'uniform', and the buffer usage contains 'STORAGE' if the BindGroup entry's buffer type\n    is 'storage'|read-only-storage'.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('type', kBufferBindingTypes)\n      // If usage0 and usage1 are the same, the usage being test is a single usage. Otherwise, it's\n      // a combined usage.\n      .beginSubcases()\n      .combine('usage0', kBufferUsages)\n      .combine('usage1', kBufferUsages)\n      .unless(\n        ({ usage0, usage1 }) =>\n          ((usage0 | usage1) & (GPUConst.BufferUsage.MAP_READ | GPUConst.BufferUsage.MAP_WRITE)) !==\n          0\n      )\n  )\n  .fn(t => {\n    const { type, usage0, usage1 } = t.params;\n\n    const usage = usage0 | usage1;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const buffer = t.createBufferTracked({\n      size: 4,\n      usage,\n    });\n\n    let isValid = false;\n    if (type === 'uniform') {\n      isValid = GPUBufferUsage.UNIFORM & usage ? true : false;\n    } else if (type === 'storage' || type === 'read-only-storage') {\n      isValid = GPUBufferUsage.STORAGE & usage ? true : false;\n    }\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,resource_offset')\n  .desc(\n    `\n    Test that the resource.offset of the BindGroup entry is a multiple of limits.\n    'minUniformBufferOffsetAlignment|minStorageBufferOffsetAlignment' if the BindGroup entry defines\n    buffer and the buffer type is 'uniform|storage|read-only-storage'.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('type', kBufferBindingTypes)\n      .beginSubcases()\n      .combine('offsetAddMult', [\n        { add: 0, mult: 0 },\n        { add: 0, mult: 0.5 },\n        { add: 0, mult: 1.5 },\n        { add: 2, mult: 0 },\n      ])\n  )\n  .fn(t => {\n    const { type, offsetAddMult } = t.params;\n    const minAlignment =\n      t.device.limits[\n        type === 'uniform' ? 'minUniformBufferOffsetAlignment' : 'minStorageBufferOffsetAlignment'\n      ];\n    const offset = makeValueTestVariant(minAlignment, offsetAddMult);\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const usage = type === 'uniform' ? GPUBufferUsage.UNIFORM : GPUBufferUsage.STORAGE;\n    const isValid = offset % minAlignment === 0;\n\n    const buffer = t.createBufferTracked({\n      size: 1024,\n      usage,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer, offset } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,resource_binding_size')\n  .desc(\n    `\n    Test that the buffer binding size of the BindGroup entry is equal to or less than limits.\n    'maxUniformBufferBindingSize|maxStorageBufferBindingSize' if the BindGroup entry defines\n    buffer and the buffer type is 'uniform|storage|read-only-storage'.\n  `\n  )\n  .params(u =>\n    u\n      .combine('type', kBufferBindingTypes)\n      .beginSubcases()\n      // Test a size of 1 (for uniform buffer) or 4 (for storage and read-only storage buffer)\n      // then values just within and just above the limit.\n      .combine('bindingSize', [\n        { base: 1, limit: 0 },\n        { base: 0, limit: 1 },\n        { base: 1, limit: 1 },\n      ])\n  )\n  .fn(t => {\n    const {\n      type,\n      bindingSize: { base, limit },\n    } = t.params;\n    const mult = type === 'uniform' ? 1 : 4;\n    const maxBindingSize =\n      t.device.limits[\n        type === 'uniform' ? 'maxUniformBufferBindingSize' : 'maxStorageBufferBindingSize'\n      ];\n    const bindingSize = base * mult + maxBindingSize * limit;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const usage = type === 'uniform' ? GPUBufferUsage.UNIFORM : GPUBufferUsage.STORAGE;\n    const isValid = bindingSize <= maxBindingSize;\n\n    // MAINTENANCE_TODO: Allocating the max size seems likely to fail. Refactor test.\n    const buffer = t.createBufferTracked({\n      size: maxBindingSize,\n      usage,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer, size: bindingSize } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('buffer,effective_buffer_binding_size')\n  .desc(\n    `\n  Test that the effective buffer binding size of the BindGroup entry must be a multiple of 4 if the\n  buffer type is 'storage|read-only-storage', while there is no such restriction on uniform buffers.\n`\n  )\n  .params(u =>\n    u\n      .combine('type', kBufferBindingTypes)\n      .beginSubcases()\n      .combine('offsetMult', [0, 1])\n      .combine('bufferSizeAddition', [8, 10])\n      .combine('bindingSize', [undefined, 2, 4, 6])\n  )\n  .fn(t => {\n    const { type, offsetMult, bufferSizeAddition, bindingSize } = t.params;\n    const minAlignment =\n      t.device.limits[\n        type === 'uniform' ? 'minUniformBufferOffsetAlignment' : 'minStorageBufferOffsetAlignment'\n      ];\n    const offset = minAlignment * offsetMult;\n    const bufferSize = minAlignment + bufferSizeAddition;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          buffer: { type },\n        },\n      ],\n    });\n\n    const effectiveBindingSize = bindingSize ?? bufferSize - offset;\n    let usage, isValid;\n    if (type === 'uniform') {\n      usage = GPUBufferUsage.UNIFORM;\n      isValid = true;\n    } else {\n      usage = GPUBufferUsage.STORAGE;\n      isValid = effectiveBindingSize % 4 === 0;\n    }\n\n    const buffer = t.createBufferTracked({\n      size: bufferSize,\n      usage,\n    });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: { buffer, offset, size: bindingSize } }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('sampler,device_mismatch')\n  .desc(`Tests createBindGroup cannot be called with a sampler created from another device.`)\n  .paramsSubcasesOnly(u => u.combine('mismatched', [true, false]))\n  .beforeAllSubcases(t => t.usesMismatchedDevice())\n  .fn(t => {\n    const { mismatched } = t.params;\n\n    const sourceDevice = mismatched ? t.mismatchedDevice : t.device;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          sampler: { type: 'filtering' as const },\n        },\n      ],\n    });\n\n    const sampler = sourceDevice.createSampler();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: sampler }],\n        layout: bindGroupLayout,\n      });\n    }, mismatched);\n  });\n\ng.test('sampler,compare_function_with_binding_type')\n  .desc(\n    `\n  Test that the sampler of the BindGroup has a 'compareFunction' value if the sampler type of the\n  BindGroupLayout is 'comparison'. Other sampler types should not have 'compare' field in\n  the descriptor of the sampler.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('bgType', kSamplerBindingTypes)\n      .beginSubcases()\n      .combine('compareFunction', [undefined, ...kCompareFunctions])\n  )\n  .fn(t => {\n    const { bgType, compareFunction } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          sampler: { type: bgType },\n        },\n      ],\n    });\n\n    const isValid =\n      bgType === 'comparison' ? compareFunction !== undefined : compareFunction === undefined;\n\n    const sampler = t.device.createSampler({ compare: compareFunction });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: sampler }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('external_texture,texture_view,usage')\n  .desc(\n    `\n    Test that the external texture usage contains TEXTURE_BINDING if the BindGroup entry defines\n    externalTexture for a GPUTextureView resource.\n  `\n  )\n  .params(u =>\n    u //\n      // If usage0 and usage1 are the same, the usage being test is a single usage. Otherwise, it's\n      // a combined usage.\n      .combine('usage0', kTextureUsages)\n      .combine('usage1', kTextureUsages)\n      .unless(({ usage0, usage1 }) => {\n        return !isValidTextureUsageCombination(usage0 | usage1);\n      })\n  )\n  .fn(t => {\n    const { usage0, usage1 } = t.params;\n\n    const usage = usage0 | usage1;\n\n    // MAINTENANCE_TODO(#4509): Remove this when TRANSIENT_ATTACHMENT is added to the WebGPU spec.\n    if ((usage & GPUConst.TextureUsage.TRANSIENT_ATTACHMENT) !== 0) {\n      t.skipIfTransientAttachmentNotSupported();\n    }\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          externalTexture: {},\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage,\n    });\n\n    const isValid = GPUTextureUsage.TEXTURE_BINDING & usage;\n\n    const textureView = texture.createView();\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('external_texture,texture_view,dimension')\n  .desc(\n    `\n    Test that the external texture dimension is 2d if the BindGroup entry defines\n    externalTexture for a GPUTextureView resource.\n  `\n  )\n  .params(u => u.combine('dimension', kTextureViewDimensions))\n  .fn(t => {\n    const { dimension } = t.params;\n    t.skipIfTextureViewDimensionNotSupported(dimension);\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          externalTexture: {},\n        },\n      ],\n    });\n\n    let height = 16;\n    let depthOrArrayLayers = 6;\n    if (dimension === '1d') {\n      height = 1;\n      depthOrArrayLayers = 1;\n    }\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height, depthOrArrayLayers },\n      format: 'rgba8unorm' as const,\n      usage: GPUConst.TextureUsage.TEXTURE_BINDING,\n      dimension: getTextureDimensionFromView(dimension),\n    });\n\n    const shouldError = dimension !== '2d';\n    const textureView = texture.createView({ dimension });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, shouldError);\n  });\n\ng.test('external_texture,texture_view,mip_level_count')\n  .desc(\n    `\n    Test that the mip level count of the resource of the BindGroup entry as a descriptor is 1 if the\n    BindGroup entry defines externalTexture for a GPUTextureView resource. If the mip level count is\n    not 1, a validation error should be generated.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('baseMipLevel', [1, 2])\n      .combine('mipLevelCount', [1, 2])\n  )\n  .fn(t => {\n    const { baseMipLevel, mipLevelCount } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          externalTexture: {},\n        },\n      ],\n    });\n\n    const MIP_LEVEL_COUNT = 4;\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n      mipLevelCount: MIP_LEVEL_COUNT,\n    });\n\n    const textureView = texture.createView({ baseMipLevel, mipLevelCount });\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, mipLevelCount !== 1);\n  });\n\ng.test('external_texture,texture_view,format')\n  .desc(\n    `\n    Test that the format of the external texture is \"rgba8unorm\", \"bgra8unorm\", or \"rgba16float\"\n    if the BindGroup entry defines externalTexture for a GPUTextureView resource.\n  `\n  )\n  .params(u => u.combine('format', kRegularTextureFormats))\n  .fn(t => {\n    const { format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          externalTexture: {},\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    });\n\n    const isValid = format === 'rgba8unorm' || format === 'bgra8unorm' || format === 'rgba16float';\n    const textureView = texture.createView({ format });\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, !isValid);\n  });\n\ng.test('external_texture,texture_view,sample_count')\n  .desc(\n    `\n  Test that the sample count of the resource of the BindGroup entry as a texture is 1 if the\n  BindGroup entry defines externalTexture for a GPUTextureView resource. If the sample count is\n  not 1, a validation error should be generated.\n`\n  )\n  .params(u => u.combine('sampleCount', [1, 4]))\n  .fn(t => {\n    const { sampleCount } = t.params;\n\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.FRAGMENT,\n          externalTexture: {},\n        },\n      ],\n    });\n\n    const texture = t.createTextureTracked({\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT,\n      sampleCount,\n    });\n\n    const textureView = texture.createView();\n\n    t.expectValidationError(() => {\n      t.device.createBindGroup({\n        entries: [{ binding: 0, resource: textureView }],\n        layout: bindGroupLayout,\n      });\n    }, sampleCount !== 1);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA,CAAC,CAED,SAASC,2BAA2B,EAAEC,eAAe,QAAQ,qBAAqB;AAClF,SAASC,aAAa,QAAQ,yCAAyC;AACvE,SAASC,MAAM,EAAEC,oBAAoB,EAAEC,WAAW,QAAQ,8BAA8B;AACxF;EACEC,iBAAiB;;;EAGjBC,eAAe;EACfC,oBAAoB;EACpBC,qBAAqB;EACrBC,kBAAkB;EAClBC,mBAAmB;EACnBC,aAAa;EACbC,iBAAiB;EACjBC,oBAAoB;EACpBC,cAAc;EACdC,sBAAsB;EACtBC,+BAA+B;EAC/BC,kBAAkB;EAClBC,8BAA8B;AACzB,0BAA0B;AACjC,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,8BAA8B,EAAEC,sBAAsB,QAAQ,sBAAsB;AAC7F,SAASC,2BAA2B,QAAQ,4BAA4B;;AAExE,OAAO,KAAKC,GAAG,MAAM,4BAA4B;;AAEjD,MAAMC,WAA6B,GAAG,UAAU;;AAEhD,SAASC,KAAKA,CAAiCC,UAAa,EAAK;EAC/D,OAAOC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACH,UAAU,CAAC,CAAC;AAC/C;;AAEA,SAASI,kCAAkCA;AACzCC,CAA8B;AAC9BC,KAAe;AACfC,UAAkB;AAClB;EACA,IAAIF,CAAC,CAACG,eAAe,EAAE;IACrBH,CAAC,CAACI,MAAM;MACN,CAACF,UAAU,GAAGG,cAAc,CAACC,QAAQ,MAAM,CAAC;MACzCL,KAAK,CAACM,MAAM,EAAEC,IAAI,KAAK,SAAS,IAAIP,KAAK,CAACM,MAAM,EAAEC,IAAI,KAAK,mBAAmB,CAAC;MAChF,EAAER,CAAC,CAACS,MAAM,CAACC,MAAM,CAACC,gCAAgC,IAAK,CAAC,CAAC;MAC1D,oCAAmCX,CAAC,CAACS,MAAM,CAACC,MAAM,CAACC,gCAAiC;IACvF,CAAC;IACDX,CAAC,CAACI,MAAM;MACN,CAACF,UAAU,GAAGG,cAAc,CAACC,QAAQ,MAAM,CAAC;MAC1CL,KAAK,CAACW,cAAc,KAAKC,SAAS;MAClC,EAAEb,CAAC,CAACS,MAAM,CAACC,MAAM,CAACI,iCAAiC,IAAK,CAAC,CAAC;MAC3D,qCAAoCd,CAAC,CAACS,MAAM,CAACC,MAAM,CAACI,iCAAkC;IACzF,CAAC;IACDd,CAAC,CAACI,MAAM;MACN,CAACF,UAAU,GAAGG,cAAc,CAACU,MAAM,MAAM,CAAC;MACvCd,KAAK,CAACM,MAAM,EAAEC,IAAI,KAAK,SAAS,IAAIP,KAAK,CAACM,MAAM,EAAEC,IAAI,KAAK,mBAAmB,CAAC;MAChF,EAAER,CAAC,CAACS,MAAM,CAACC,MAAM,CAACM,8BAA8B,IAAK,CAAC,CAAC;MACxD,kCAAiChB,CAAC,CAACS,MAAM,CAACC,MAAM,CAACM,8BAA+B;IACnF,CAAC;IACDhB,CAAC,CAACI,MAAM;MACN,CAACF,UAAU,GAAGG,cAAc,CAACU,MAAM,MAAM,CAAC;MACxCd,KAAK,CAACW,cAAc,KAAKC,SAAS;MAClC,EAAEb,CAAC,CAACS,MAAM,CAACC,MAAM,CAACO,+BAA+B,IAAK,CAAC,CAAC;MACzD,mCAAkCjB,CAAC,CAACS,MAAM,CAACC,MAAM,CAACO,+BAAgC;IACrF,CAAC;EACH;AACF;;AAEA,OAAO,MAAMC,CAAC,GAAGhD,aAAa,CAACF,2BAA2B,CAAC;;AAE3DkD,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;AAC7BC,IAAI,CAAC,0FAA0F,CAAC;AAChGC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,kBAAkB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACtCA,OAAO,CAAC,qBAAqB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC7C,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEyB,gBAAgB,EAAEC,mBAAmB,CAAC,CAAC,GAAG1B,CAAC,CAAC2B,MAAM;;EAE1D,MAAMC,aAA6C,GAAG,EAAE;EACxD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,gBAAgB,EAAE,EAAEI,CAAC,EAAE;IACzCD,aAAa,CAACE,IAAI,CAAC;MACjBC,OAAO,EAAEF,CAAC;MACV3B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCzB,MAAM,EAAE,EAAEC,IAAI,EAAE,SAAS,CAAC;IAC5B,CAAC,CAAC;EACJ;EACA,MAAMyB,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC,EAAEC,OAAO,EAAEP,aAAa,CAAC,CAAC,CAAC;;EAElF,MAAMO,OAAiC,GAAG,EAAE;EAC5C,KAAK,IAAIN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,mBAAmB,EAAE,EAAEG,CAAC,EAAE;IAC5CM,OAAO,CAACL,IAAI,CAAC;MACXC,OAAO,EAAEF,CAAC;MACVO,QAAQ,EAAE,EAAE7B,MAAM,EAAEf,GAAG,CAAC6C,gBAAgB,CAACrC,CAAC,CAAC,CAAC;IAC9C,CAAC,CAAC;EACJ;;EAEA,MAAMsC,WAAW,GAAGb,gBAAgB,KAAKC,mBAAmB;EAC5D1B,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO;MACPM,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEK,WAAW,CAAC;AACjB,CAAC,CAAC;;AAEJpB,CAAC,CAACC,IAAI,CAAC,mCAAmC,CAAC;AACxCC,IAAI;EACH;AACF,CAAC;AACAC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACnCA,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACjC,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE0C,aAAa,EAAEX,OAAO,CAAC,CAAC,GAAG/B,CAAC,CAAC2B,MAAM;;EAE3C,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP,EAAEJ,OAAO,EAAEW,aAAa,EAAExC,UAAU,EAAEG,cAAc,CAAC2B,OAAO,EAAEzB,MAAM,EAAE,EAAEC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;;EAE/F,CAAC,CAAC;;EAEF,MAAMb,UAAU,GAAG;IACjBwC,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAEK,QAAQ,EAAE,EAAE7B,MAAM,EAAEf,GAAG,CAAC6C,gBAAgB,CAACrC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrEyC,MAAM,EAAER;EACV,CAAC;;EAED,MAAMK,WAAW,GAAGI,aAAa,KAAKX,OAAO;EAC7C/B,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC7C,UAAU,CAAC;EACtC,CAAC,EAAE2C,WAAW,CAAC;AACjB,CAAC,CAAC;;AAEJpB,CAAC,CAACC,IAAI,CAAC,iDAAiD,CAAC;AACtDC,IAAI;EACH;AACF,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,cAAc,EAAE7C,kBAAkB,CAAC;AAC3C6C,OAAO,CAAC,OAAO,EAAEjD,iBAAiB,CAAC,KAAK,EAAEmB,WAAW,CAAC;AAC3D,CAAC;AACA+B,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE2C,YAAY,EAAE1C,KAAK,CAAC,CAAC,GAAGD,CAAC,CAAC2B,MAAM;EACxC,MAAMiB,IAAI,GAAGrE,eAAe,CAAC0B,KAAK,CAAC;;EAEnC,MAAMwC,MAAM,GAAGzC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IAC5CC,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAE7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO,EAAE,GAAG/B,KAAK,CAAC,CAAC;EACxE,CAAC,CAAC;;EAEF,MAAMmC,QAAQ,GAAG5C,GAAG,CAACqD,kBAAkB,CAAC7C,CAAC,EAAE2C,YAAY,CAAC;;EAExD,MAAMG,4BAA4B,GAAGA,CAACH,YAA8B,KAAK;IACvE,QAAQA,YAAY;MAClB,KAAK,oBAAoB;MACzB,KAAK,qBAAqB;MAC1B,KAAK,qBAAqB;QACxB,OAAO,IAAI;MACb;QACE,OAAO,KAAK;IAChB;EACF,CAAC;;EAED,IAAII,2BAA2B;EAC/B,QAAQH,IAAI,CAACR,QAAQ;IACnB;IACA,KAAK,UAAU;MACbW,2BAA2B,GAAGJ,YAAY,KAAK,UAAU,IAAIA,YAAY,KAAK,aAAa;MAC3F;IACF;IACA,KAAK,aAAa;MAChBI,2BAA2B,GAAGJ,YAAY,KAAK,aAAa;MAC5D;IACF,KAAK,oBAAoB;IACzB,KAAK,qBAAqB;IAC1B,KAAK,qBAAqB;MACxBI,2BAA2B,GAAGD,4BAA4B,CAACH,YAAY,CAAC;MACxE;IACF;MACEI,2BAA2B,GAAGH,IAAI,CAACR,QAAQ,KAAKO,YAAY;MAC5D;EACJ;EACA3C,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC,EAAEC,MAAM,EAAEN,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3E,CAAC,EAAE,CAACW,2BAA2B,CAAC;AAClC,CAAC,CAAC;;AAEJ7B,CAAC,CAACC,IAAI,CAAC,yCAAyC,CAAC;AAC9CC,IAAI,CAAC,0DAA0D,CAAC;AAChEC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,OAAO,EAAEtC,+BAA+B,CAAC,KAAK,EAAEQ,WAAW,CAAC,CAAC;AACrE8B,OAAO,CAAC,OAAO,EAAExC,cAAc,CAAC;AAChCiE,MAAM,CAAC,CAAC,EAAE/C,KAAK,EAAEgD,KAAK,CAAC,CAAC,KAAK;EAC5B,MAAML,IAAI,GAAG1D,kBAAkB,CAACe,KAAK,CAAC;EACtC;EACA;EACEgD,KAAK,KAAK7D,QAAQ,CAAC8D,YAAY,CAACC,oBAAoB;EACpDP,IAAI,CAACR,QAAQ,KAAK,cAAc;EAChC;IACA,OAAO,IAAI;EACb;EACA;EACA,OAAOa,KAAK,KAAK7D,QAAQ,CAAC8D,YAAY,CAACE,eAAe,IAAIR,IAAI,CAACR,QAAQ,KAAK,cAAc;AAC5F,CAAC;AACL,CAAC;AACAZ,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEC,KAAK,EAAEgD,KAAK,CAAC,CAAC,GAAGjD,CAAC,CAAC2B,MAAM;EACjC,MAAMiB,IAAI,GAAG1D,kBAAkB,CAACe,KAAK,CAAC;;EAEtCD,CAAC,CAACI,MAAM;IACNJ,CAAC,CAACG,eAAe,IAAIyC,IAAI,CAACR,QAAQ,KAAK,cAAc;IACrD;EACF,CAAC;;EAED;EACA,IAAI,CAACa,KAAK,GAAG7D,QAAQ,CAAC8D,YAAY,CAACC,oBAAoB,MAAM,CAAC,EAAE;IAC9DnD,CAAC,CAACqD,qCAAqC,CAAC,CAAC;EAC3C;;EAEA,MAAMpB,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAE7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO,EAAE,GAAG/B,KAAK,CAAC,CAAC;EACxE,CAAC,CAAC;;EAEF;EACA,MAAMqD,YAAY;EAChBV,IAAI,CAACR,QAAQ,KAAK,cAAc,GAAGa,KAAK,GAAG7D,QAAQ,CAAC8D,YAAY,CAACK,iBAAiB,GAAGN,KAAK;;EAE5F,MAAMtD,UAAU,GAAG;IACjB6D,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAEnE,WAAW;IACnBwD,KAAK,EAAEK,YAAY;IACnBO,WAAW,EAAEjB,IAAI,CAACR,QAAQ,KAAK,cAAc,GAAG,CAAC,GAAG;EACtD,CAAC;EACD,MAAMA,QAAQ,GAAGpC,CAAC,CAAC8D,oBAAoB,CAACnE,UAAU,CAAC,CAACoE,UAAU,CAAC,CAAC;;EAEhE,MAAMzB,WAAW,GAAG,CAACW,KAAK,GAAGL,IAAI,CAACK,KAAK,MAAM,CAAC;EAC9CjD,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,CAAC,CAAC,CAAC;MACnCK,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEK,WAAW,CAAC;AACjB,CAAC,CAAC;;AAEJpB,CAAC,CAACC,IAAI,CAAC,0CAA0C,CAAC;AAC/CC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,YAAY,EAAE,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAU,CAAC,CAAC;AACxEC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEgE,UAAU,CAAC,CAAC,GAAGhE,CAAC,CAAC2B,MAAM;;EAE/B,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAACC,QAAQ;MACnC2D,OAAO,EAAE,EAAED,UAAU,CAAC;IACxB,CAAC;;EAEL,CAAC,CAAC;;EAEF,IAAIJ,MAAwB;EAC5B,IAAII,UAAU,KAAK,OAAO,EAAE;IAC1BJ,MAAM,GAAG,SAAS;EACpB,CAAC,MAAM,IAAII,UAAU,KAAK,MAAM,EAAE;IAChCJ,MAAM,GAAG,QAAQ;EACnB,CAAC,MAAM,IAAII,UAAU,KAAK,MAAM,EAAE;IAChCJ,MAAM,GAAG,QAAQ;EACnB,CAAC,MAAM;IACLvF,WAAW,CAAC,mCAAmC,CAAC;EAClD;;EAEA,MAAM6F,cAAc,GAAG;IACrBV,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM;IACNX,KAAK,EAAEkB,eAAe,CAACC;EACzB,CAAC;;EAED;EACApE,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;IACvBL,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACVK,QAAQ,EAAEpC,CAAC,CAAC8D,oBAAoB,CAACI,cAAc,CAAC,CAACH,UAAU,CAAC;IAC9D,CAAC,CACF;;IACDtB,MAAM,EAAER;EACV,CAAC,CAAC;;EAEF,UAAUoC,wBAAwBA,CAAA,EAA+B;IAC/D,IAAIL,UAAU,KAAK,OAAO,EAAE;MAC1B,MAAM,SAAS;IACjB;IACA,IAAIA,UAAU,KAAK,MAAM,EAAE;MACzB,MAAM,QAAQ;IAChB;IACA,IAAIA,UAAU,KAAK,MAAM,EAAE;MACzB,MAAM,QAAQ;IAChB;EACF;;EAEA;EACA,KAAK,MAAMM,uBAAuB,IAAID,wBAAwB,CAAC,CAAC,EAAE;IAChE,MAAME,aAAmC,GAAG7E,KAAK,CAACwE,cAAc,CAAC;IACjEK,aAAa,CAACX,MAAM,GAAGU,uBAAuB;;IAE9CtE,CAAC,CAACuC,qBAAqB,CAAC,MAAM;MAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;QACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAEpC,CAAC,CAAC8D,oBAAoB,CAACS,aAAa,CAAC,CAACR,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACvFtB,MAAM,EAAER;MACV,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;;AAEJf,CAAC,CAACC,IAAI,CAAC,qCAAqC,CAAC;AAC1CC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,OAAO,EAAE;AAChBnC,QAAQ,CAAC8D,YAAY,CAACkB,eAAe;AACrChF,QAAQ,CAAC8D,YAAY,CAACE,eAAe;AACtC,CAAC;AACD7B,OAAO,CAAC,eAAe,EAAEvC,sBAAsB,CAAC;AAChDgE,MAAM;EACL,CAAAwB,CAAC;EACCA,CAAC,CAACvB,KAAK,KAAK7D,QAAQ,CAAC8D,YAAY,CAACE,eAAe;EAChDoB,CAAC,CAACC,aAAa,KAAK,MAAM,IAAID,CAAC,CAACC,aAAa,KAAK,YAAY;AACnE,CAAC;AACAC,aAAa,CAAC,CAAC;AACfnD,OAAO,CAAC,WAAW,EAAEvC,sBAAsB;AAChD,CAAC;AACAwC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEiD,KAAK,EAAEwB,aAAa,EAAEE,SAAS,CAAC,CAAC,GAAG3E,CAAC,CAAC2B,MAAM;;EAEpD,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACPc,KAAK,KAAKkB,eAAe,CAACC,eAAe;IACrC;MACErC,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCiC,OAAO,EAAE,EAAEQ,aAAa,CAAC;IAC3B,CAAC;IACD;MACE1C,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCpB,cAAc,EAAE,EAAEgE,MAAM,EAAE,YAAY,EAAEhB,MAAM,EAAE,YAAY,EAAEa,aAAa,CAAC;IAC9E,CAAC;;EAET,CAAC,CAAC;;EAEF,IAAIf,MAAM,GAAG,EAAE;EACf,IAAIC,kBAAkB,GAAG,CAAC;EAC1B,IAAIgB,SAAS,KAAK,IAAI,EAAE;IACtBjB,MAAM,GAAG,CAAC;IACVC,kBAAkB,GAAG,CAAC;EACxB;;EAEA,MAAMM,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAEC,kBAAkB,CAAC,CAAC;IAC/CC,MAAM,EAAE,YAAqB;IAC7BX,KAAK;IACL0B,SAAS,EAAEpF,2BAA2B,CAACoF,SAAS;EAClD,CAAC,CAAC;;EAEF3E,CAAC,CAAC6E,sCAAsC,CAACJ,aAAa,EAAEE,SAAS,CAAC;EAClE,IAAI3E,CAAC,CAACG,eAAe,IAAI8D,OAAO,CAACU,SAAS,KAAK,IAAI,EAAE;IACnD,IAAIhB,kBAAkB,KAAK,CAAC,EAAE;MAC5B3D,CAAC,CAACI,MAAM;QACNqE,aAAa,KAAK,IAAI;QACtB;MACF,CAAC;IACH,CAAC,MAAM;MACLzE,CAAC,CAACI,MAAM;QACNqE,aAAa,KAAK,UAAU;QAC5B;MACF,CAAC;IACH;EACF;;EAEA,MAAMnC,WAAW,GAAGmC,aAAa,KAAKE,SAAS;EAC/C,MAAMG,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,EAAEY,SAAS,CAAC,CAAC,CAAC;;EAErD3E,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEK,WAAW,CAAC;AACjB,CAAC,CAAC;;AAEJpB,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;AAC9BC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,cAAc,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACtCmD,aAAa,CAAC,CAAC;AACfnD,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClC,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE+E,YAAY,EAAElB,WAAW,CAAC,CAAC,GAAG7D,CAAC,CAAC2B,MAAM;EAC9C,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCiC,OAAO,EAAE,EAAEc,YAAY,EAAEf,UAAU,EAAEe,YAAY,GAAG,oBAAoB,GAAGlE,SAAS,CAAC;IACvF,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMoD,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE,YAAqB;IAC7BX,KAAK,EAAEkB,eAAe,CAACC,eAAe,GAAGD,eAAe,CAACZ,iBAAiB;IAC1EM;EACF,CAAC,CAAC;;EAEF,MAAMmB,OAAO,GAAI,CAACD,YAAY,IAAIlB,WAAW,KAAK,CAAC,IAAMkB,YAAY,IAAIlB,WAAW,GAAG,CAAE;;EAEzF,MAAMiB,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,CAAC;EACxC/D,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,8CAA8C,CAAC;AACnDC,IAAI;EACF;AACL;AACA;AACE,CAAC;AACAC,kBAAkB,CAAC;AAClB,EAAE4D,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE,GAAG,EAAE0B,QAAQ,EAAE,IAAI,CAAC,CAAC,EAAE;AAC1C,EAAED,MAAM,EAAE,GAAG,EAAEzB,IAAI,EAAE,GAAG,EAAE0B,QAAQ,EAAE,IAAI,CAAC,CAAC,EAAE;AAC5C,EAAEC,kBAAkB,EAAE,IAAI,EAAED,QAAQ,EAAE,IAAI,CAAC,CAAC,EAAE;;AAE9C;AACA,EAAED,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE,IAAI,EAAE0B,QAAQ,EAAE,IAAI,CAAC,CAAC;AACzC,EAAED,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE3C,SAAS,EAAEqE,QAAQ,EAAE,IAAI,CAAC,CAAC;AAC9C,EAAED,MAAM,EAAE,GAAG,GAAG,CAAC,EAAEzB,IAAI,EAAE,GAAG,EAAE0B,QAAQ,EAAE,IAAI,CAAC,CAAC;AAC9C,EAAED,MAAM,EAAE,GAAG,GAAG,CAAC,EAAEzB,IAAI,EAAE3C,SAAS,EAAEqE,QAAQ,EAAE,IAAI,CAAC,CAAC;;AAEpD;AACA,EAAED,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE,CAAC,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC;AACvC,EAAED,MAAM,EAAE,GAAG,EAAEzB,IAAI,EAAE,CAAC,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC;AACzC,EAAED,MAAM,EAAE,IAAI,EAAEzB,IAAI,EAAE,CAAC,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC;AAC1C,EAAED,MAAM,EAAE,IAAI,EAAEzB,IAAI,EAAE3C,SAAS,EAAEqE,QAAQ,EAAE,KAAK,CAAC,CAAC;;AAElD;AACA,EAAED,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE,GAAG,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC;AACzC,EAAED,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE3C,SAAS,EAAEqE,QAAQ,EAAE,KAAK,CAAC,CAAC;AAC/C,EAAED,MAAM,EAAE,GAAG,EAAEzB,IAAI,EAAE,GAAG,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC;AAC3C,EAAED,MAAM,EAAE,GAAG,EAAEzB,IAAI,EAAE,GAAG,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC;;AAE3C;AACA,EAAED,MAAM,EAAE,GAAG,GAAG,CAAC,EAAEzB,IAAI,EAAE,CAAC,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC,EAAE;AAC/C,EAAED,MAAM,EAAE,CAAC,EAAEzB,IAAI,EAAE,GAAG,GAAG,CAAC,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC,EAAE;AAC/C,EAAED,MAAM,EAAE,IAAI,EAAEzB,IAAI,EAAE,CAAC,EAAE0B,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAE;AAAA,CAC7C,CAAC;AACD1D,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEmF,kBAAkB,EAAEF,MAAM,EAAEzB,IAAI,EAAE0B,QAAQ,CAAC,CAAC,GAAGlF,CAAC,CAAC2B,MAAM;;EAE/D,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAE7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO,EAAEzB,MAAM,EAAE,EAAEC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;EAC3F,CAAC,CAAC;;EAEF,MAAMD,MAAM,GAAGP,CAAC,CAACoF,mBAAmB,CAAC;IACnC5B,IAAI,EAAE,IAAI;IACVP,KAAK,EAAEoC,cAAc,CAACC;EACxB,CAAC,CAAC;;EAEF,MAAMlD,QAAQ,GAAG+C,kBAAkB,GAAG5E,MAAM,GAAG,EAAEA,MAAM,EAAE0E,MAAM,EAAEzB,IAAI,CAAC,CAAC;EACvE,MAAM7D,UAAU,GAAG;IACjBwC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACVK;IACF,CAAC,CACF;;IACDK,MAAM,EAAER;EACV,CAAC;;EAED,IAAIiD,QAAQ,EAAE;IACZ;IACAlF,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC7C,UAAU,CAAC;EACtC,CAAC,MAAM;IACL;IACAK,CAAC,CAACuC,qBAAqB,CAAC,MAAM;MAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC7C,UAAU,CAAC;IACtC,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;;AAEJuB,CAAC,CAACC,IAAI,CAAC,gBAAgB,CAAC;AACrBC,IAAI,CAAC,kDAAkD,CAAC;AACxDC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,gBAAgB,EAAE,CAACV,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;AACjD0E,MAAM,CAAC,MAAM,EAAE,CAAC,EAAEC,cAAc,CAAC,CAAC;AACjCA,cAAc,KAAK3E,SAAS;AACxB,CAAC2E,cAAc,GAAG,CAAC,EAAEA,cAAc,EAAEA,cAAc,GAAG,CAAC,CAAC;AACxD,CAAC,CAAC,EAAE,GAAG;AACb;AACJ,CAAC;AACAhE,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEwD,IAAI,EAAEgC,cAAc,CAAC,CAAC,GAAGxF,CAAC,CAAC2B,MAAM;;EAEzC,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCzB,MAAM,EAAE;QACNC,IAAI,EAAE,SAAS;QACfgF;MACF;IACF,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMC,aAAa,GAAGzF,CAAC,CAACoF,mBAAmB,CAAC;IAC1C5B,IAAI;IACJP,KAAK,EAAEoC,cAAc,CAACC;EACxB,CAAC,CAAC;;EAEFtF,CAAC,CAACuC,qBAAqB;IACrB,MAAM;MACJvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;QACvBC,MAAM,EAAER,eAAe;QACvBE,OAAO,EAAE;QACP;UACEJ,OAAO,EAAE,CAAC;UACVK,QAAQ,EAAE,EAAE7B,MAAM,EAAEkF,aAAa,CAAC;QACpC,CAAC;;MAEL,CAAC,CAAC;IACJ,CAAC;IACDD,cAAc,KAAK3E,SAAS,IAAI2C,IAAI,GAAGgC;EACzC,CAAC;AACH,CAAC,CAAC;;AAEJ,MAAME,gBAAgB;AACpBtG,QAAQ,CAACuG,WAAW,CAAC3D,OAAO,GAAG5C,QAAQ,CAACuG,WAAW,CAACrF,QAAQ,GAAGlB,QAAQ,CAACuG,WAAW,CAAC5E,MAAM;;AAE5FG,CAAC,CAACC,IAAI,CAAC,uBAAuB,CAAC;AAC5BC,IAAI,CAAC,8DAA8D,CAAC;AACpEC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC;AACEC,OAAO,CAAC,OAAO,EAAEtD,eAAe,CAAC;AACjCsD,OAAO,CAAC,OAAO,EAAE/C,oBAAoB,CAAC,IAAI,CAAC,CAAC;AAC5C+C,OAAO,CAAC,gBAAgB,EAAE,CAACmE,gBAAgB,EAAEtG,QAAQ,CAACuG,WAAW,CAAC3D,OAAO,CAAU,CAAC;AACpFT,OAAO,CAAC,oBAAoB,EAAE,CAAC,KAAK,EAAE,IAAI,CAAU;AACzD,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE4F,KAAK,EAAE3F,KAAK,EAAE4F,cAAc,EAAEV,kBAAkB,CAAC,CAAC,GAAGnF,CAAC,CAAC2B,MAAM;;EAErExD,MAAM,CAAC8B,KAAK,CAACM,MAAM,KAAKM,SAAS,CAAC;EAClC,MAAM+B,IAAI,GAAGnE,qBAAqB,CAACwB,KAAK,CAACM,MAAM,CAAC;;EAEhD,MAAML,UAAU,GAAG0C,IAAI,CAACkD,WAAW,GAAGD,cAAc;EACpD9F,kCAAkC,CAACC,CAAC,EAAEC,KAAK,EAAEC,UAAU,CAAC;;EAExD,MAAM6F,GAAG,GAAG/F,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACzCC,OAAO,EAAE;IACP;MACE,GAAGlC,KAAK;MACR8B,OAAO,EAAE,CAAC;MACV7B;IACF,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMK,MAAM,GAAGf,GAAG,CAACwG,qBAAqB,CAAChG,CAAC,EAAE4F,KAAK,EAAE;IACjD3C,KAAK,EAAEL,IAAI,CAACK,KAAK;IACjBO,IAAI,EAAE;EACR,CAAC,CAAC;;EAEF,MAAMpB,QAAQ,GAAG+C,kBAAkB,GAAG5E,MAAM,GAAG,EAAEA,MAAM,CAAC,CAAC;EACzDP,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBC,MAAM,EAAEsD,GAAG;MACX5D,OAAO,EAAE;MACP;QACEJ,OAAO,EAAE,CAAC;QACVK;MACF,CAAC;;IAEL,CAAC,CAAC;EACJ,CAAC,EAAEwD,KAAK,KAAK,SAAS,CAAC;AACzB,CAAC,CAAC;;AAEJ1E,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;AAC7BC,IAAI,CAAC,+DAA+D,CAAC;AACrEC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC;AACEC,OAAO,CAAC,OAAO,EAAEtD,eAAe,CAAC;AACjCsD,OAAO,CAAC,OAAO,EAAEtC,+BAA+B,CAAC,IAAI,EAAEQ,WAAW,CAAC,CAAC;AACpE8B,OAAO,CAAC,gBAAgB,EAAE,CAACmE,gBAAgB,EAAEtG,QAAQ,CAACuG,WAAW,CAAC3D,OAAO,CAAU,CAAC;AACpFT,OAAO,CAAC,qBAAqB,EAAE,CAAC,KAAK,EAAE,IAAI,CAAU;AAC1D,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE4F,KAAK,EAAE3F,KAAK,EAAE4F,cAAc,EAAEI,mBAAmB,CAAC,CAAC,GAAGjG,CAAC,CAAC2B,MAAM;EACtE,MAAMiB,IAAI,GAAG1D,kBAAkB,CAACe,KAAK,CAAC;;EAEtC,MAAMC,UAAU,GAAG0C,IAAI,CAACkD,WAAW,GAAGD,cAAc;EACpD9F,kCAAkC,CAACC,CAAC,EAAEC,KAAK,EAAEC,UAAU,CAAC;;EAExD,MAAM6F,GAAG,GAAG/F,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACzCC,OAAO,EAAE;IACP;MACE,GAAGlC,KAAK;MACR8B,OAAO,EAAE,CAAC;MACV7B;IACF,CAAC;;EAEL,CAAC,CAAC;;EAEF;EACA,MAAM+C,KAAK,GAAGhD,KAAK,CAACgE,OAAO,EAAEc,YAAY;EACrCnC,IAAI,CAACK,KAAK,GAAG7D,QAAQ,CAAC8D,YAAY,CAACK,iBAAiB;EACpDX,IAAI,CAACK,KAAK;EACd,MAAMW,MAAM,GAAG3D,KAAK,CAACW,cAAc,KAAKC,SAAS,GAAG,UAAU,GAAG,YAAY;EAC7E,MAAMoD,OAAO,GAAGzE,GAAG,CAAC0G,sBAAsB,CAAClG,CAAC,EAAE4F,KAAK,EAAE;IACnD3C,KAAK;IACLO,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACZI,MAAM;IACNC,WAAW,EAAE5D,KAAK,CAACgE,OAAO,EAAEc,YAAY,GAAG,CAAC,GAAG;EACjD,CAAC,CAAC;;EAEF,IAAI3C,QAAqC;EACzC,IAAI6D,mBAAmB,EAAE;IACvB7D,QAAQ,GAAG6B,OAAO;EACpB,CAAC,MAAM;IACLjE,CAAC,CAACuC,qBAAqB,CAAC,MAAM;MAC5BH,QAAQ,GAAG6B,OAAO,CAACF,UAAU,CAAC,CAAC;IACjC,CAAC,EAAE6B,KAAK,KAAK,SAAS,CAAC;EACzB;;EAEA5F,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBC,MAAM,EAAEsD,GAAG;MACX5D,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,CAAC,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC,EAAEwD,KAAK,KAAK,SAAS,CAAC;AACzB,CAAC,CAAC;;AAEJ1E,CAAC,CAACC,IAAI,CAAC,mCAAmC,CAAC;AACxCC,IAAI;EACH;AACF,CAAC;AACAC,kBAAkB,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAC/D4E,iBAAiB,CAAC,CAAAnG,CAAC,KAAIA,CAAC,CAACoG,oBAAoB,CAAC,CAAC,CAAC;AAChD5E,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAMqG,UAAU,GAAGrG,CAAC,CAAC2B,MAAM,CAAC0E,UAAU;;EAEtC,MAAMC,YAAY,GAAGD,UAAU,GAAGrG,CAAC,CAACuG,gBAAgB,GAAGvG,CAAC,CAACS,MAAM;;EAE/D,MAAMsF,GAAG,GAAGO,YAAY,CAACpE,qBAAqB,CAAC;IAC7CC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEd,QAAQ,CAACuG,WAAW,CAAC3D,OAAO;MACxCzB,MAAM,EAAE,CAAC;IACX,CAAC;;EAEL,CAAC,CAAC;;EAEFP,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBC,MAAM,EAAEsD,GAAG;MACX5D,OAAO,EAAE;MACP;QACEJ,OAAO,EAAE,CAAC;QACVK,QAAQ,EAAE,EAAE7B,MAAM,EAAEf,GAAG,CAACgH,gBAAgB,CAACxG,CAAC,CAAC,CAAC;MAC9C,CAAC;;IAEL,CAAC,CAAC;EACJ,CAAC,EAAEqG,UAAU,CAAC;AAChB,CAAC,CAAC;;AAEJnF,CAAC,CAACC,IAAI,CAAC,mCAAmC,CAAC;AACxCC,IAAI;EACF;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,OAAO,EAAE;AAChB,EAAEhB,MAAM,EAAE,EAAEC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AAC/B,EAAEiG,OAAO,EAAE,EAAEjG,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;AAClC,EAAEyD,OAAO,EAAE,EAAEc,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AACpC,EAAEnE,cAAc,EAAE,EAAEgE,MAAM,EAAE,YAAY,EAAEhB,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;AAChE,EAAEhD,cAAc,EAAE,EAAEgE,MAAM,EAAE,WAAW,EAAEhB,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;AAC/D,EAAEhD,cAAc,EAAE,EAAEgE,MAAM,EAAE,YAAY,EAAEhB,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;AACxD,CAAC;AACVc,aAAa,CAAC,CAAC;AACfgC,iBAAiB,CAAC;AACjB,EAAEC,mBAAmB,EAAE,KAAK,EAAEC,mBAAmB,EAAE,KAAK,CAAC,CAAC,EAAE;AAC5D,EAAED,mBAAmB,EAAE,IAAI,EAAEC,mBAAmB,EAAE,KAAK,CAAC,CAAC;AACzD,EAAED,mBAAmB,EAAE,KAAK,EAAEC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAC1D,CAAC;AACDrF,OAAO,CAAC,gBAAgB,EAAE,CAACmE,gBAAgB,EAAEtG,QAAQ,CAACuG,WAAW,CAAC3D,OAAO,CAAU;AACxF,CAAC;AACAmE,iBAAiB,CAAC,CAAAnG,CAAC,KAAIA,CAAC,CAACoG,oBAAoB,CAAC,CAAC,CAAC;AAChD5E,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEC,KAAK,EAAE0G,mBAAmB,EAAEC,mBAAmB,EAAEf,cAAc,CAAC,CAAC,GAAG7F,CAAC,CAAC2B,MAAM;;EAEpF,MAAMiB,IAAI,GAAGrE,eAAe,CAAC0B,KAAK,CAAC;EACnC,MAAMC,UAAU,GAAG0C,IAAI,CAACkD,WAAW,GAAGD,cAAc;EACpD9F,kCAAkC,CAACC,CAAC,EAAEC,KAAK,EAAEC,UAAU,CAAC;;EAExD,MAAM2G,SAAS,GAAGF,mBAAmB;EACjCnH,GAAG,CAACsH,kCAAkC,CAAC9G,CAAC,EAAE4C,IAAI,CAACR,QAAQ,CAAC;EACxD5C,GAAG,CAACqD,kBAAkB,CAAC7C,CAAC,EAAE4C,IAAI,CAACR,QAAQ,CAAC;EAC5C,MAAM2E,SAAS,GAAGH,mBAAmB;EACjCpH,GAAG,CAACsH,kCAAkC,CAAC9G,CAAC,EAAE4C,IAAI,CAACR,QAAQ,CAAC;EACxD5C,GAAG,CAACqD,kBAAkB,CAAC7C,CAAC,EAAE4C,IAAI,CAACR,QAAQ,CAAC;;EAE5C,MAAM2D,GAAG,GAAG/F,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACzCC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU;MACV,GAAGD;IACL,CAAC;IACD;MACE8B,OAAO,EAAE,CAAC;MACV7B,UAAU;MACV,GAAGD;IACL,CAAC;;EAEL,CAAC,CAAC;;EAEFD,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBC,MAAM,EAAEsD,GAAG;MACX5D,OAAO,EAAE;MACP;QACEJ,OAAO,EAAE,CAAC;QACVK,QAAQ,EAAEyE;MACZ,CAAC;MACD;QACE9E,OAAO,EAAE,CAAC;QACVK,QAAQ,EAAE2E;MACZ,CAAC;;IAEL,CAAC,CAAC;EACJ,CAAC,EAAEJ,mBAAmB,IAAIC,mBAAmB,CAAC;AAChD,CAAC,CAAC;;AAEJ1F,CAAC,CAACC,IAAI,CAAC,uBAAuB,CAAC;AAC5BC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AACA;AACA;AAAA,CACCC,OAAO,CAAC,QAAQ,EAAExC,cAAc,CAAC;AACjCwC,OAAO,CAAC,QAAQ,EAAExC,cAAc,CAAC;AACjCiE,MAAM,CAAC,CAAC,EAAEgE,MAAM,EAAEC,MAAM,CAAC,CAAC,KAAK;EAC9B,OAAO,CAAC9H,8BAA8B,CAAC6H,MAAM,GAAGC,MAAM,CAAC;AACzD,CAAC;AACL,CAAC;AACAzF,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEgH,MAAM,EAAEC,MAAM,CAAC,CAAC,GAAGjH,CAAC,CAAC2B,MAAM;;EAEnC,MAAMsB,KAAK,GAAG+D,MAAM,GAAGC,MAAM;;EAE7B;EACA,IAAI,CAAChE,KAAK,GAAG7D,QAAQ,CAAC8D,YAAY,CAACC,oBAAoB,MAAM,CAAC,EAAE;IAC9DnD,CAAC,CAACqD,qCAAqC,CAAC,CAAC;EAC3C;;EAEA,MAAMpB,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCpB,cAAc,EAAE,EAAEgE,MAAM,EAAE,YAAY,EAAEhB,MAAM,EAAE,YAAY,CAAC;IAC/D,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMK,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE,YAAqB;IAC7BX;EACF,CAAC,CAAC;;EAEF,MAAM+B,OAAO,GAAGb,eAAe,CAACf,eAAe,GAAGH,KAAK;;EAEvD,MAAM6B,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,CAAC;EACxC/D,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,iCAAiC,CAAC;AACtCC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/BA,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AACpC,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEkH,YAAY,EAAEC,aAAa,CAAC,CAAC,GAAGnH,CAAC,CAAC2B,MAAM;;EAEhD,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCpB,cAAc,EAAE,EAAEgE,MAAM,EAAE,YAAY,EAAEhB,MAAM,EAAE,YAAY,CAAC;IAC/D,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMwD,eAAe,GAAG,CAAC;EACzB,MAAMnD,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE,YAAqB;IAC7BX,KAAK,EAAEkB,eAAe,CAACf,eAAe;IACtC+D,aAAa,EAAEC;EACjB,CAAC,CAAC;;EAEF,MAAMtC,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,EAAEmD,YAAY,EAAEC,aAAa,CAAC,CAAC,CAAC;;EAEvEnH,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEkF,aAAa,KAAK,CAAC,CAAC;AACzB,CAAC,CAAC;;AAEJjG,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;AAC7BC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,sBAAsB,EAAElC,8BAA8B,CAAC;AAC/DkC,OAAO,CAAC,gBAAgB,EAAElC,8BAA8B;AAC7D,CAAC;AACAmC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEqH,oBAAoB,EAAEC,cAAc,CAAC,CAAC,GAAGtH,CAAC,CAAC2B,MAAM;EACzD3B,CAAC,CAACuH,+BAA+B,CAACF,oBAAoB,EAAEC,cAAc,CAAC;EACvEtH,CAAC,CAACwH,iDAAiD;IACjD,YAAY;IACZH,oBAAoB;IACpBC;EACF,CAAC;;EAED,MAAMrF,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCpB,cAAc,EAAE,EAAEgE,MAAM,EAAE,YAAY,EAAEhB,MAAM,EAAEyD,oBAAoB,CAAC;IACvE,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMpD,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE0D,cAAc;IACtBrE,KAAK,EAAEkB,eAAe,CAACf;EACzB,CAAC,CAAC;;EAEF,MAAM4B,OAAO,GAAGqC,oBAAoB,KAAKC,cAAc;EACvD,MAAMxC,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,EAAEH,MAAM,EAAE0D,cAAc,CAAC,CAAC,CAAC;EAClEtH,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC;AACnBC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,MAAM,EAAE5C,mBAAmB;AACpC;AACA;AAAA,CACC+F,aAAa,CAAC,CAAC;AACfnD,OAAO,CAAC,QAAQ,EAAE3C,aAAa,CAAC;AAChC2C,OAAO,CAAC,QAAQ,EAAE3C,aAAa,CAAC;AAChCoE,MAAM;EACL,CAAC,EAAEgE,MAAM,EAAEC,MAAM,CAAC,CAAC;EACjB,CAAC,CAACD,MAAM,GAAGC,MAAM,KAAK7H,QAAQ,CAACqI,WAAW,CAACC,QAAQ,GAAGtI,QAAQ,CAACqI,WAAW,CAACE,SAAS,CAAC;EACrF;AACJ;AACJ,CAAC;AACAnG,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEQ,IAAI,EAAEwG,MAAM,EAAEC,MAAM,CAAC,CAAC,GAAGjH,CAAC,CAAC2B,MAAM;;EAEzC,MAAMsB,KAAK,GAAG+D,MAAM,GAAGC,MAAM;;EAE7B,MAAMhF,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCzB,MAAM,EAAE,EAAEC,IAAI,CAAC;IACjB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMD,MAAM,GAAGP,CAAC,CAACoF,mBAAmB,CAAC;IACnC5B,IAAI,EAAE,CAAC;IACPP;EACF,CAAC,CAAC;;EAEF,IAAI+B,OAAO,GAAG,KAAK;EACnB,IAAIxE,IAAI,KAAK,SAAS,EAAE;IACtBwE,OAAO,GAAGK,cAAc,CAACuC,OAAO,GAAG3E,KAAK,GAAG,IAAI,GAAG,KAAK;EACzD,CAAC,MAAM,IAAIzC,IAAI,KAAK,SAAS,IAAIA,IAAI,KAAK,mBAAmB,EAAE;IAC7DwE,OAAO,GAAGK,cAAc,CAACC,OAAO,GAAGrC,KAAK,GAAG,IAAI,GAAG,KAAK;EACzD;;EAEAjD,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE,EAAE7B,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;MAC/CkC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;AAC7BC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,MAAM,EAAE5C,mBAAmB,CAAC;AACpC+F,aAAa,CAAC,CAAC;AACfnD,OAAO,CAAC,eAAe,EAAE;AACxB,EAAEsG,GAAG,EAAE,CAAC,EAAEC,IAAI,EAAE,CAAC,CAAC,CAAC;AACnB,EAAED,GAAG,EAAE,CAAC,EAAEC,IAAI,EAAE,GAAG,CAAC,CAAC;AACrB,EAAED,GAAG,EAAE,CAAC,EAAEC,IAAI,EAAE,GAAG,CAAC,CAAC;AACrB,EAAED,GAAG,EAAE,CAAC,EAAEC,IAAI,EAAE,CAAC,CAAC,CAAC;AACpB;AACL,CAAC;AACAtG,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEQ,IAAI,EAAEuH,aAAa,CAAC,CAAC,GAAG/H,CAAC,CAAC2B,MAAM;EACxC,MAAMqG,YAAY;EAChBhI,CAAC,CAACS,MAAM,CAACC,MAAM;EACbF,IAAI,KAAK,SAAS,GAAG,iCAAiC,GAAG,iCAAiC,CAC3F;;EACH,MAAMyE,MAAM,GAAG7G,oBAAoB,CAAC4J,YAAY,EAAED,aAAa,CAAC;;EAEhE,MAAM9F,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCzB,MAAM,EAAE,EAAEC,IAAI,CAAC;IACjB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMyC,KAAK,GAAGzC,IAAI,KAAK,SAAS,GAAG6E,cAAc,CAACuC,OAAO,GAAGvC,cAAc,CAACC,OAAO;EAClF,MAAMN,OAAO,GAAGC,MAAM,GAAG+C,YAAY,KAAK,CAAC;;EAE3C,MAAMzH,MAAM,GAAGP,CAAC,CAACoF,mBAAmB,CAAC;IACnC5B,IAAI,EAAE,IAAI;IACVP;EACF,CAAC,CAAC;;EAEFjD,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE,EAAE7B,MAAM,EAAE0E,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;MACvDxC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,8BAA8B,CAAC;AACnCC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,MAAM,EAAE5C,mBAAmB,CAAC;AACpC+F,aAAa,CAAC;AACf;AACA;AAAA,CACCnD,OAAO,CAAC,aAAa,EAAE;AACtB,EAAE0G,IAAI,EAAE,CAAC,EAAEC,KAAK,EAAE,CAAC,CAAC,CAAC;AACrB,EAAED,IAAI,EAAE,CAAC,EAAEC,KAAK,EAAE,CAAC,CAAC,CAAC;AACrB,EAAED,IAAI,EAAE,CAAC,EAAEC,KAAK,EAAE,CAAC,CAAC,CAAC;AACtB;AACL,CAAC;AACA1G,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM;IACJQ,IAAI;IACJ2H,WAAW,EAAE,EAAEF,IAAI,EAAEC,KAAK,CAAC;EAC7B,CAAC,GAAGlI,CAAC,CAAC2B,MAAM;EACZ,MAAMmG,IAAI,GAAGtH,IAAI,KAAK,SAAS,GAAG,CAAC,GAAG,CAAC;EACvC,MAAM4H,cAAc;EAClBpI,CAAC,CAACS,MAAM,CAACC,MAAM;EACbF,IAAI,KAAK,SAAS,GAAG,6BAA6B,GAAG,6BAA6B,CACnF;;EACH,MAAM2H,WAAW,GAAGF,IAAI,GAAGH,IAAI,GAAGM,cAAc,GAAGF,KAAK;;EAExD,MAAMjG,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCzB,MAAM,EAAE,EAAEC,IAAI,CAAC;IACjB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMyC,KAAK,GAAGzC,IAAI,KAAK,SAAS,GAAG6E,cAAc,CAACuC,OAAO,GAAGvC,cAAc,CAACC,OAAO;EAClF,MAAMN,OAAO,GAAGmD,WAAW,IAAIC,cAAc;;EAE7C;EACA,MAAM7H,MAAM,GAAGP,CAAC,CAACoF,mBAAmB,CAAC;IACnC5B,IAAI,EAAE4E,cAAc;IACpBnF;EACF,CAAC,CAAC;;EAEFjD,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE,EAAE7B,MAAM,EAAEiD,IAAI,EAAE2E,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;MAClE1F,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,sCAAsC,CAAC;AAC3CC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,MAAM,EAAE5C,mBAAmB,CAAC;AACpC+F,aAAa,CAAC,CAAC;AACfnD,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7BA,OAAO,CAAC,oBAAoB,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AACtCA,OAAO,CAAC,aAAa,EAAE,CAACV,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAChD,CAAC;AACAW,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEQ,IAAI,EAAE6H,UAAU,EAAEC,kBAAkB,EAAEH,WAAW,CAAC,CAAC,GAAGnI,CAAC,CAAC2B,MAAM;EACtE,MAAMqG,YAAY;EAChBhI,CAAC,CAACS,MAAM,CAACC,MAAM;EACbF,IAAI,KAAK,SAAS,GAAG,iCAAiC,GAAG,iCAAiC,CAC3F;;EACH,MAAMyE,MAAM,GAAG+C,YAAY,GAAGK,UAAU;EACxC,MAAME,UAAU,GAAGP,YAAY,GAAGM,kBAAkB;;EAEpD,MAAMrG,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCzB,MAAM,EAAE,EAAEC,IAAI,CAAC;IACjB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMgI,oBAAoB,GAAGL,WAAW,IAAII,UAAU,GAAGtD,MAAM;EAC/D,IAAIhC,KAAK,EAAE+B,OAAO;EAClB,IAAIxE,IAAI,KAAK,SAAS,EAAE;IACtByC,KAAK,GAAGoC,cAAc,CAACuC,OAAO;IAC9B5C,OAAO,GAAG,IAAI;EAChB,CAAC,MAAM;IACL/B,KAAK,GAAGoC,cAAc,CAACC,OAAO;IAC9BN,OAAO,GAAGwD,oBAAoB,GAAG,CAAC,KAAK,CAAC;EAC1C;;EAEA,MAAMjI,MAAM,GAAGP,CAAC,CAACoF,mBAAmB,CAAC;IACnC5B,IAAI,EAAE+E,UAAU;IAChBtF;EACF,CAAC,CAAC;;EAEFjD,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE,EAAE7B,MAAM,EAAE0E,MAAM,EAAEzB,IAAI,EAAE2E,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1E1F,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;AAC9BC,IAAI,CAAE,oFAAmF,CAAC;AAC1FC,kBAAkB,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAC/D4E,iBAAiB,CAAC,CAAAnG,CAAC,KAAIA,CAAC,CAACoG,oBAAoB,CAAC,CAAC,CAAC;AAChD5E,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEqG,UAAU,CAAC,CAAC,GAAGrG,CAAC,CAAC2B,MAAM;;EAE/B,MAAM2E,YAAY,GAAGD,UAAU,GAAGrG,CAAC,CAACuG,gBAAgB,GAAGvG,CAAC,CAACS,MAAM;;EAE/D,MAAMwB,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCyE,OAAO,EAAE,EAAEjG,IAAI,EAAE,WAAoB,CAAC;IACxC,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMiG,OAAO,GAAGH,YAAY,CAACmC,aAAa,CAAC,CAAC;EAC5CzI,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAEqE,OAAO,CAAC,CAAC,CAAC;MAC5ChE,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEoE,UAAU,CAAC;AAChB,CAAC,CAAC;;AAEJnF,CAAC,CAACC,IAAI,CAAC,4CAA4C,CAAC;AACjDC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,QAAQ,EAAEzC,oBAAoB,CAAC;AACvC4F,aAAa,CAAC,CAAC;AACfnD,OAAO,CAAC,iBAAiB,EAAE,CAACV,SAAS,EAAE,GAAGhC,iBAAiB,CAAC;AACjE,CAAC;AACA2C,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE0I,MAAM,EAAEC,eAAe,CAAC,CAAC,GAAG3I,CAAC,CAAC2B,MAAM;;EAE5C,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAAC2B,OAAO;MAClCyE,OAAO,EAAE,EAAEjG,IAAI,EAAEkI,MAAM,CAAC;IAC1B,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAM1D,OAAO;EACX0D,MAAM,KAAK,YAAY,GAAGC,eAAe,KAAK9H,SAAS,GAAG8H,eAAe,KAAK9H,SAAS;;EAEzF,MAAM4F,OAAO,GAAGzG,CAAC,CAACS,MAAM,CAACgI,aAAa,CAAC,EAAEG,OAAO,EAAED,eAAe,CAAC,CAAC,CAAC;;EAEpE3I,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAEqE,OAAO,CAAC,CAAC,CAAC;MAC5ChE,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,qCAAqC,CAAC;AAC1CC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AACA;AACA;AAAA,CACCC,OAAO,CAAC,QAAQ,EAAExC,cAAc,CAAC;AACjCwC,OAAO,CAAC,QAAQ,EAAExC,cAAc,CAAC;AACjCiE,MAAM,CAAC,CAAC,EAAEgE,MAAM,EAAEC,MAAM,CAAC,CAAC,KAAK;EAC9B,OAAO,CAAC9H,8BAA8B,CAAC6H,MAAM,GAAGC,MAAM,CAAC;AACzD,CAAC;AACL,CAAC;AACAzF,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEgH,MAAM,EAAEC,MAAM,CAAC,CAAC,GAAGjH,CAAC,CAAC2B,MAAM;;EAEnC,MAAMsB,KAAK,GAAG+D,MAAM,GAAGC,MAAM;;EAE7B;EACA,IAAI,CAAChE,KAAK,GAAG7D,QAAQ,CAAC8D,YAAY,CAACC,oBAAoB,MAAM,CAAC,EAAE;IAC9DnD,CAAC,CAACqD,qCAAqC,CAAC,CAAC;EAC3C;;EAEA,MAAMpB,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAACC,QAAQ;MACnCuI,eAAe,EAAE,CAAC;IACpB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAM5E,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE,YAAqB;IAC7BX;EACF,CAAC,CAAC;;EAEF,MAAM+B,OAAO,GAAGb,eAAe,CAACC,eAAe,GAAGnB,KAAK;;EAEvD,MAAM6B,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,CAAC;EACxC/D,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,yCAAyC,CAAC;AAC9CC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,WAAW,EAAEvC,sBAAsB,CAAC,CAAC;AAC3DwC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE2E,SAAS,CAAC,CAAC,GAAG3E,CAAC,CAAC2B,MAAM;EAC9B3B,CAAC,CAAC6E,sCAAsC,CAACF,SAAS,CAAC;;EAEnD,MAAM1C,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAACC,QAAQ;MACnCuI,eAAe,EAAE,CAAC;IACpB,CAAC;;EAEL,CAAC,CAAC;;EAEF,IAAInF,MAAM,GAAG,EAAE;EACf,IAAIC,kBAAkB,GAAG,CAAC;EAC1B,IAAIgB,SAAS,KAAK,IAAI,EAAE;IACtBjB,MAAM,GAAG,CAAC;IACVC,kBAAkB,GAAG,CAAC;EACxB;;EAEA,MAAMM,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAEC,kBAAkB,CAAC,CAAC;IAC/CC,MAAM,EAAE,YAAqB;IAC7BX,KAAK,EAAE7D,QAAQ,CAAC8D,YAAY,CAACkB,eAAe;IAC5CO,SAAS,EAAEpF,2BAA2B,CAACoF,SAAS;EAClD,CAAC,CAAC;;EAEF,MAAMrC,WAAW,GAAGqC,SAAS,KAAK,IAAI;EACtC,MAAMG,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,EAAEY,SAAS,CAAC,CAAC,CAAC;;EAErD3E,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEK,WAAW,CAAC;AACjB,CAAC,CAAC;;AAEJpB,CAAC,CAACC,IAAI,CAAC,+CAA+C,CAAC;AACpDC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/BA,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AACpC,CAAC;AACAC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAEkH,YAAY,EAAEC,aAAa,CAAC,CAAC,GAAGnH,CAAC,CAAC2B,MAAM;;EAEhD,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAACC,QAAQ;MACnCuI,eAAe,EAAE,CAAC;IACpB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAMzB,eAAe,GAAG,CAAC;EACzB,MAAMnD,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE,YAAqB;IAC7BX,KAAK,EAAEkB,eAAe,CAACC,eAAe;IACtC+C,aAAa,EAAEC;EACjB,CAAC,CAAC;;EAEF,MAAMtC,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,EAAEmD,YAAY,EAAEC,aAAa,CAAC,CAAC,CAAC;;EAEvEnH,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAEkF,aAAa,KAAK,CAAC,CAAC;AACzB,CAAC,CAAC;;AAEJjG,CAAC,CAACC,IAAI,CAAC,sCAAsC,CAAC;AAC3CC,IAAI;EACF;AACL;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,QAAQ,EAAEjC,sBAAsB,CAAC,CAAC;AACxDkC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE4D,MAAM,CAAC,CAAC,GAAG5D,CAAC,CAAC2B,MAAM;EAC3B3B,CAAC,CAACuH,+BAA+B,CAAC3D,MAAM,CAAC;;EAEzC,MAAM3B,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAACC,QAAQ;MACnCuI,eAAe,EAAE,CAAC;IACpB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAM5E,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM;IACNX,KAAK,EAAEkB,eAAe,CAACC;EACzB,CAAC,CAAC;;EAEF,MAAMY,OAAO,GAAGpB,MAAM,KAAK,YAAY,IAAIA,MAAM,KAAK,YAAY,IAAIA,MAAM,KAAK,aAAa;EAC9F,MAAMkB,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,EAAEH,MAAM,CAAC,CAAC,CAAC;EAClD5D,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC+C,OAAO,CAAC;AACd,CAAC,CAAC;;AAEJ9D,CAAC,CAACC,IAAI,CAAC,4CAA4C,CAAC;AACjDC,IAAI;EACF;AACL;AACA;AACA;AACA;AACE,CAAC;AACAO,MAAM,CAAC,CAAAL,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC7CC,EAAE,CAAC,CAAAxB,CAAC,KAAI;EACP,MAAM,EAAE6D,WAAW,CAAC,CAAC,GAAG7D,CAAC,CAAC2B,MAAM;;EAEhC,MAAMM,eAAe,GAAGjC,CAAC,CAACS,MAAM,CAACyB,qBAAqB,CAAC;IACrDC,OAAO,EAAE;IACP;MACEJ,OAAO,EAAE,CAAC;MACV7B,UAAU,EAAEG,cAAc,CAACC,QAAQ;MACnCuI,eAAe,EAAE,CAAC;IACpB,CAAC;;EAEL,CAAC,CAAC;;EAEF,MAAM5E,OAAO,GAAGjE,CAAC,CAAC8D,oBAAoB,CAAC;IACrCN,IAAI,EAAE,EAAEC,KAAK,EAAE,EAAE,EAAEC,MAAM,EAAE,EAAE,EAAEC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACtDC,MAAM,EAAE,YAAqB;IAC7BX,KAAK,EAAEkB,eAAe,CAACC,eAAe,GAAGD,eAAe,CAACZ,iBAAiB;IAC1EM;EACF,CAAC,CAAC;;EAEF,MAAMiB,WAAW,GAAGb,OAAO,CAACF,UAAU,CAAC,CAAC;;EAExC/D,CAAC,CAACuC,qBAAqB,CAAC,MAAM;IAC5BvC,CAAC,CAACS,MAAM,CAAC+B,eAAe,CAAC;MACvBL,OAAO,EAAE,CAAC,EAAEJ,OAAO,EAAE,CAAC,EAAEK,QAAQ,EAAE0C,WAAW,CAAC,CAAC,CAAC;MAChDrC,MAAM,EAAER;IACV,CAAC,CAAC;EACJ,CAAC,EAAE4B,WAAW,KAAK,CAAC,CAAC;AACvB,CAAC,CAAC"}