{"version":3,"file":"texture_formats.spec.js","names":["description","makeTestGroup","getGPU","assert","kCanvasTextureFormats","getBlockInfoForTextureFormat","isDepthOrStencilTextureFormat","isTextureFormatPossiblyStorageReadable","isTextureFormatPossiblyUsableAsColorRenderAttachment","kOptionalTextureFormats","kAllCanvasTypes","createCanvas","UniqueFeaturesAndLimitsValidationTest","g","test","desc","params","u","combine","beforeAllSubcases","t","format","enable_required_feature","selectDeviceForTextureFormatOrSkipTestCase","fn","formatInfo","shouldThrow","createTextureTracked","size","blockWidth","blockHeight","usage","GPUTextureUsage","TEXTURE_BINDING","viewFormats","textureFormat","testTexture","testViewDesc","dimension","aspect","arrayLayerCount","baseMipLevel","mipLevelCount","baseArrayLayer","createView","canvasType","canvas","ctx","getContext","GPUCanvasContext","canvasConf","device","COPY_SRC","COPY_DST","expectedError","includes","configure","map","expectValidationError","filter","skipIfTextureFormatNotUsableAsStorageTexture","createBindGroupLayout","entries","binding","visibility","GPUShaderStage","COMPUTE","storageTexture","isAsync","skipIfTextureFormatNotUsableAsRenderAttachment","doCreateRenderPipelineTest","layout","vertex","module","createShaderModule","code","entryPoint","fragment","targets","depthStencil","depthCompare","depthWriteEnabled","createRenderBundleEncoder","colorFormats","depthStencilFormat","adapter","rec","requestAdapter","features","expect","has"],"sources":["../../../../../../src/webgpu/api/validation/capability_checks/features/texture_formats.spec.ts"],"sourcesContent":["export const description = `\nTests for capability checking for features enabling optional texture formats.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { getGPU } from '../../../../../common/util/navigator_gpu.js';\nimport { assert } from '../../../../../common/util/util.js';\nimport { kCanvasTextureFormats } from '../../../../capability_info.js';\nimport {\n  getBlockInfoForTextureFormat,\n  isDepthOrStencilTextureFormat,\n  isTextureFormatPossiblyStorageReadable,\n  isTextureFormatPossiblyUsableAsColorRenderAttachment,\n  kOptionalTextureFormats,\n} from '../../../../format_info.js';\nimport { kAllCanvasTypes, createCanvas } from '../../../../util/create_elements.js';\nimport { UniqueFeaturesAndLimitsValidationTest } from '../../validation_test.js';\n\nexport const g = makeTestGroup(UniqueFeaturesAndLimitsValidationTest);\n\ng.test('texture_descriptor')\n  .desc(\n    `\n  Test creating a texture with an optional texture format will fail if the required optional feature\n  is not enabled.\n  `\n  )\n  .params(u =>\n    u.combine('format', kOptionalTextureFormats).combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = getBlockInfoForTextureFormat(format);\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.createTextureTracked({\n        format,\n        size: [formatInfo.blockWidth, formatInfo.blockHeight, 1] as const,\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n      });\n    });\n  });\n\ng.test('texture_descriptor_view_formats')\n  .desc(\n    `\n  Test creating a texture with view formats that have an optional texture format will fail if the\n  required optional feature is not enabled.\n  `\n  )\n  .params(u =>\n    u.combine('format', kOptionalTextureFormats).combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = getBlockInfoForTextureFormat(format);\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.createTextureTracked({\n        format,\n        size: [formatInfo.blockWidth, formatInfo.blockHeight, 1] as const,\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n        viewFormats: [format],\n      });\n    });\n  });\n\ng.test('texture_view_descriptor')\n  .desc(\n    `\n  Test creating a texture view with all texture formats will fail if the required optional feature\n  is not enabled.\n  `\n  )\n  .params(u =>\n    u.combine('format', kOptionalTextureFormats).combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    // If the required feature isn't enabled then the texture will fail to create and we won't be\n    // able to test createView, so pick and alternate guaranteed format instead. This will almost\n    // certainly not be view-compatible with the format being tested, but that doesn't matter since\n    // createView should throw an exception due to the format feature not being enabled before it\n    // has a chance to validate that the view and texture formats aren't compatible.\n    const textureFormat = enable_required_feature ? format : 'rgba8unorm';\n\n    const formatInfo = getBlockInfoForTextureFormat(format);\n    const testTexture = t.createTextureTracked({\n      format: textureFormat,\n      size: [formatInfo.blockWidth, formatInfo.blockHeight, 1] as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    });\n    const testViewDesc: GPUTextureViewDescriptor = {\n      format,\n      dimension: '2d',\n      aspect: 'all',\n      arrayLayerCount: 1,\n      baseMipLevel: 0,\n      mipLevelCount: 1,\n      baseArrayLayer: 0,\n    };\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      testTexture.createView(testViewDesc);\n    });\n  });\n\ng.test('canvas_configuration')\n  .desc(\n    `\n  Test configuring a canvas with optional texture formats will throw an exception if the required\n  optional feature is not enabled. Otherwise, a validation error should be generated instead of\n  throwing an exception.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, canvasType, enable_required_feature } = t.params;\n\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    const canvasConf = {\n      device: t.device,\n      format,\n      usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n    };\n\n    const expectedError =\n      enable_required_feature &&\n      (kCanvasTextureFormats as unknown as Array<GPUTextureFormat>).includes(format)\n        ? false\n        : 'TypeError';\n\n    t.shouldThrow(expectedError, () => {\n      ctx.configure(canvasConf);\n    });\n  });\n\ng.test('canvas_configuration_view_formats')\n  .desc(\n    `\n  Test that configuring a canvas with view formats throws an exception if the required optional\n  feature is not enabled. Otherwise, a validation error should be generated instead of throwing an\n  exception.\n  `\n  )\n  .params(u =>\n    u\n      .combine('viewFormats', [\n        ...kOptionalTextureFormats.map(format => [format]),\n        ['bgra8unorm', 'bc1-rgba-unorm'],\n        ['bc1-rgba-unorm', 'bgra8unorm'],\n      ])\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { viewFormats, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(viewFormats as GPUTextureFormat[]);\n    }\n  })\n  .fn(t => {\n    const { viewFormats, canvasType, enable_required_feature } = t.params;\n\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    const canvasConf = {\n      device: t.device,\n      format: 'bgra8unorm' as const,\n      usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n      viewFormats: viewFormats as GPUTextureFormat[],\n    };\n\n    if (enable_required_feature) {\n      t.expectValidationError(() => {\n        ctx.configure(canvasConf);\n      });\n    } else {\n      t.shouldThrow('TypeError', () => {\n        ctx.configure(canvasConf);\n      });\n    }\n  });\n\ng.test('storage_texture_binding_layout')\n  .desc(\n    `\n  Test creating a GPUStorageTextureBindingLayout with an optional texture format will fail if the\n  required optional feature are not enabled.\n\n  Note: This test has no cases if there are no optional texture formats supporting storage.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => isTextureFormatPossiblyStorageReadable(t.format))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n    t.skipIfTextureFormatNotUsableAsStorageTexture(format);\n\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createBindGroupLayout({\n        entries: [\n          {\n            binding: 0,\n            visibility: GPUShaderStage.COMPUTE,\n            storageTexture: {\n              format,\n            },\n          },\n        ],\n      });\n    });\n  });\n\ng.test('color_target_state')\n  .desc(\n    `\n  Test creating a render pipeline with an optional texture format set in GPUColorTargetState will\n  fail if the required optional feature is not enabled.\n\n  Note: This test has no cases if there are no optional texture formats supporting color rendering.\n  `\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => isTextureFormatPossiblyUsableAsColorRenderAttachment(t.format))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { isAsync, format, enable_required_feature } = t.params;\n    t.skipIfTextureFormatNotUsableAsRenderAttachment(format);\n\n    t.doCreateRenderPipelineTest(\n      isAsync,\n      enable_required_feature,\n      {\n        layout: 'auto',\n        vertex: {\n          module: t.device.createShaderModule({\n            code: `\n              @vertex\n              fn main()-> @builtin(position) vec4<f32> {\n                return vec4<f32>(0.0, 0.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n        },\n        fragment: {\n          module: t.device.createShaderModule({\n            code: `\n              @fragment\n              fn main() -> @location(0) vec4<f32> {\n                return vec4<f32>(0.0, 1.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n          targets: [{ format }],\n        },\n      },\n      'TypeError'\n    );\n  });\n\ng.test('depth_stencil_state')\n  .desc(\n    `\n  Test creating a render pipeline with an optional texture format set in GPUColorTargetState will\n  fail if the required optional feature is not enabled.\n  `\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => isDepthOrStencilTextureFormat(t.format))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { isAsync, format, enable_required_feature } = t.params;\n\n    t.doCreateRenderPipelineTest(\n      isAsync,\n      enable_required_feature,\n      {\n        layout: 'auto',\n        vertex: {\n          module: t.device.createShaderModule({\n            code: `\n              @vertex\n              fn main()-> @builtin(position) vec4<f32> {\n                return vec4<f32>(0.0, 0.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n        },\n        depthStencil: {\n          format,\n          depthCompare: 'always',\n          depthWriteEnabled: false,\n        },\n        fragment: {\n          module: t.device.createShaderModule({\n            code: `\n              @fragment\n              fn main() -> @location(0) vec4<f32> {\n                return vec4<f32>(0.0, 1.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n          targets: [{ format: 'rgba8unorm' }],\n        },\n      },\n      'TypeError'\n    );\n  });\n\ng.test('render_bundle_encoder_descriptor_color_format')\n  .desc(\n    `\n  Test creating a render bundle encoder with an optional texture format set as one of the color\n  format will fail if the required optional feature is not enabled.\n\n  Note: This test has no cases if there are no optional texture formats supporting color rendering.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => isTextureFormatPossiblyUsableAsColorRenderAttachment(t.format))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n    t.skipIfTextureFormatNotUsableAsRenderAttachment(format);\n\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createRenderBundleEncoder({\n        colorFormats: [format],\n      });\n    });\n  });\n\ng.test('render_bundle_encoder_descriptor_depth_stencil_format')\n  .desc(\n    `\n  Test creating a render bundle encoder with an optional texture format set as the depth stencil\n  format will fail if the required optional feature is not enabled.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => isDepthOrStencilTextureFormat(t.format))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(format);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createRenderBundleEncoder({\n        colorFormats: ['rgba8unorm'],\n        depthStencilFormat: format,\n      });\n    });\n  });\n\ng.test('check_capability_guarantees')\n  .desc(\n    `check \"texture-compression-bc\" is supported or both \"texture-compression-etc2\" and \"texture-compression-astc\" are supported.`\n  )\n  .fn(async t => {\n    const adapter = await getGPU(t.rec).requestAdapter();\n    assert(adapter !== null);\n\n    const features = adapter.features;\n    t.expect(\n      features.has('texture-compression-bc') ||\n        (features.has('texture-compression-etc2') && features.has('texture-compression-astc'))\n    );\n  });\n"],"mappings":"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"}