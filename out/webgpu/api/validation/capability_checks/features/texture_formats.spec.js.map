{"version":3,"file":"texture_formats.spec.js","names":["description","makeTestGroup","getGPU","assert","kAllTextureFormats","kTextureFormatInfo","kAllCanvasTypes","createCanvas","ValidationTest","g","kOptionalTextureFormats","filter","t","feature","undefined","test","desc","params","u","combine","beforeAllSubcases","format","enable_required_feature","formatInfo","selectDeviceOrSkipTestCase","fn","shouldThrow","device","createTexture","size","blockWidth","blockHeight","usage","GPUTextureUsage","TEXTURE_BINDING","viewFormats","textureFormat","testTexture","testViewDesc","dimension","aspect","arrayLayerCount","baseMipLevel","mipLevelCount","baseArrayLayer","createView","canvasType","canvas","ctx","getContext","GPUCanvasContext","canvasConf","COPY_SRC","COPY_DST","expectValidationError","configure","map","selectDeviceForTextureFormatOrSkipTestCase","color","storage","createBindGroupLayout","entries","binding","visibility","GPUShaderStage","COMPUTE","storageTexture","colorRender","isAsync","doCreateRenderPipelineTest","layout","vertex","module","createShaderModule","code","entryPoint","fragment","targets","depth","stencil","depthStencil","depthCompare","depthWriteEnabled","createRenderBundleEncoder","colorFormats","depthStencilFormat","adapter","rec","requestAdapter","features","expect","has"],"sources":["../../../../../../src/webgpu/api/validation/capability_checks/features/texture_formats.spec.ts"],"sourcesContent":["export const description = `\nTests for capability checking for features enabling optional texture formats.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { getGPU } from '../../../../../common/util/navigator_gpu.js';\nimport { assert } from '../../../../../common/util/util.js';\nimport { kAllTextureFormats, kTextureFormatInfo } from '../../../../format_info.js';\nimport { kAllCanvasTypes, createCanvas } from '../../../../util/create_elements.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\nconst kOptionalTextureFormats = kAllTextureFormats.filter(\n  t => kTextureFormatInfo[t].feature !== undefined\n);\n\ng.test('texture_descriptor')\n  .desc(\n    `\n  Test creating a texture with an optional texture format will fail if the required optional feature\n  is not enabled.\n  `\n  )\n  .params(u =>\n    u.combine('format', kOptionalTextureFormats).combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createTexture({\n        format,\n        size: [formatInfo.blockWidth, formatInfo.blockHeight, 1] as const,\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n      });\n    });\n  });\n\ng.test('texture_descriptor_view_formats')\n  .desc(\n    `\n  Test creating a texture with view formats that have an optional texture format will fail if the\n  required optional feature is not enabled.\n  `\n  )\n  .params(u =>\n    u.combine('format', kOptionalTextureFormats).combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createTexture({\n        format,\n        size: [formatInfo.blockWidth, formatInfo.blockHeight, 1] as const,\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n        viewFormats: [format],\n      });\n    });\n  });\n\ng.test('texture_view_descriptor')\n  .desc(\n    `\n  Test creating a texture view with all texture formats will fail if the required optional feature\n  is not enabled.\n  `\n  )\n  .params(u =>\n    u.combine('format', kOptionalTextureFormats).combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    // If the required feature isn't enabled then the texture will fail to create and we won't be\n    // able to test createView, so pick and alternate guaranteed format instead. This will almost\n    // certainly not be view-compatible with the format being tested, but that doesn't matter since\n    // createView should throw an exception due to the format feature not being enabled before it\n    // has a chance to validate that the view and texture formats aren't compatible.\n    const textureFormat = enable_required_feature ? format : 'rgba8unorm';\n\n    const formatInfo = kTextureFormatInfo[format];\n    const testTexture = t.device.createTexture({\n      format: textureFormat,\n      size: [formatInfo.blockWidth, formatInfo.blockHeight, 1] as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    });\n    const testViewDesc: GPUTextureViewDescriptor = {\n      format,\n      dimension: '2d',\n      aspect: 'all',\n      arrayLayerCount: 1,\n      baseMipLevel: 0,\n      mipLevelCount: 1,\n      baseArrayLayer: 0,\n    };\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      testTexture.createView(testViewDesc);\n    });\n  });\n\ng.test('canvas_configuration')\n  .desc(\n    `\n  Test configuring a canvas with optional texture formats will throw an exception if the required\n  optional feature is not enabled. Otherwise, a validation error should be generated instead of\n  throwing an exception.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, canvasType, enable_required_feature } = t.params;\n\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    const canvasConf = {\n      device: t.device,\n      format,\n      usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n    };\n\n    if (enable_required_feature) {\n      t.expectValidationError(() => {\n        ctx.configure(canvasConf);\n      });\n    } else {\n      t.shouldThrow('TypeError', () => {\n        ctx.configure(canvasConf);\n      });\n    }\n  });\n\ng.test('canvas_configuration_view_formats')\n  .desc(\n    `\n  Test that configuring a canvas with view formats throws an exception if the required optional\n  feature is not enabled. Otherwise, a validation error should be generated instead of throwing an\n  exception.\n  `\n  )\n  .params(u =>\n    u\n      .combine('viewFormats', [\n        ...kOptionalTextureFormats.map(format => [format]),\n        ['bgra8unorm', 'bc1-rgba-unorm'],\n        ['bc1-rgba-unorm', 'bgra8unorm'],\n      ])\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { viewFormats, enable_required_feature } = t.params;\n\n    if (enable_required_feature) {\n      t.selectDeviceForTextureFormatOrSkipTestCase(viewFormats as GPUTextureFormat[]);\n    }\n  })\n  .fn(t => {\n    const { viewFormats, canvasType, enable_required_feature } = t.params;\n\n    const canvas = createCanvas(t, canvasType, 2, 2);\n    const ctx = canvas.getContext('webgpu');\n    assert(ctx instanceof GPUCanvasContext, 'Failed to get WebGPU context from canvas');\n\n    const canvasConf = {\n      device: t.device,\n      format: 'bgra8unorm' as const,\n      usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n      viewFormats: viewFormats as GPUTextureFormat[],\n    };\n\n    if (enable_required_feature) {\n      t.expectValidationError(() => {\n        ctx.configure(canvasConf);\n      });\n    } else {\n      t.shouldThrow('TypeError', () => {\n        ctx.configure(canvasConf);\n      });\n    }\n  });\n\ng.test('storage_texture_binding_layout')\n  .desc(\n    `\n  Test creating a GPUStorageTextureBindingLayout with an optional texture format will fail if the\n  required optional feature are not enabled.\n\n  Note: This test has no cases if there are no optional texture formats supporting storage.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => !!kTextureFormatInfo[t.format].color?.storage)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createBindGroupLayout({\n        entries: [\n          {\n            binding: 0,\n            visibility: GPUShaderStage.COMPUTE,\n            storageTexture: {\n              format,\n            },\n          },\n        ],\n      });\n    });\n  });\n\ng.test('color_target_state')\n  .desc(\n    `\n  Test creating a render pipeline with an optional texture format set in GPUColorTargetState will\n  fail if the required optional feature is not enabled.\n\n  Note: This test has no cases if there are no optional texture formats supporting color rendering.\n  `\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => !!kTextureFormatInfo[t.format].colorRender)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { isAsync, format, enable_required_feature } = t.params;\n\n    t.doCreateRenderPipelineTest(\n      isAsync,\n      enable_required_feature,\n      {\n        layout: 'auto',\n        vertex: {\n          module: t.device.createShaderModule({\n            code: `\n              @vertex\n              fn main()-> @builtin(position) vec4<f32> {\n                return vec4<f32>(0.0, 0.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n        },\n        fragment: {\n          module: t.device.createShaderModule({\n            code: `\n              @fragment\n              fn main() -> @location(0) vec4<f32> {\n                return vec4<f32>(0.0, 1.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n          targets: [{ format }],\n        },\n      },\n      'TypeError'\n    );\n  });\n\ng.test('depth_stencil_state')\n  .desc(\n    `\n  Test creating a render pipeline with an optional texture format set in GPUColorTargetState will\n  fail if the required optional feature is not enabled.\n  `\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => !!(kTextureFormatInfo[t.format].depth || kTextureFormatInfo[t.format].stencil))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { isAsync, format, enable_required_feature } = t.params;\n\n    t.doCreateRenderPipelineTest(\n      isAsync,\n      enable_required_feature,\n      {\n        layout: 'auto',\n        vertex: {\n          module: t.device.createShaderModule({\n            code: `\n              @vertex\n              fn main()-> @builtin(position) vec4<f32> {\n                return vec4<f32>(0.0, 0.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n        },\n        depthStencil: {\n          format,\n          depthCompare: 'always',\n          depthWriteEnabled: false,\n        },\n        fragment: {\n          module: t.device.createShaderModule({\n            code: `\n              @fragment\n              fn main() -> @location(0) vec4<f32> {\n                return vec4<f32>(0.0, 1.0, 0.0, 1.0);\n              }`,\n          }),\n          entryPoint: 'main',\n          targets: [{ format: 'rgba8unorm' }],\n        },\n      },\n      'TypeError'\n    );\n  });\n\ng.test('render_bundle_encoder_descriptor_color_format')\n  .desc(\n    `\n  Test creating a render bundle encoder with an optional texture format set as one of the color\n  format will fail if the required optional feature is not enabled.\n\n  Note: This test has no cases if there are no optional texture formats supporting color rendering.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => !!kTextureFormatInfo[t.format].colorRender)\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createRenderBundleEncoder({\n        colorFormats: [format],\n      });\n    });\n  });\n\ng.test('render_bundle_encoder_descriptor_depth_stencil_format')\n  .desc(\n    `\n  Test creating a render bundle encoder with an optional texture format set as the depth stencil\n  format will fail if the required optional feature is not enabled.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kOptionalTextureFormats)\n      .filter(t => !!(kTextureFormatInfo[t.format].depth || kTextureFormatInfo[t.format].stencil))\n      .combine('enable_required_feature', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format, enable_required_feature } = t.params;\n\n    const formatInfo = kTextureFormatInfo[format];\n    if (enable_required_feature) {\n      t.selectDeviceOrSkipTestCase(formatInfo.feature);\n    }\n  })\n  .fn(t => {\n    const { format, enable_required_feature } = t.params;\n\n    t.shouldThrow(enable_required_feature ? false : 'TypeError', () => {\n      t.device.createRenderBundleEncoder({\n        colorFormats: ['rgba8unorm'],\n        depthStencilFormat: format,\n      });\n    });\n  });\n\ng.test('check_capability_guarantees')\n  .desc(\n    `check \"texture-compression-bc\" is supported or both \"texture-compression-etc2\" and \"texture-compression-astc\" are supported.`\n  )\n  .fn(async t => {\n    const adapter = await getGPU(t.rec).requestAdapter();\n    assert(adapter !== null);\n\n    const features = adapter.features;\n    t.expect(\n      features.has('texture-compression-bc') ||\n        (features.has('texture-compression-etc2') && features.has('texture-compression-astc'))\n    );\n  });\n"],"mappings":"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"}