{"version":3,"file":"texture.spec.js","names":["description","makeTestGroup","unreachable","ValidationTest","g","test","desc","paramsSubcasesOnly","u","combine","fn","t","destroyed","params","texture","trackForCleanup","device","createTexture","size","format","usage","GPUTextureUsage","COPY_DST","destroy","expectValidationError","queue","writeTexture","Uint8Array","bytesPerRow","src","COPY_SRC","dst","encoder","createCommandEncoder","copyTextureToTexture","commandBuffer","finish","shouldError","submit","buffer","createBuffer","GPUBufferUsage","copyBufferToTexture","copyTextureToBuffer","encoderType","bindingType","TEXTURE_BINDING","STORAGE_BINDING","layout","createBindGroupLayout","entries","binding","visibility","GPUShaderStage","COMPUTE","bindGroup","createBindGroup","resource","createView","createEncoder","setBindGroup","textureToDestroy","colorAttachment","sampleCount","RENDER_ATTACHMENT","resolveAttachment","depthStencilAttachment","pass","beginRenderPass","colorAttachments","view","resolveTarget","loadOp","storeOp","depthClearValue","depthLoadOp","depthStoreOp","end"],"sources":["../../../../../../src/webgpu/api/validation/queue/destroyed/texture.spec.ts"],"sourcesContent":["export const description = `\nTests using a destroyed texture on a queue.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { unreachable } from '../../../../../common/util/util.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('writeTexture')\n  .desc(\n    `\nTests that using a destroyed texture in writeTexture fails.\n- x= {destroyed, not destroyed (control case)}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const texture = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_DST,\n      })\n    );\n\n    if (destroyed) {\n      texture.destroy();\n    }\n\n    t.expectValidationError(\n      () => t.queue.writeTexture({ texture }, new Uint8Array(4), { bytesPerRow: 4 }, [1, 1, 1]),\n      destroyed\n    );\n  });\n\ng.test('copyTextureToTexture')\n  .desc(\n    `\nTests that using a destroyed texture in copyTextureToTexture fails.\n- x= {not destroyed (control case), src destroyed, dst destroyed}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', ['none', 'src', 'dst', 'both'] as const))\n  .fn(t => {\n    const src = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_SRC,\n      })\n    );\n    const dst = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_DST,\n      })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyTextureToTexture({ texture: src }, { texture: dst }, [1, 1, 1]);\n    const commandBuffer = encoder.finish();\n\n    let shouldError = true;\n    switch (t.params.destroyed) {\n      case 'none':\n        shouldError = false;\n        break;\n      case 'src':\n        src.destroy();\n        break;\n      case 'dst':\n        dst.destroy();\n        break;\n      case 'both':\n        src.destroy();\n        dst.destroy();\n        break;\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, shouldError);\n  });\n\ng.test('copyBufferToTexture')\n  .desc(\n    `\nTests that using a destroyed texture in copyBufferToTexture fails.\n- x= {not destroyed (control case), dst destroyed}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const buffer = t.trackForCleanup(\n      t.device.createBuffer({ size: 4, usage: GPUBufferUsage.COPY_SRC })\n    );\n    const texture = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_DST,\n      })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyBufferToTexture({ buffer }, { texture }, [1, 1, 1]);\n    const commandBuffer = encoder.finish();\n\n    if (destroyed) {\n      texture.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('copyTextureToBuffer')\n  .desc(\n    `\nTests that using a destroyed texture in copyTextureToBuffer fails.\n- x= {not destroyed (control case), src destroyed}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const texture = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_SRC,\n      })\n    );\n    const buffer = t.trackForCleanup(\n      t.device.createBuffer({ size: 4, usage: GPUBufferUsage.COPY_DST })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyTextureToBuffer({ texture }, { buffer }, [1, 1, 1]);\n    const commandBuffer = encoder.finish();\n\n    if (destroyed) {\n      texture.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('setBindGroup')\n  .desc(\n    `\nTests that using a destroyed texture referenced by a bindGroup set with setBindGroup fails\n- x= {not destroyed (control case), destroyed}\n    `\n  )\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('destroyed', [false, true] as const)\n      .combine('encoderType', ['compute pass', 'render pass', 'render bundle'] as const)\n      .combine('bindingType', ['texture', 'storageTexture'] as const)\n  )\n  .fn(t => {\n    const { destroyed, encoderType, bindingType } = t.params;\n    const { device } = t;\n    const texture = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.STORAGE_BINDING,\n      })\n    );\n\n    const layout = device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE,\n          [bindingType]: {\n            format: texture.format,\n          },\n        },\n      ],\n    });\n\n    const bindGroup = device.createBindGroup({\n      layout,\n      entries: [{ binding: 0, resource: texture.createView() }],\n    });\n\n    const { encoder, finish } = t.createEncoder(encoderType);\n    encoder.setBindGroup(0, bindGroup);\n    const commandBuffer = finish();\n\n    if (destroyed) {\n      texture.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('beginRenderPass')\n  .desc(\n    `\nTests that using a destroyed texture referenced by a render pass fails\n- x= {not destroyed (control case), colorAttachment destroyed, depthAttachment destroyed, resolveTarget destroyed}\n    `\n  )\n  .paramsSubcasesOnly(u =>\n    u.combine('textureToDestroy', [\n      'none',\n      'colorAttachment',\n      'resolveAttachment',\n      'depthStencilAttachment',\n    ])\n  )\n  .fn(t => {\n    const { textureToDestroy } = t.params;\n    const { device } = t;\n\n    const colorAttachment = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        sampleCount: 4,\n        usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      })\n    );\n\n    const resolveAttachment = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      })\n    );\n\n    const depthStencilAttachment = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'depth32float',\n        sampleCount: 4,\n        usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      })\n    );\n\n    const encoder = device.createCommandEncoder();\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n        {\n          view: colorAttachment.createView(),\n          resolveTarget: resolveAttachment.createView(),\n          loadOp: 'clear',\n          storeOp: 'store',\n        },\n      ],\n      depthStencilAttachment: {\n        view: depthStencilAttachment.createView(),\n        depthClearValue: 0,\n        depthLoadOp: 'clear',\n        depthStoreOp: 'store',\n      },\n    });\n    pass.end();\n    const commandBuffer = encoder.finish();\n\n    switch (textureToDestroy) {\n      case 'none':\n        break;\n      case 'colorAttachment':\n        colorAttachment.destroy();\n        break;\n      case 'resolveAttachment':\n        resolveAttachment.destroy();\n        break;\n      case 'depthStencilAttachment':\n        depthStencilAttachment.destroy();\n        break;\n      default:\n        unreachable();\n    }\n\n    const shouldError = textureToDestroy !== 'none';\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, shouldError);\n  });\n"],"mappings":"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"}