{"version":3,"file":"createSampler.spec.js","names":["description","makeTestGroup","ValidationTest","g","test","desc","paramsSubcasesOnly","u","combine","fn","t","expectValidationError","device","createSampler","lodMinClamp","params","lodMaxClamp","beginSubcases","combineWithParams","undefined","minFilter","magFilter","mipmapFilter","maxAnisotropy"],"sources":["../../../../src/webgpu/api/validation/createSampler.spec.ts"],"sourcesContent":["export const description = `\ncreateSampler validation tests.\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('lodMinAndMaxClamp')\n  .desc('test different combinations of min and max clamp values')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('lodMinClamp', [-4e-30, -1, 0, 0.5, 1, 10, 4e30])\n      .combine('lodMaxClamp', [-4e-30, -1, 0, 0.5, 1, 10, 4e30])\n  )\n  .fn(async t => {\n    t.expectValidationError(() => {\n      t.device.createSampler({\n        lodMinClamp: t.params.lodMinClamp,\n        lodMaxClamp: t.params.lodMaxClamp,\n      });\n    }, t.params.lodMinClamp > t.params.lodMaxClamp || t.params.lodMinClamp < 0 || t.params.lodMaxClamp < 0);\n  });\n\ng.test('maxAnisotropy')\n  .desc('test different maxAnisotropy values and combinations with min/mag/mipmapFilter')\n  .params(u =>\n    u //\n      .beginSubcases()\n      .combineWithParams([\n        ...u.combine('maxAnisotropy', [-1, undefined, 0, 1, 2, 4, 7, 16, 32, 33, 1024]),\n        { minFilter: 'nearest' as const },\n        { magFilter: 'nearest' as const },\n        { mipmapFilter: 'nearest' as const },\n      ])\n  )\n  .fn(async t => {\n    const {\n      maxAnisotropy = 1,\n      minFilter = 'linear',\n      magFilter = 'linear',\n      mipmapFilter = 'linear',\n    } = t.params as {\n      maxAnisotropy?: number;\n      minFilter?: GPUFilterMode;\n      magFilter?: GPUFilterMode;\n      mipmapFilter?: GPUFilterMode;\n    };\n    t.expectValidationError(() => {\n      t.device.createSampler({\n        minFilter,\n        magFilter,\n        mipmapFilter,\n        maxAnisotropy,\n      });\n    }, maxAnisotropy < 1 || (maxAnisotropy > 1 && !(minFilter === 'linear' && magFilter === 'linear' && mipmapFilter === 'linear')));\n  });\n"],"mappings":";AAAA;AAAA,GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,yCAAyC;;AAEvE,SAASC,cAAc,QAAQ,sBAAsB;;AAErD,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,cAAc,CAAC;;AAE9CC,CAAC,CAACC,IAAI,CAAC,mBAAmB,CAAC;AACxBC,IAAI,CAAC,yDAAyD,CAAC;AAC/DC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;AACzDA,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAC7D;;AACAC,EAAE,CAAC,OAAMC,CAAC,KAAI;EACbA,CAAC,CAACC,qBAAqB,CAAC,MAAM;IAC5BD,CAAC,CAACE,MAAM,CAACC,aAAa,CAAC;MACrBC,WAAW,EAAEJ,CAAC,CAACK,MAAM,CAACD,WAAW;MACjCE,WAAW,EAAEN,CAAC,CAACK,MAAM,CAACC;IACxB,CAAC,CAAC;EACJ,CAAC,EAAEN,CAAC,CAACK,MAAM,CAACD,WAAW,GAAGJ,CAAC,CAACK,MAAM,CAACC,WAAW,IAAIN,CAAC,CAACK,MAAM,CAACD,WAAW,GAAG,CAAC,IAAIJ,CAAC,CAACK,MAAM,CAACC,WAAW,GAAG,CAAC,CAAC;AACzG,CAAC,CAAC;;AAEJb,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;AACpBC,IAAI,CAAC,gFAAgF,CAAC;AACtFU,MAAM,CAAC,CAAAR,CAAC;AACPA,CAAC,CAAC;AAAA,CACCU,aAAa,EAAE;AACfC,iBAAiB,CAAC;AACjB,GAAGX,CAAC,CAACC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,EAAEW,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;AAC/E,EAAEC,SAAS,EAAE,SAAkB,CAAC,CAAC;AACjC,EAAEC,SAAS,EAAE,SAAkB,CAAC,CAAC;AACjC,EAAEC,YAAY,EAAE,SAAkB,CAAC,CAAC,CACrC,CAAC,CACL;;;AACAb,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,MAAM;IACJa,aAAa,GAAG,CAAC;IACjBH,SAAS,GAAG,QAAQ;IACpBC,SAAS,GAAG,QAAQ;IACpBC,YAAY,GAAG;EACjB,CAAC,GAAGZ,CAAC,CAACK,MAKL;;;;;;EACDL,CAAC,CAACC,qBAAqB,CAAC,MAAM;IAC5BD,CAAC,CAACE,MAAM,CAACC,aAAa,CAAC;MACrBO,SAAS;MACTC,SAAS;MACTC,YAAY;MACZC;IACF,CAAC,CAAC;EACJ,CAAC,EAAEA,aAAa,GAAG,CAAC,IAAKA,aAAa,GAAG,CAAC,IAAI,EAAEH,SAAS,KAAK,QAAQ,IAAIC,SAAS,KAAK,QAAQ,IAAIC,YAAY,KAAK,QAAQ,CAAE,CAAC;AAClI,CAAC,CAAC"}