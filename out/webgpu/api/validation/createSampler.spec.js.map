{"version":3,"file":"createSampler.spec.js","names":["description","makeTestGroup","AllFeaturesMaxLimitsValidationTest","g","test","desc","paramsSubcasesOnly","u","combine","fn","t","shouldError","params","lodMinClamp","lodMaxClamp","expectValidationError","device","createSampler","beginSubcases","combineWithParams","undefined","minFilter","magFilter","mipmapFilter","maxAnisotropy"],"sources":["../../../../src/webgpu/api/validation/createSampler.spec.ts"],"sourcesContent":["export const description = `\ncreateSampler validation tests.\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\n\nimport { AllFeaturesMaxLimitsValidationTest } from './validation_test.js';\n\nexport const g = makeTestGroup(AllFeaturesMaxLimitsValidationTest);\n\ng.test('lodMinAndMaxClamp')\n  .desc('test different combinations of min and max clamp values')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('lodMinClamp', [-4e-30, -1, 0, 0.5, 1, 10, 4e30])\n      .combine('lodMaxClamp', [-4e-30, -1, 0, 0.5, 1, 10, 4e30])\n  )\n  .fn(t => {\n    const shouldError =\n      t.params.lodMinClamp > t.params.lodMaxClamp ||\n      t.params.lodMinClamp < 0 ||\n      t.params.lodMaxClamp < 0;\n    t.expectValidationError(() => {\n      t.device.createSampler({\n        lodMinClamp: t.params.lodMinClamp,\n        lodMaxClamp: t.params.lodMaxClamp,\n      });\n    }, shouldError);\n  });\n\ng.test('maxAnisotropy')\n  .desc('test different maxAnisotropy values and combinations with min/mag/mipmapFilter')\n  .params(u =>\n    u //\n      .beginSubcases()\n      .combineWithParams([\n        ...u.combine('maxAnisotropy', [-1, undefined, 0, 1, 2, 4, 7, 16, 32, 33, 1024]),\n        { minFilter: 'nearest' as const },\n        { magFilter: 'nearest' as const },\n        { mipmapFilter: 'nearest' as const },\n      ])\n  )\n  .fn(t => {\n    const {\n      maxAnisotropy = 1,\n      minFilter = 'linear',\n      magFilter = 'linear',\n      mipmapFilter = 'linear',\n    } = t.params as {\n      maxAnisotropy?: number;\n      minFilter?: GPUFilterMode;\n      magFilter?: GPUFilterMode;\n      mipmapFilter?: GPUFilterMode;\n    };\n\n    const shouldError =\n      maxAnisotropy < 1 ||\n      (maxAnisotropy > 1 &&\n        !(minFilter === 'linear' && magFilter === 'linear' && mipmapFilter === 'linear'));\n    t.expectValidationError(() => {\n      t.device.createSampler({\n        minFilter,\n        magFilter,\n        mipmapFilter,\n        maxAnisotropy,\n      });\n    }, shouldError);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,yCAAyC;;AAEvE,SAASC,kCAAkC,QAAQ,sBAAsB;;AAEzE,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,kCAAkC,CAAC;;AAElEC,CAAC,CAACC,IAAI,CAAC,mBAAmB,CAAC;AACxBC,IAAI,CAAC,yDAAyD,CAAC;AAC/DC,kBAAkB,CAAC,CAAAC,CAAC;AACnBA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;AACzDA,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC;AAC7D,CAAC;AACAC,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAMC,WAAW;EACfD,CAAC,CAACE,MAAM,CAACC,WAAW,GAAGH,CAAC,CAACE,MAAM,CAACE,WAAW;EAC3CJ,CAAC,CAACE,MAAM,CAACC,WAAW,GAAG,CAAC;EACxBH,CAAC,CAACE,MAAM,CAACE,WAAW,GAAG,CAAC;EAC1BJ,CAAC,CAACK,qBAAqB,CAAC,MAAM;IAC5BL,CAAC,CAACM,MAAM,CAACC,aAAa,CAAC;MACrBJ,WAAW,EAAEH,CAAC,CAACE,MAAM,CAACC,WAAW;MACjCC,WAAW,EAAEJ,CAAC,CAACE,MAAM,CAACE;IACxB,CAAC,CAAC;EACJ,CAAC,EAAEH,WAAW,CAAC;AACjB,CAAC,CAAC;;AAEJR,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;AACpBC,IAAI,CAAC,gFAAgF,CAAC;AACtFO,MAAM,CAAC,CAAAL,CAAC;AACPA,CAAC,CAAC;AAAA,CACCW,aAAa,CAAC,CAAC;AACfC,iBAAiB,CAAC;AACjB,GAAGZ,CAAC,CAACC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,EAAEY,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;AAC/E,EAAEC,SAAS,EAAE,SAAkB,CAAC,CAAC;AACjC,EAAEC,SAAS,EAAE,SAAkB,CAAC,CAAC;AACjC,EAAEC,YAAY,EAAE,SAAkB,CAAC,CAAC;AACrC;AACL,CAAC;AACAd,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAM;IACJc,aAAa,GAAG,CAAC;IACjBH,SAAS,GAAG,QAAQ;IACpBC,SAAS,GAAG,QAAQ;IACpBC,YAAY,GAAG;EACjB,CAAC,GAAGb,CAAC,CAACE,MAKL;;;;;;;EAED,MAAMD,WAAW;EACfa,aAAa,GAAG,CAAC;EAChBA,aAAa,GAAG,CAAC;EAChB,EAAEH,SAAS,KAAK,QAAQ,IAAIC,SAAS,KAAK,QAAQ,IAAIC,YAAY,KAAK,QAAQ,CAAE;EACrFb,CAAC,CAACK,qBAAqB,CAAC,MAAM;IAC5BL,CAAC,CAACM,MAAM,CAACC,aAAa,CAAC;MACrBI,SAAS;MACTC,SAAS;MACTC,YAAY;MACZC;IACF,CAAC,CAAC;EACJ,CAAC,EAAEb,WAAW,CAAC;AACjB,CAAC,CAAC"}