{"version":3,"file":"destroy.spec.js","names":["description","makeTestGroup","ValidationTest","g","test","fn","t","qset","createQuerySetTracked","type","count","destroy","desc","device","pushErrorScope","invalidQuerySet","error","popErrorScope","expect"],"sources":["../../../../../src/webgpu/api/validation/query_set/destroy.spec.ts"],"sourcesContent":["export const description = `\nDestroying a query set more than once is allowed.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { ValidationTest } from '../validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('twice').fn(t => {\n  const qset = t.createQuerySetTracked({ type: 'occlusion', count: 1 });\n\n  qset.destroy();\n  qset.destroy();\n});\n\ng.test('invalid_queryset')\n  .desc('Test that invalid querysets may be destroyed without generating validation errors.')\n  .fn(async t => {\n    t.device.pushErrorScope('validation');\n\n    const invalidQuerySet = t.createQuerySetTracked({\n      type: 'occlusion',\n      count: 4097, // 4096 is the limit\n    });\n\n    // Expect error because it's invalid.\n    const error = await t.device.popErrorScope();\n    t.expect(!!error);\n\n    // This line should not generate an error\n    invalidQuerySet.destroy();\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,4CAA4C;AAC1E,SAASC,cAAc,QAAQ,uBAAuB;;AAEtD,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,cAAc,CAAC;;AAE9CC,CAAC,CAACC,IAAI,CAAC,OAAO,CAAC,CAACC,EAAE,CAAC,CAAAC,CAAC,KAAI;EACtB,MAAMC,IAAI,GAAGD,CAAC,CAACE,qBAAqB,CAAC,EAAEC,IAAI,EAAE,WAAW,EAAEC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;;EAErEH,IAAI,CAACI,OAAO,CAAC,CAAC;EACdJ,IAAI,CAACI,OAAO,CAAC,CAAC;AAChB,CAAC,CAAC;;AAEFR,CAAC,CAACC,IAAI,CAAC,kBAAkB,CAAC;AACvBQ,IAAI,CAAC,oFAAoF,CAAC;AAC1FP,EAAE,CAAC,OAAMC,CAAC,KAAI;EACbA,CAAC,CAACO,MAAM,CAACC,cAAc,CAAC,YAAY,CAAC;;EAErC,MAAMC,eAAe,GAAGT,CAAC,CAACE,qBAAqB,CAAC;IAC9CC,IAAI,EAAE,WAAW;IACjBC,KAAK,EAAE,IAAI,CAAE;EACf,CAAC,CAAC;;EAEF;EACA,MAAMM,KAAK,GAAG,MAAMV,CAAC,CAACO,MAAM,CAACI,aAAa,CAAC,CAAC;EAC5CX,CAAC,CAACY,MAAM,CAAC,CAAC,CAACF,KAAK,CAAC;;EAEjB;EACAD,eAAe,CAACJ,OAAO,CAAC,CAAC;AAC3B,CAAC,CAAC"}