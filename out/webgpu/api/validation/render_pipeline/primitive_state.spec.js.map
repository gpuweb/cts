{"version":3,"file":"primitive_state.spec.js","names":["description","makeTestGroup","kPrimitiveTopology","kIndexFormat","CreateRenderPipelineValidationTest","g","test","desc","params","u","combine","undefined","fn","t","isAsync","topology","stripIndexFormat","descriptor","getDescriptor","primitive","_success","doCreateRenderPipelineTest","unclippedDepth","device","features","has"],"sources":["../../../../../src/webgpu/api/validation/render_pipeline/primitive_state.spec.ts"],"sourcesContent":["export const description = `\nThis test dedicatedly tests validation of GPUPrimitiveState of createRenderPipeline.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { kPrimitiveTopology, kIndexFormat } from '../../../capability_info.js';\n\nimport { CreateRenderPipelineValidationTest } from './common.js';\n\nexport const g = makeTestGroup(CreateRenderPipelineValidationTest);\n\ng.test('strip_index_format')\n  .desc(\n    `If primitive.topology is not \"line-strip\" or \"triangle-strip\", primitive.stripIndexFormat must be undefined.`\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('topology', [undefined, ...kPrimitiveTopology] as const)\n      .combine('stripIndexFormat', [undefined, ...kIndexFormat] as const)\n  )\n  .fn(t => {\n    const { isAsync, topology, stripIndexFormat } = t.params;\n\n    const descriptor = t.getDescriptor({ primitive: { topology, stripIndexFormat } });\n\n    const _success =\n      topology === 'line-strip' || topology === 'triangle-strip' || stripIndexFormat === undefined;\n    t.doCreateRenderPipelineTest(isAsync, _success, descriptor);\n  });\n\ng.test('unclipped_depth')\n  .desc(`If primitive.unclippedDepth is true, features must contain \"depth-clip-control\".`)\n  .params(u => u.combine('isAsync', [false, true]).combine('unclippedDepth', [false, true]))\n  .fn(t => {\n    const { isAsync, unclippedDepth } = t.params;\n\n    const descriptor = t.getDescriptor({ primitive: { unclippedDepth } });\n\n    const _success = !unclippedDepth || t.device.features.has('depth-clip-control');\n    t.doCreateRenderPipelineTest(isAsync, _success, descriptor);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,4CAA4C;AAC1E,SAASC,kBAAkB,EAAEC,YAAY,QAAQ,6BAA6B;;AAE9E,SAASC,kCAAkC,QAAQ,aAAa;;AAEhE,OAAO,MAAMC,CAAC,GAAGJ,aAAa,CAACG,kCAAkC,CAAC;;AAElEC,CAAC,CAACC,IAAI,CAAC,oBAAoB,CAAC;AACzBC,IAAI;EACF;AACH,CAAC;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACjCA,OAAO,CAAC,UAAU,EAAE,CAACC,SAAS,EAAE,GAAGT,kBAAkB,CAAU,CAAC;AAChEQ,OAAO,CAAC,kBAAkB,EAAE,CAACC,SAAS,EAAE,GAAGR,YAAY,CAAU;AACtE,CAAC;AACAS,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,gBAAgB,CAAC,CAAC,GAAGH,CAAC,CAACL,MAAM;;EAExD,MAAMS,UAAU,GAAGJ,CAAC,CAACK,aAAa,CAAC,EAAEC,SAAS,EAAE,EAAEJ,QAAQ,EAAEC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEjF,MAAMI,QAAQ;EACZL,QAAQ,KAAK,YAAY,IAAIA,QAAQ,KAAK,gBAAgB,IAAIC,gBAAgB,KAAKL,SAAS;EAC9FE,CAAC,CAACQ,0BAA0B,CAACP,OAAO,EAAEM,QAAQ,EAAEH,UAAU,CAAC;AAC7D,CAAC,CAAC;;AAEJZ,CAAC,CAACC,IAAI,CAAC,iBAAiB,CAAC;AACtBC,IAAI,CAAE,kFAAiF,CAAC;AACxFC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAACA,OAAO,CAAC,gBAAgB,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;AACzFE,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAM,EAAEC,OAAO,EAAEQ,cAAc,CAAC,CAAC,GAAGT,CAAC,CAACL,MAAM;;EAE5C,MAAMS,UAAU,GAAGJ,CAAC,CAACK,aAAa,CAAC,EAAEC,SAAS,EAAE,EAAEG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;;EAErE,MAAMF,QAAQ,GAAG,CAACE,cAAc,IAAIT,CAAC,CAACU,MAAM,CAACC,QAAQ,CAACC,GAAG,CAAC,oBAAoB,CAAC;EAC/EZ,CAAC,CAACQ,0BAA0B,CAACP,OAAO,EAAEM,QAAQ,EAAEH,UAAU,CAAC;AAC7D,CAAC,CAAC"}