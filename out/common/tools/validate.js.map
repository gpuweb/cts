{"version":3,"file":"validate.js","names":["process","crawl","usage","rc","console","error","exit","args","argv","slice","length","indexOf","printMetadataWarnings","printCaseCountReport","suiteDirs","arg","push","suiteDir","validate"],"sources":["../../../src/common/tools/validate.ts"],"sourcesContent":["import * as process from 'process';\n\nimport { crawl } from './crawl.js';\n\nfunction usage(rc: number): never {\n  console.error(`Usage: tools/validate [options] [SUITE_DIRS...]\n\nFor each suite in SUITE_DIRS, validate some properties about the file:\n- It has a .description and .g\n- That each test:\n  - Has a test function (or is marked unimplemented)\n  - Has no duplicate cases\n  - Configures batching correctly, if used\n- That each case query is not too long\n\nExample:\n  tools/validate src/unittests src/webgpu\n\nOptions:\n  --help                     Print this message and exit.\n  --print-metadata-warnings  Print non-fatal warnings about listing_meta.json files to stderr.\n  --print-case-count-report  Print the case/subcase counts of every test to stdout.\n`);\n  process.exit(rc);\n}\n\nconst args = process.argv.slice(2);\nif (args.length < 1) {\n  usage(0);\n}\nif (args.indexOf('--help') !== -1) {\n  usage(0);\n}\n\nlet printMetadataWarnings = false;\nlet printCaseCountReport = false;\nconst suiteDirs = [];\nfor (const arg of args) {\n  switch (arg) {\n    case '--print-metadata-warnings':\n      printMetadataWarnings = true;\n      break;\n    case '--print-case-count-report':\n      printCaseCountReport = true;\n      break;\n    default:\n      suiteDirs.push(arg);\n      break;\n  }\n}\n\nif (suiteDirs.length === 0) {\n  usage(0);\n}\n\nfor (const suiteDir of suiteDirs) {\n  void crawl(suiteDir, {\n    validate: true,\n    printMetadataWarnings,\n    printCaseCountReport,\n  });\n}\n"],"mappings":";;GAAA,OAAO,KAAKA,OAAO,MAAM,SAAS,CAElC,SAASC,KAAK,QAAQ,YAAY;;AAElC,SAASC,KAAKA,CAACC,EAAU,EAAS;EAChCC,OAAO,CAACC,KAAK,CAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC;EACAL,OAAO,CAACM,IAAI,CAACH,EAAE,CAAC;AAClB;;AAEA,MAAMI,IAAI,GAAGP,OAAO,CAACQ,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC;AAClC,IAAIF,IAAI,CAACG,MAAM,GAAG,CAAC,EAAE;EACnBR,KAAK,CAAC,CAAC,CAAC;AACV;AACA,IAAIK,IAAI,CAACI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;EACjCT,KAAK,CAAC,CAAC,CAAC;AACV;;AAEA,IAAIU,qBAAqB,GAAG,KAAK;AACjC,IAAIC,oBAAoB,GAAG,KAAK;AAChC,MAAMC,SAAS,GAAG,EAAE;AACpB,KAAK,MAAMC,GAAG,IAAIR,IAAI,EAAE;EACtB,QAAQQ,GAAG;IACT,KAAK,2BAA2B;MAC9BH,qBAAqB,GAAG,IAAI;MAC5B;IACF,KAAK,2BAA2B;MAC9BC,oBAAoB,GAAG,IAAI;MAC3B;IACF;MACEC,SAAS,CAACE,IAAI,CAACD,GAAG,CAAC;MACnB;EACJ;AACF;;AAEA,IAAID,SAAS,CAACJ,MAAM,KAAK,CAAC,EAAE;EAC1BR,KAAK,CAAC,CAAC,CAAC;AACV;;AAEA,KAAK,MAAMe,QAAQ,IAAIH,SAAS,EAAE;EAChC,KAAKb,KAAK,CAACgB,QAAQ,EAAE;IACnBC,QAAQ,EAAE,IAAI;IACdN,qBAAqB;IACrBC;EACF,CAAC,CAAC;AACJ"}