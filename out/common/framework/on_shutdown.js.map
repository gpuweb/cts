{"version":3,"file":"on_shutdown.js","names":["shutdownTasks","registerShutdownTask","task","push","runShutdownTasks","length"],"sources":["../../../src/common/framework/on_shutdown.ts"],"sourcesContent":["const shutdownTasks: (() => void)[] = [];\n\n/**\n * Register a callback to be run during program shutdown (triggered, e.g., by the 'beforeunload'\n * event when the webpage is being closed).\n *\n * Note such tasks should be synchronous functions; otherwise, they probably won't complete.\n */\nexport function registerShutdownTask(task: () => void) {\n  shutdownTasks.push(task);\n}\n\n/** Run all shutdown tasks. Should only be called during program shutdown. */\nexport function runShutdownTasks() {\n  for (const task of shutdownTasks) {\n    task();\n  }\n  shutdownTasks.length = 0;\n}\n"],"mappings":";;GAAA,MAAMA,aAA6B,GAAG,EAAE,CAAC,CAEzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,oBAAoBA,CAACC,IAAgB,EAAE;EACrDF,aAAa,CAACG,IAAI,CAACD,IAAI,CAAC;AAC1B;;AAEA;AACA,OAAO,SAASE,gBAAgBA,CAAA,EAAG;EACjC,KAAK,MAAMF,IAAI,IAAIF,aAAa,EAAE;IAChCE,IAAI,CAAC,CAAC;EACR;EACAF,aAAa,CAACK,MAAM,GAAG,CAAC;AAC1B"}