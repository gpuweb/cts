{"version":3,"file":"uniformity_snippet.spec.js","names":["description","makeTestGroup","specToCode","UnitTest","F","test","spec","expect","got","g","fn","t"],"sources":["../../src/unittests/uniformity_snippet.spec.ts"],"sourcesContent":["export const description = `\nTest for shader uniformity code snippet generation.\n`;\n\nimport { makeTestGroup } from '../common/framework/test_group.js';\nimport { specToCode } from '../webgpu/shader/validation/uniformity/snippet.js';\n\nimport { UnitTest } from './unit_test.js';\n\nclass F extends UnitTest {\n  test(spec: string, expect: string): void {\n    const got = specToCode(spec);\n    this.expect(\n      expect === got,\n      `\nexpected: ${expect}\ngot:      ${got}`\n    );\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('strings').fn(t => {\n  t.test(\n    'loop-end',\n    `  loop {\n  }\n`\n  ),\n    t.test(\n      'loop-cond-break-op',\n      `  loop {\n    if <cond> {break;}\n    <op>\n  }\n`\n    ),\n    t.test(\n      'for-unif-always-return-op',\n      `  for (;<uniform_cond>;) {\n    return;\n    <op>\n  }\n`\n    ),\n    t.test(\n      'loop-op-continuing-cond-break',\n      `  loop {\n    <op>\n    continuing {\n      break if <cond>;\n    }\n  }\n`\n    ),\n    t.test(\n      // This is the case suggested in https://github.com/gpuweb/cts/pull/4477#issuecomment-3408419425\n      'loop-always-return-continuing-cond-break-end-op',\n      `  loop {\n    return;\n    continuing {\n      break if <cond>;\n    }\n  }\n  <op>\n`\n    );\n});\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,mCAAmC;AACjE,SAASC,UAAU,QAAQ,mDAAmD;;AAE9E,SAASC,QAAQ,QAAQ,gBAAgB;;AAEzC,MAAMC,CAAC,SAASD,QAAQ,CAAC;EACvBE,IAAIA,CAACC,IAAY,EAAEC,MAAc,EAAQ;IACvC,MAAMC,GAAG,GAAGN,UAAU,CAACI,IAAI,CAAC;IAC5B,IAAI,CAACC,MAAM;MACTA,MAAM,KAAKC,GAAG;MACb;AACP,YAAYD,MAAO;AACnB,YAAYC,GAAI;IACZ,CAAC;EACH;AACF;;AAEA,OAAO,MAAMC,CAAC,GAAGR,aAAa,CAACG,CAAC,CAAC;;AAEjCK,CAAC,CAACJ,IAAI,CAAC,SAAS,CAAC,CAACK,EAAE,CAAC,CAAAC,CAAC,KAAI;EACxBA,CAAC,CAACN,IAAI;IACJ,UAAU;IACT;AACL;AACA;EACE,CAAC;EACCM,CAAC,CAACN,IAAI;IACJ,oBAAoB;IACnB;AACP;AACA;AACA;AACA;EACI,CAAC;EACDM,CAAC,CAACN,IAAI;IACJ,2BAA2B;IAC1B;AACP;AACA;AACA;AACA;EACI,CAAC;EACDM,CAAC,CAACN,IAAI;IACJ,+BAA+B;IAC9B;AACP;AACA;AACA;AACA;AACA;AACA;EACI,CAAC;EACDM,CAAC,CAACN,IAAI;IACJ;IACA,iDAAiD;IAChD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;EACI,CAAC;AACL,CAAC,CAAC"}